(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["map-widget-app"],{1318:(e,t,n)=>{"use strict";n.d(t,{F:()=>r,i:()=>o});var r=["overview","menu","prices","inside","posts","gallery","reviews","edadeal","related","chain","hotels-booking","events","realty","features","infrastructure","encyclopedia"],o=["overview","services","inside","attractions","encyclopedia"]},9471:(e,t,n)=>{"use strict";n.d(t,{rP:()=>l,WU:()=>d,iJ:()=>s,Eh:()=>u,AC:()=>c,EY:()=>a,md:()=>m,cD:()=>f,XA:()=>p});var r=n(5196);n(6859),n(2208);var o={search:["orgpage","search-result","bookmarks","traffic","masstransit","user-profile"],"search-result":["user-profile","booking"],discovery:["orgpage","search","traffic","masstransit","user-profile"],bookmarks:["search","routes","traffic","masstransit","user-profile"],routes:["search","search-result","bookmarks","traffic","feedback","user-profile","masstransit"],usermaps:["search","bookmarks","discovery","orgpage","search-result","feedback","masstransit","routes","traffic","user-profile"],photos:["booking"]},i=["photos","panoramas","mrc","mobile-app-share","reviews","share","stories-player","stories-editor","booking"];function a(e){return i.includes(e)}function s(e,t){void 0===t&&(t=!0);var n=e.stack,r=t?n.filter((function(e){return!a(e.mode)})):n,o=r[r.length-1],i=function(e){var t=e.traffic,n=e.masstransit,r=e.homePanel,o=e.config,i=e.nightOverlay;if(Boolean(o.experiments.ui.singleHome)&&!o.uatraits.isMobile)return r.types&&r.types.length?r.types[r.types.length-1]:"home";if(!r.isOpen)return"home";if(t.isLayerEnabled)return"traffic";if(n.isLayerShown&&!o.uatraits.isMobile)return"masstransit";if(i.isShown&&o.uatraits.isMobile)return"night";return"home"}(e);return o&&o.mode||i}function c(e,t){var n=e.stack,r=a(t)?n:n.filter((function(e){return!a(e.mode)})),o=r[r.length-1];if(o&&o.mode===t)return o}function u(e,t){var n=e.stack,s=o[t];a(t)||(s=s?s.concat(i):i);for(var c,u=[],l=(0,r.Z)(n.slice().reverse());!(c=l()).done;){var d=c.value;if(!s||!s.includes(d.mode)){if(d.mode!==t)break;u.unshift(d)}}return u}function l(e){var t=e.stack;return t[t.length-1]||void 0}function d(e){var t=c(e,s(e));return t?t.mobileViewState||"expanded":e.defaultMobileViewState}function p(e){if(e.config.uatraits.isMobile){var t=c(e,s(e)),n=(null==t?void 0:t.mobileViewState)||e.defaultMobileViewState;return Boolean("expanded"!==n)}return e.collapsedSidebar}function f(e){return e.baseUrl.endsWith("/profile")}function m(e){return f(e)||Boolean(e.query["profile-mode"])}},3552:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r,o=n(9906);const i={ROOT_FOLDER_ID:"the_root_folder",FAVORITES_FOLDER_ID:"the_favorites_folder",HOME_ID:"home",WORK_ID:"work",FOLDER_TAGS:{SHOW_ON_MAP:"show-on-map",SHARED:"maps:shared",CLOSED:"maps:shared:closed"},getLib:function(e){return r||(r=(0,o.Z)(e.bookmarks.url).then((function(){if(!window.ya)throw new Error("Library for bookmarks is not found");var t=window.ya.bookmarks;return t.config({cloudApiUrl:e.cloudApi.url,lang:e.locale.split("_")[0],useClientStorage:!1}),t}))),r}}},6176:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(7462),o=n(4578),i=n(7363),a=n(935),s=n(5876),c=n(1491),u=n(3225),l={angle:"dropdown-16",triangle:"arrow-down-8"},d=(0,s.Z)("button"),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=i.createRef(),n._onMouseEnter=function(e){n.props.title&&!n.state.hideTitle&&n.setState({hideTitle:!0}),n.props.onMouseEnter&&n.props.onMouseEnter(e)},n._onMouseDown=function(e){n.props.disabled||(n.setState({pressed:Boolean(n.props.onClick)}),n.props.onMouseDown&&n.props.onMouseDown(e))},n._onMouseUp=function(){n.setState({pressed:!1})},n._onMouseOut=function(){n.setState({pressed:!1})},n._onFocus=function(){var e=n.props.forwardedRef,t=void 0===e?n._ref:e;if(n.state.pressed){var r=t.current;r&&r.blur()}},n._renderLink=function(e,t){var o=n.props,a=o.disabled,s=o.url,c=o.rel,u=o.target,l=o.forwardedRef,d=void 0===l?n._ref:l;return i.createElement("a",(0,r.Z)({href:a?void 0:s,role:"button",target:u||"_parent","aria-disabled":!!a||void 0,ref:d,rel:c},e),t)},n._renderButton=function(e,t){var o=n.props,a=o.disabled,s=o.type,c=void 0===s?"button":s,u=o.forwardedRef,l=void 0===u?n._ref:u;return i.createElement("button",(0,r.Z)({disabled:a,type:c,ref:l},e),t)},n._renderIcon=function(e){var t=n.props;return i.createElement("span",{key:"icon",className:e("icon"),style:{width:t.iconWidth},"aria-hidden":!0},t.icon)},n._renderTick=function(e){var t=l[n.props.tick];return i.createElement(c.Z,{name:t,key:"tick",className:e("tick"),inline:!0})},n.state={pressed:!1,hideTitle:!1},n}return(0,o.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=[t.icon?this._renderIcon(d):null,t.children?i.createElement("span",{key:"text",className:d("text")},t.children):null,t.tick?this._renderTick(d):null],o=t.ariaHidden?u.x:{"aria-haspopup":void 0!==t.ariaExpanded,"aria-expanded":t.ariaExpanded,"aria-label":t.children?void 0:t.ariaLabel},a=(0,r.Z)({className:d({view:t.view,ui:(e=t.view,!["air","air-alt","air-round","search"].includes(e)),size:t.size,link:Boolean(t.url),disabled:t.disabled,checked:t.checked,static:t.static,"pin-left":t.pinLeft,"pin-right":t.pinRight,"pin-top":t.pinTop,"pin-bottom":t.pinBottom,pressed:this.state.pressed||t.pressed,tick:t.tick,stretched:t.isStretched,"text-align-left":t.isTextAlignLeft,"flipped-tick":t.flippedTick,hovered:t.hovered,focused:t.focused,"no-shadow":t.noShadow,truncated:t.truncated,"dark-theme-only":t.darkThemeOnly}),title:this.state.hideTitle?void 0:t.title,"aria-pressed":this.state.pressed||t.pressed,itemProp:t.itemProp,onMouseEnter:this._onMouseEnter,onMouseLeave:t.onMouseLeave,onClick:t.disabled?void 0:t.onClick,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onMouseOut:this._onMouseOut,onFocus:this._onFocus},o);return t.url?this._renderLink(a,n):this._renderButton(a,n)},t}(i.Component);const f=(0,a.Z)(p)},1338:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(4578),o=n(7462),i=n(7363),a=n(1533),s=[],c=function(e,t){var n=e.target,r=t.node,o=t.callback,i=t.stopPropagation,a=t.getExcludedNodes;if(d(r,n))return!i;var s=a&&a();if(s){var c=(s=Array.isArray(s)?s:[s]).some((function(e){return d(e,n)}));if(c)return!i}return o(e),!i},u=function(e){for(var t=s.length-1;t>=0;t--){if(!c(e,s[t]))break}},l=function(e,t){0===s.length&&(window.document.addEventListener("mousedown",u,!0),window.document.addEventListener("touchstart",u,{capture:!0,passive:!1}));var n=(0,o.Z)({node:e},t);return s.push(n),function(){return e=n,void(0===(s=s.filter((function(t){return e!==t}))).length&&(window.document.removeEventListener("mousedown",u,!0),window.document.removeEventListener("touchstart",u,!0)));var e}};function d(e,t){return e===t||e.contains(t)}const p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._unsubscribe=void 0,t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.callback,n=e.stopPropagation,r=e.getExcludedNodes,o=a.findDOMNode(this);o instanceof Element&&(this._unsubscribe=l(o,{callback:t,stopPropagation:n,getExcludedNodes:r}))},n.componentWillUnmount=function(){this._unsubscribe()},n.render=function(){return i.Children.only(this.props.children)},t}(i.Component)},1228:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(7462),o=n(7363),i=n(5876),a=n(1491),s=n(6576),c=n(2514),u=n(2030),l=(0,i.Z)("close-button");const d=function(e){var t=e.color,n=void 0===t?"black":t,i=e.offset,d=void 0===i?"small":i,p=e.onClick,f=e.circle,m=e.relative,v=e.usePortal,h=((0,c.ZR)(),o.createRef()),g=(0,u.p)(h),y=o.createElement("button",(0,r.Z)({type:"button","aria-label":"Закрыть",className:l({color:n,circle:f,relative:m,offset:"string"==typeof d?d:void 0}),onClick:p,style:"string"==typeof d?{}:d,ref:h},g),o.createElement(a.Z,{inline:!0,name:f?"close-24":"cross-16"}));return v?o.createElement(s.Z,{selector:".body"},y):y}},1027:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l,v6:()=>s,KE:()=>u});var r=n(7363);function o(){}var i=(0,n(671).Z)("flyover",{showFlyover:!1,updateTile3dState:o,tile3dState:null,setLayerInitialized:o,isLayerInitialized:!1}),a=i.connect,s=i.Provider,c=i.Context;function u(){return r.useContext(c)}const l=a},9971:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(4578),o=n(7363),i=n(1533),a=n(5876);const s=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){return this.props.children},t}(o.PureComponent);var c=n(6004),u=n(2514),l=(0,a.Z)("hover-hint"),d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._target=null,n._showTimerId=0,n._hide=function(){window.clearTimeout(n._showTimerId),n._showTimerId=0,n.setState({isShown:!1})},n._onPopupClose=function(){n._hide()},n._onMouseEnter=function(){n._showTimerId||n.props.isDisabled||(n._showTimerId=window.setTimeout((function(){return n.setState({isShown:!0})}),n.props.delay||200))},n._onMouseLeave=function(){n._hide()},n._onClick=function(){void 0===n.props.hideOnClick||n.props.hideOnClick?n._hide():n.props.config.uatraits.isMobile&&n._onMouseEnter()},n._renderPopup=function(){var e=n.props,t=e.isAir?"air":"help",r=Boolean(!e.isDisabled&&(n.state.isShown||e.force));return o.createElement(c.Z,{isShown:r,position:e.position,offset:e.offset,type:t,onScroll:e.onScroll||"reposition",getTarget:function(){return n._target||null},onClose:n._onPopupClose,className:e.className,showArrow:e.showArrow,arrowOffset:e.arrowOffset},o.createElement("div",{className:l({type:t,size:e.size||"m"})},e.text))},n.state={isShown:Boolean(t.isInitialShown)},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._target&&(this._target.addEventListener("mouseenter",this._onMouseEnter),this._target.addEventListener("mouseleave",this._onMouseLeave),this._target.addEventListener("click",this._onClick))},n.componentWillUnmount=function(){this._target&&(this._target.removeEventListener("mouseenter",this._onMouseEnter),this._target.removeEventListener("mouseleave",this._onMouseLeave),this._target.removeEventListener("click",this._onClick)),window.clearTimeout(this._showTimerId),this._showTimerId=0},n.componentDidUpdate=function(e){!e.isDisabled&&this.props.isDisabled&&this.state.isShown&&(window.clearTimeout(this._showTimerId),this._showTimerId=0,this.setState({isShown:!1}))},n.render=function(){var e=this,t=this.props;return t.config.uatraits.isMobile&&!t.isNeededOnMobile?t.children:o.createElement(o.Fragment,null,o.createElement(s,{ref:function(t){return e._target=t?i.findDOMNode(t):null}},t.children),this._renderPopup())},t}(o.Component);const p=(0,u.ZP)(d)},1491:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(7462),o=n(7363),i=n(2514),a=n(1721);var s=n(8253);const c=function(e){var t=(0,i.ZR)(),n=function(e,t){var n="dark"===e.theme?"_night":"",r=e.name.split("."),o=r[0],i=r[1],a=""+o+n+"."+(void 0===i?"svg":i);return t.staticHost+"static/v32/icons/core/"+a}({name:e.name,theme:e.theme},t),c=new RegExp("^.*?(?:-(\\d+))?(?:x(\\d+))?$").exec(e.name),u=e.name.split(".")[1],l=void 0===u?"svg":u,d=null!=c&&c[1]?Number(c[1]):void 0,p=null!=c&&c[2]?Number(c[2]):d,f=(0,s.h)({callback:e.onClick});if(e.inline&&"svg"===l)return o.createElement(a.Z,{url:n,ariaLabel:e.onClick?e.ariaLabel:void 0,className:e.className,onClick:e.onClick,style:e.style,"aria-hidden":e.ariaHidden||!e.onClick},"function"==typeof e.inline?e.inline:void 0);var m={width:d,height:p},v=(0,r.Z)({},e.style,m);return o.createElement("img",(0,r.Z)({},f,{"aria-hidden":e.ariaHidden||!e.onClick,alt:e.onClick?e.ariaLabel:void 0,src:n,className:e.className,onClick:e.onClick,style:v}))}},6004:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n(7462),o=n(7326),i=n(4578),a=n(7363),s=n(5876),c=n(6576),u=n(1338),l=n(5522),d=n(2694),p=["INPUT","SELECT","TEXTAREA"],f=[],m=function(e,t){var n=e.keyCode,r=e.target.tagName,o=t.handlers,i=t.stopPropagation,a=o.find((function(e){return e.key===n})),s=p.includes(r);return!a||!a.allowInEditable&&s?!(a||i):(a.callback(e),e.preventDefault(),!1)},v=function(e){for(var t=f.length-1;t>=0;t--){if(!m(e,f[t]))break}},h=function(e){e.keyCode!==d.n.PRINT_SCREEN&&v(e)},g=function(e){e.keyCode===d.n.PRINT_SCREEN&&v(e)},y=function(e,t){0===f.length&&(window.document.addEventListener("keydown",h),window.document.addEventListener("keyup",g));var n={handlers:e,stopPropagation:t};return f.push(n),function(){return e=n,void(0===(f=f.filter((function(t){return e!==t}))).length&&(window.document.removeEventListener("keydown",h),window.document.removeEventListener("keyup",g)));var e}};const _=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._unsubscribe=void 0,t}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=e.stopPropagation,n=e.handlers,r=Array.isArray(n)?n.slice():[n];this._unsubscribe=y(r,Boolean(t))},n.componentWillUnmount=function(){this._unsubscribe()},n.render=function(){return null},t}(a.Component);var b=n(9056),w=n(9061),E=n(6516),S=n(111),C=n(1491),k=(0,s.Z)("popup"),R={bottom:{vertical:!0,bottom:!0,center:!0},"bottom-right":{vertical:!0,bottom:!0,right:!0},"bottom-left":{vertical:!0,bottom:!0,left:!0},"right-bottom":{horizontal:!0,right:!0,bottom:!0},right:{horizontal:!0,right:!0,middle:!0},"right-top":{horizontal:!0,right:!0,top:!0},top:{vertical:!0,top:!0,center:!0},"top-right":{vertical:!0,top:!0,right:!0},"top-left":{vertical:!0,top:!0,left:!0},left:{horizontal:!0,left:!0,middle:!0},"left-bottom":{horizontal:!0,left:!0,bottom:!0},"left-top":{horizontal:!0,left:!0,top:!0}},Z=[],P=function(e){function t(t){var n;return(n=e.call(this,t)||this)._arrow=void 0,n._popup=a.createRef(),n._popupSize=void 0,n._observer=void 0,n._repositionThrottled=void 0,n._getArrowDimensions=function(){if("tooltip"===n.props.type)return{diagonal:24,height:12};var e=n._arrow?10:0,t=Math.round(e*Math.sqrt(2));return{diagonal:t,height:t/2}},n._getPopupSize=function(){var e=n._popup.current.getBoundingClientRect(),t=n.props.getTarget(),r=n.props.isDropdown&&t?t.getBoundingClientRect().width:e.width;return{width:Math.round(r),height:Math.round(e.height)}},n._getTargetSize=function(){var e=n.props.getTarget();if(e instanceof HTMLElement)return{width:e.offsetWidth,height:e.offsetHeight};if(e&&"getBBox"in e){var t=e.getBBox();return{width:t.width,height:t.height}}return{width:0,height:0}},n._getTargetRect=function(){var e=n.props.getTarget();if(!e)return{top:0,right:0,bottom:0,left:0};var t=n._getTargetSize(),r=e.getBoundingClientRect(),o={top:r.top+M(),left:r.left+I()};return{top:o.top,right:o.left+t.width,bottom:o.top+t.height,left:o.left}},n._isTargetVisible=function(e,t){var r=t.top,o=t.right,i=t.bottom,a=t.left;if(!n.props.checkTargetVisibility)return!0;var s=a+(o-a)/2,c=r+(i-r)/2,u=window.document.elementFromPoint(s,c);return e.contains(u)},n._reposition=function(){var e=n.props,t=e.getTarget();if(e.isShown&&n._popup.current&&t){var r=n._getTargetRect();if(n._isTargetVisible(t,r)){var o=(e.offset?e.offset.main:0)+3,i=e.offset?e.offset.side:0,a=function(){var e=window.document.documentElement,t=I(),n=M(),r=e.clientWidth,o=e.clientHeight,i=Math.max(e.scrollHeight,o)-o;n>i&&(n=i);return{top:n,right:t+r,bottom:n+o,left:t}}(),s=n._getPopupSize(),c=n._getArrowDimensions(),u=!n._popupSize||n._popupSize.width!==s.width||n._popupSize.height!==s.height;n.props.onSizeChange&&u&&n.props.onSizeChange(s),n._popupSize=s;var l,d,p,f=-c.height,m=c.height/2,v=s.width*s.height,h=null,g=[];g=g.concat(n.props.position||"bottom"),e.restrictPosition||(g=g.concat(Object.keys(R)));for(var y=0;y<g.length;y++){var _=g[y],b=R[_],w={top:0,right:0,bottom:0,left:0},E={top:"auto",right:"auto",bottom:"auto",left:"auto"},S=void 0,C=e.arrowOffset||0,k=(e.positionOffsets||{})[_]||{main:0,side:0};if(b.horizontal){b.left?(w.left=r.left-s.width-c.height-o+k.main,E.right=f,S="left"):b.right&&(w.left=r.right+c.height+o+k.main,E.left=f,S="right"),b.middle?w.top=(r.top+r.bottom-s.height)/2+i+k.side:b.top?w.top=Math.max(r.bottom,(r.top+r.bottom+c.height)/2)+m-s.height-i+k.side:b.bottom&&(w.top=Math.min(r.top,(r.top+r.bottom-c.height)/2)-m+i+k.side);var Z=(r.top+r.bottom-c.diagonal)/2-w.top+i+k.side+C;E.top=Math.min(Math.max(0,Z),s.height-c.diagonal)}else if(b.vertical){b.top?(w.top=r.top-s.height-c.height-o+k.main,E.bottom=f,S="top"):b.bottom&&(w.top=r.bottom+c.height+o+k.main,E.top=f,S="bottom"),b.center?w.left=(r.left+r.right-s.width)/2+i+k.side:b.left?w.left=Math.max(r.right-s.width,(r.left+r.right+c.height)/2)+m-s.width-i+k.side:b.right&&(w.left=Math.min(r.left,(r.left+r.right-c.height)/2)-m+i+k.side);var P=(r.left+r.right-c.diagonal)/2-w.left+i+C+k.side;E.left=Math.min(Math.max(0,P),s.width-c.diagonal)}w.bottom=w.top+s.height,w.right=w.left+s.width;var x=(l=w,d=a,p=void 0,p=Math.max(0,Math.min(l.right,d.right)-Math.max(l.left,d.left))*Math.max(0,Math.min(l.bottom,d.bottom)-Math.max(l.top,d.top)),Math.round(p));if(e.isMinLeftZero&&w.left<0&&b.vertical&&("number"==typeof E.left&&(E.left+=w.left),w.left=0),(!h||x>h.square)&&(h={popupPos:{left:w.left,top:w.top},arrowPos:E,square:x,mainPos:S}),x===v)break}var T=h.popupPos,L={left:Math.floor(T.left),top:Math.floor(T.top)};n.props.isDropdown&&(L.width=n._getTargetSize().width);var D=T.top>0?a.bottom-T.top:void 0;n.setState({style:L,arrowStyle:h.arrowPos,position:h.mainPos,maxContentHeight:e.skipMaxHeight?void 0:D,isShown:!0,isTargetVisible:!0})}else n.setState({isTargetVisible:!1})}},n._onClose=function(e,t){n.props.onClose&&n.props.onClose({reason:t,event:e})},n._onClickOutside=function(e){n.props.isShown&&n._onClose(e,"click-outside")},n._onWindowChange=function(e){n._applyScrollEvent(e)},n._onScroll=function(e,t){t&&n._applyScrollEvent(t)},n._applyScrollEvent=function(e){n.props.isShown&&(n.props.onScroll&&"reposition"!==n.props.onScroll?n._onClose(e,"scroll"):n._repositionThrottled())},n._onEsc=function(e){n.props.isShown&&n._onClose(e,"esc")},n._onShow=function(){Z.includes((0,o.Z)(n))||n.props.ninjaMode||Z.push((0,o.Z)(n));var e=n._getPopupSize();n.state.isShown&&n._popupSize.width===e.width&&n._popupSize.height===e.height||n._reposition()},n._onHide=function(){Z=Z.filter((function(e){return e!==(0,o.Z)(n)})),n.setState({style:{top:0,left:0},isShown:!1})},n._onHideEnd=function(){n._onHide(),n.props.onHideEnd&&n.props.onHideEnd()},n._getExcludedNodes=function(){var e=n.props,t=e.getExcludedNodes,r=e.hideOnTargetClick,o=e.getTarget,i=[],a=t&&t();a&&(i=i.concat(a));var s=r?null:o();return s&&(i=i.concat(s)),i},n._renderPopup=function(){var e=n.props,t=n.state,o=t.isTargetVisible&&t.isShown?"visible":"hidden",i=e.noPointerEvents?"none":"auto",s=(0,r.Z)({zIndex:e.zIndex,visibility:o,pointerEvents:i},t.style),c=e.type||"normal",u=k({type:c,position:t.position,dropdown:e.isDropdown,"full-height":e.fullHeight})+(e.className?" "+e.className:""),l=t.maxContentHeight?{maxHeight:t.maxContentHeight}:{};return a.createElement("div",{className:u,style:s,ref:n._popup,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,role:"dialog"},void 0===e.showArrow||e.showArrow?a.createElement("div",{className:k("arrow",{"arrow-type":e.arrowType}),style:t.arrowStyle,ref:function(e){return n._arrow=e||void 0}},"tooltip"!==c||e.arrowType?null:a.createElement(C.Z,{name:"tips-arrow-vertical-8",className:k("arrow-icon"),inline:!0})):null,a.createElement("div",{className:k("content",{"full-height":e.fullHeight}),style:l},e.children),e.repositionOnContentResize?a.createElement(b.Z,{onResize:n._repositionThrottled}):null,a.createElement(_,{handlers:{key:d.n.ESC,callback:n._onEsc,allowInEditable:!0}}))},n._repositionThrottled=(0,S.Z)(n._reposition,50),n.state={style:{top:0,left:0},arrowStyle:{top:"auto",right:"auto",bottom:"auto",left:"auto"},position:"bottom",isShown:!1,isTargetVisible:!t.checkTargetVisibility},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._observer="IntersectionObserver"in window?new IntersectionObserver((function(){e._repositionThrottled()})):void 0,this.props.checkTargetVisibility&&this._repositionThrottled();var t=this.props.getTarget();t&&this._observer&&this._observer.observe(t)},n.componentDidUpdate=function(e){this.props!==e&&this.props.isShown&&this._repositionThrottled()},n.componentWillUnmount=function(){var e=this;Z=Z.filter((function(t){return t!==e})),this._repositionThrottled.cancel(),this._observer&&this._observer.disconnect()},n.render=function(){return a.createElement(c.Z,null,a.createElement(E.Z,{animationRef:this._popup,onShow:this._onShow,onHideEnd:this._onHideEnd},this.props.isShown?a.createElement(u.Z,{callback:this._onClickOutside,getExcludedNodes:this._getExcludedNodes},this._renderPopup()):null),a.createElement(l.Z,{type:"resize",listener:this._onWindowChange,options:!0}),a.createElement(w.Z,{eventHandler:this._onScroll,throttleWait:0}),a.createElement(l.Z,{type:"orientationchange",listener:this._onWindowChange,options:!0}),a.createElement(l.Z,{type:"layout-change",listener:this._onWindowChange}))},t}(a.Component);function M(){return window.document.documentElement.scrollTop||window.document.body.scrollTop}function I(){return window.document.documentElement.scrollLeft||window.document.body.scrollLeft}P.isShown=function(){return Z.length>0};const x=P},6576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(4578),o=n(7363),i=n(1533);const a=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getContainer=function(){var e=n.props;return e.containerRef?e.containerRef.current||void 0:e.selector?window.document.querySelector(e.selector)||void 0:window.document.body},n._updateContainer=function(){var e=n._getContainer();e!==n.state.container&&n.setState({container:e})},n.state={},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateContainer()},n.componentDidUpdate=function(e){var t,n;(null===(t=e.containerRef)||void 0===t?void 0:t.current)===(null===(n=this.props.containerRef)||void 0===n?void 0:n.current)&&e.selector===this.props.selector&&e.children===this.props.children||this._updateContainer()},n.render=function(){var e=this.state;return e.container?i.createPortal(this.props.children,e.container):null},t}(o.Component)},9056:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7462),o=n(4578),i=n(7363),a=n(5876),s=n(3225),c=(0,a.Z)("resize-listener");const u=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._measurer=null,t._onResize=function(e){t.props.onResize(e)},t._onIframeLoad=function(){t._measurer.contentWindow.addEventListener("resize",t._onResize)},t._iframeRef=function(e){t._measurer=e},t}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this._measurer;e.contentWindow?this._onIframeLoad():e.addEventListener("load",this._onIframeLoad)},n.componentWillUnmount=function(){var e=this._measurer;e&&(e.removeEventListener("load",this._onIframeLoad),e.contentWindow&&e.contentWindow.removeEventListener("resize",this._onResize))},n.render=function(){return i.createElement("iframe",(0,r.Z)({className:c()},s.x,{ref:this._iframeRef}))},t}(i.Component)},4719:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>s,ID:()=>a});n(7363);function r(){return r}var o=(0,n(671).Z)("scroll",{addListener:r,getScrollableNode:function(){return null},getCacheScrollPosition:function(){return null},scrollId:"",registerStickyElement:r,unregisterStickyElement:r,updateStickyElement:r,getStickyElementsOffset:function(){return 0}}),i=o.connect,a=o.Provider;o.Context;const s=i},9061:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(4578),o=n(7363),i=n(111),a=n(4719),s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._unsubscribe=void 0,t._listener=void 0,t._attachListener=function(){var e;t._listener=(0,i.Z)(t.props.eventHandler,null!==(e=t.props.throttleWait)&&void 0!==e?e:512),t._unsubscribe=t.props.addListener(t._listener)},t._unattachListener=function(){var e;t._unsubscribe(),null===(e=t._listener)||void 0===e||e.cancel()},t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._attachListener()},n.componentDidUpdate=function(e){e.eventHandler!==this.props.eventHandler&&(this._unattachListener(),this._attachListener())},n.componentWillUnmount=function(){this._unattachListener()},n.render=function(){return null},t}(o.PureComponent);const c=(0,a.ZP)(s)},849:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(7462),o=n(4578),i=n(7363),a=n(7473),s=n.n(a),c=n(5877),u=n.n(c),l=n(5876),d=n(8726),p=n(9056),f=n(5522),m=n(111),v=n(9061),h=n(4719);const g=function(e){var t=this;this._listeners=[],this._ref=void 0,this.addListener=function(e){return t._listeners.push(e),e(t._ref.current,null),function(){return t._removeListener(e)}},this._removeListener=function(e){t._listeners=t._listeners.filter((function(t){return t!==e}))},this.fire=function(e){t._listeners.forEach((function(n){return n(t._ref.current,e)}))},this._ref=e};var y=(0,l.Z)("scroll"),_={},b={passive:!0};const w=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=u().v4(),n._onResizeThrottled=void 0,n._onMouseMoveThrottled=void 0,n._container=i.createRef(),n._content=null,n._wrap=i.createRef(),n._scrollbar=null,n._scrollbarThumb=null,n._height=void 0,n._ratio=1,n._startPageY=0,n._startScrollTop=0,n._emitter=void 0,n._onSelectStart=null,n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._emitter.fire(e)},n._onResize=function(){n._wrap.current&&n._content&&(n._height=n._wrap.current.clientHeight,n._ratio=n._height/n._content.clientHeight,"dynamic"===n.props.width&&n._fixContentWidth(),n._scrollbarThumb&&(n._updateScrollbarThumbPosition(n._getContainer().current.scrollTop),n._scrollbarThumb.style.height=100*n._ratio+"%"),n._showHideScrollbar(n._ratio<1))},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;n._scrollbarThumb&&n._updateScrollbarThumbPosition(e.scrollTop),t.cacheKey&&(_[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._onWheel=function(e){n._getContainer().current.scrollTop=n._getContainer().current.scrollTop+e.deltaY},n._onScrollbarClick=function(e){var t=n._getContainer().current,r=n._scrollbarThumb;e.pageY<r.getBoundingClientRect().top?t.scrollTop-=n._height:t.scrollTop+=n._height},n._onMouseDown=function(e){var t=n._wrap.current,r=n._getContainer().current;t&&r&&(window.addEventListener("mouseup",n._onMouseUp,b),window.addEventListener("mousemove",n._onMouseMoveThrottled,b),t.classList.add("_pressed"),n._startPageY=e.pageY,n._startScrollTop=r.scrollTop,n._onSelectStart=r.onselectstart,r.onselectstart=function(e){e.preventDefault()})},n._onMouseUp=function(){var e=n._wrap.current,t=n._getContainer().current;e&&t&&(n._removeMouseListeners(),e.classList.remove("_pressed"),t.onselectstart=n._onSelectStart)},n._onMouseMove=function(e){var t=n._getContainer().current;n._scrollbar&&(t.scrollTop=n._startScrollTop+(e.pageY-n._startPageY)/n._ratio)},n._removeMouseListeners=function(){window.removeEventListener("mouseup",n._onMouseUp,b),window.removeEventListener("mousemove",n._onMouseMoveThrottled,b)},n._updateScrollbarThumbPosition=function(e){n._scrollbarThumb.style.setProperty((0,d.r1)().styles.transform,"translate3d(0, "+Math.ceil(e*n._ratio)+"px, 0)")},n._fixContentWidth=function(){var e=n._getContainer().current,t=n._content,r=e.offsetWidth-e.clientWidth;t.style.marginRight=-r+"px"},n._showHideScrollbar=function(e){var t=n._scrollbar;t&&(t.style.display=e?"flex":"none")},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&_[e.cacheKey]||0;t.scrollTop!==r&&(0===r?t.scrollTop=r:s()((function(){return t.scrollTop=r})))},n._onResizeThrottled=(0,m.Z)(n._onResize,64),n._onMouseMoveThrottled=(0,m.Z)(n._onMouseMove,64),n._emitter=new g(n._getContainer()),n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._onResize(),setTimeout(this._onResize,0),this._restoreScrollPosition(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._getContainer().current.addEventListener("scroll",this._onScroll,b),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey!==t.cacheKey&&this._restoreScrollPosition()},n.componentWillUnmount=function(){this._removeMouseListeners(),this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(null),this._getContainer().current.removeEventListener("scroll",this._onScroll,b),this._emitter.fire(null),this._onResizeThrottled.cancel(),this._onMouseMoveThrottled.cancel()},n.render=function(){var e=this,t=this.props;return i.createElement("div",{className:y({width:t.width||"narrow",disabled:t.disabled,"full-height":t.fullHeight}),ref:this._wrap},i.createElement("div",{className:y("container"),ref:this._getContainer()},i.createElement("div",{className:y("content"),ref:function(t){return e._content=t}},i.createElement(h.ID,{value:{addListener:this._emitter.addListener,getScrollableNode:function(){return e._getContainer().current},getCacheScrollPosition:function(){var t;return e.props.cacheKey&&null!==(t=_[e.props.cacheKey])&&void 0!==t?t:null},scrollId:this._id,registerStickyElement:this.props.registerStickyElement,unregisterStickyElement:this.props.unregisterStickyElement,updateStickyElement:this.props.updateStickyElement,getStickyElementsOffset:this.props.getStickyElementsOffset}},t.children,i.createElement(v.Z,{eventHandler:this._onScrollSelf,throttleWait:64})),i.createElement(p.Z,{onResize:this._onResizeThrottled})),i.createElement(p.Z,{onResize:this._onResizeThrottled}),i.createElement("div",{className:y("scrollbar",{noprint:!0}),ref:function(t){return e._scrollbar=t},onWheel:this._onWheel},i.createElement("div",{"aria-hidden":!0,className:y("scrollbar-track"),onClick:this._onScrollbarClick}),i.createElement("div",{"aria-hidden":!0,className:y("scrollbar-thumb"),ref:function(t){return e._scrollbarThumb=t},onMouseDown:this._onMouseDown}))),i.createElement(f.Z,{type:"resize",listener:this._onResizeThrottled,options:b}))},t}(i.Component);var E=(0,l.Z)("scroll"),S={},C={passive:!0};const k=function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=u().v4(),n._container=i.createRef(),n._emitter=void 0,n._provider=void 0,n._getContainer=function(){return n.props.containerRef||n._container},n._onScroll=function(e){n._getContainer().current&&n._emitter.fire(e)},n._restoreScrollPosition=function(){var e=n.props,t=n._getContainer().current,r=e.cacheKey&&S[e.cacheKey]||0;t.scrollTop!==r&&window.requestAnimationFrame((function(){return t.scrollTop=r}))},n._onScrollSelf=function(){var e=n._getContainer().current;if(e){var t=n.props;t.cacheKey&&(S[t.cacheKey]=e.scrollTop),t.onScroll&&t.onScroll(e.scrollTop),t.onScrollToEnd&&e.clientHeight+e.scrollTop>=e.scrollHeight&&t.onScrollToEnd()}},n._emitter=new g(n._getContainer()),n._provider={addListener:n._emitter.addListener,getScrollableNode:function(){return n._getContainer().current},getCacheScrollPosition:function(){var e;return n.props.cacheKey&&null!==(e=S[n.props.cacheKey])&&void 0!==e?e:null},registerStickyElement:n.props.registerStickyElement,unregisterStickyElement:n.props.unregisterStickyElement,updateStickyElement:n.props.updateStickyElement,getStickyElementsOffset:n.props.getStickyElementsOffset,scrollId:n._id,reachedBottom:function(){var e=n._getContainer().current;return!!e&&e.clientHeight+e.scrollTop>=e.scrollHeight-10}},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.getScrollingNodeRef&&this.props.getScrollingNodeRef(this._getContainer().current),this._restoreScrollPosition(),this._getContainer().current.addEventListener("scroll",this._onScroll,C),this._emitter.fire(null)},n.componentDidUpdate=function(e){var t=this.props;e.cacheKey===t.cacheKey&&(e.cacheKey||t.cacheKey)||this._restoreScrollPosition()},n.componentWillUnmount=function(){this._getContainer().current.removeEventListener("scroll",this._onScroll,C),this._emitter.fire(null)},n.render=function(){var e=this.props;return i.createElement("div",{className:E({width:e.width||"narrow",disabled:e.disabled,native:e.native,"full-height":e.fullHeight})},i.createElement("div",{className:E("container"),ref:this._getContainer()},i.createElement("div",{className:E("content")},i.createElement(h.ID,{value:this._provider},e.children,i.createElement(v.Z,{eventHandler:this._onScrollSelf,throttleWait:64})))))},t}(i.Component);var R=n(2514),Z=function(e){function t(t){var n;return(n=e.call(this,t)||this)._stickyListeners=void 0,n._stickyHeights=void 0,n._stickyRefs=void 0,n._registerStickyElement=function(e,t,r,o){n._stickyHeights[r][e]=0,n._stickyRefs[r][e]=t,n._stickyListeners[r][e]=o,n._calcStickyPositions(Math.max(e-1,0),r)},n._unregisterStickyElement=function(e,t){delete n._stickyHeights[t][e],delete n._stickyRefs[t][e]},n._updateStickyElement=function(e,t,r){n._stickyHeights[r][e]=t,n._calcStickyPositions(e,r)},n._calcStickyPositions=function(e,t){for(var r=0,o=0;o<=e;o++)"number"==typeof n._stickyHeights[t][o]&&(r+=n._stickyHeights[t][o]);for(var i=e+1;i<n._stickyHeights[t].length;i++){var a,s;null===(a=(s=n._stickyListeners[t])[i])||void 0===a||a.call(s,r),"number"==typeof n._stickyHeights[t][i]&&(r+=n._stickyHeights[t][i])}},n._isNodeWithinStickyElement=function(e){return n._stickyRefs.top.concat(n._stickyRefs.bottom).some((function(t){var n;return null===(n=t.current)||void 0===n?void 0:n.contains(e)}))},n._getStickyElementsOffset=function(e){return n._stickyHeights[e].filter(Boolean).reduce((function(e,t){return e+t}),0)},n._stickyListeners={top:[],bottom:[]},n._stickyHeights={top:[],bottom:[]},n._stickyRefs={top:[],bottom:[]},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e,t;null===(e=(t=this.props).setIsNodeWithinStickyElementRef)||void 0===e||e.call(t,this._isNodeWithinStickyElement)},n.componentWillUnmount=function(){var e,t;null===(e=(t=this.props).setIsNodeWithinStickyElementRef)||void 0===e||e.call(t,void 0)},n.render=function(){var e=this.props.config.uatraits.isMobile||this.props.native?k:w;return i.createElement(e,(0,r.Z)({},this.props,{getStickyElementsOffset:this._getStickyElementsOffset,registerStickyElement:this._registerStickyElement,unregisterStickyElement:this._unregisterStickyElement,updateStickyElement:this._updateStickyElement}))},t}(i.Component);const P=(0,R.ZP)(Z)},5946:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7363),o=n(5876);const i=function(e){var t=e.view,n=e.withoutMargin,i=e.inverse,a=(0,o.Z)("spinner-view_"+t);return r.createElement("div",{className:a({"without-margin":n,inverse:i})},r.createElement("div",{className:a("circle")}))}},5522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(4578),o=n(7363);const i=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;window.addEventListener(e.type,e.listener,e.options)},n.componentWillUnmount=function(){var e=this.props;window.removeEventListener(e.type,e.listener,e.options)},n.render=function(){return null},t}(o.Component)},3590:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(7363),o=n(5876),i=n(2514),a=n(6176),s=n(9971),c=n(943);var u=n(3988),l=(0,o.Z)("zoom-control");const d=function(e){var t,n=(0,i.ZR)(),o=Boolean(n.mapWidget),d=null!==(t=e.size)&&void 0!==t?t:n.uatraits.isMobile?"xmedium":"medium",p=n.uatraits.isMobile&&!o?[u.zoomIn48Icon,u.zoomOut48Icon]:['<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 5.992c0-.537.448-.992 1-.992.556 0 1 .444 1 .992V11h5.008c.537 0 .992.448.992 1 0 .556-.444 1-.992 1H13v5.008c0 .537-.448.992-1 .992-.556 0-1-.444-1-.992V13H5.992C5.455 13 5 12.552 5 12c0-.556.444-1 .992-1H11V5.992z" fill="currentColor"/></svg>','<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 12a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1z" fill="currentColor"/></svg>'],f=p[0],m=p[1];return r.createElement("div",{className:l()},r.createElement("div",{className:l("group")},r.createElement("div",{className:l("zoom-in")},r.createElement(s.Z,{text:"Приблизить",position:"left",isDisabled:e.disabledZoomIn,isAir:!0},r.createElement(c.ZP,{name:"zoom_in",logClick:!0},r.createElement(a.Z,{view:"air",size:d,icon:r.createElement("div",{className:l("icon"),dangerouslySetInnerHTML:{__html:f}}),onClick:e.onZoomIn,ariaLabel:"Приблизить",disabled:e.disabledZoomIn,pinBottom:!n.uatraits.isMobile||o})))),r.createElement("div",{className:l("zoom-out")},r.createElement(s.Z,{text:"Отдалить",position:"left",isDisabled:e.disabledZoomOut,isAir:!0},r.createElement(c.ZP,{name:"zoom_out",logClick:!0},r.createElement(a.Z,{view:"air",size:d,icon:r.createElement("div",{className:l("icon"),dangerouslySetInnerHTML:{__html:m}}),ariaLabel:"Отдалить",onClick:e.onZoomOut,disabled:e.disabledZoomOut,pinTop:!n.uatraits.isMobile||o}))))))}},6516:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(4578),o=n(7363),i=n(1533),a=n(8726);const s=function(e){function t(t){var n;return(n=e.call(this,t)||this)._addListeners=function(e){var t=(0,a.r1)();t.events.animationEnd&&e.addEventListener(t.events.animationEnd,n._onHideAnimationEnd),t.events.transitionEnd&&e.addEventListener(t.events.transitionEnd,n._onHideAnimationEnd)},n._removeListeners=function(e){var t=(0,a.r1)();t.events.animationEnd&&e.removeEventListener(t.events.animationEnd,n._onHideAnimationEnd),t.events.transitionEnd&&e.removeEventListener(t.events.transitionEnd,n._onHideAnimationEnd)},n._onHideAnimationEnd=function(){var e;null!==(e=n.props.animationRef)&&void 0!==e&&e.current&&n._removeListeners(n.props.animationRef.current),i.flushSync((function(){n.setState({content:null},n.props.onHideEnd)}))},n.state={content:t.children},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.children&&this.setState({content:this.props.children},this.props.onShow)},n.componentDidUpdate=function(e){var t=this.props.children;if(t)t!==e.children&&this.setState({content:t},this.state.content?void 0:this.props.onShow);else{var n,r=null===(n=this.props.animationRef)||void 0===n?void 0:n.current;r&&(this._addListeners(r),r.classList.add("_animation-hide")),this.props.onHideStart&&this.props.onHideStart()}},n.componentWillUnmount=function(){var e;null!==(e=this.props.animationRef)&&void 0!==e&&e.current&&this._removeListeners(this.props.animationRef.current)},n.render=function(){return this.state.content},t}(o.Component)},4807:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7462),o=n(844),i=n(3601),a=n(129);const s=function(e){var t=a.stringify(e,{sort:function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0}});return t?String(function(e){for(var t=e.length,n=5381,r=0;r<t;r++)n=33*n^e.charCodeAt(r);return n>>>0}(t)):""};var c;const u=function e(t,n,a,u){var l={csrfToken:c||a.csrfToken,sessionId:a.counters.analytics.sessionId,host_config:a.hostConfig,ajax:"1"};a.query["no-mail"]&&(l["no-mail"]=!0),a.query["no-cache"]&&(l["no-cache"]=!0),a.query["no-redirect"]&&(l["no-redirect"]="1"),a.query.debug&&(l.debug=a.query.debug),a.mocks&&(l.mocks=0!==Object.keys(a.mocks).length?a.mocks:"1");var d={url:(n.baseUrl||a.baseUrl)+"/api/"+t,method:n.body?"POST":"GET",headers:(0,r.Z)({"X-Retpath-Y":window.location.href},n.headers)};n.body&&(d.body=JSON.stringify(n.body),d.headers=(0,r.Z)({},d.headers,{"Content-Type":"application/json; charset=utf-8"}));var p=(0,r.Z)({},l,n.query),f=s(p);return d.query=(0,r.Z)({},p,{s:f}),"prestable"===a.environment&&(d.headers=(0,r.Z)({},d.headers,{"X-Ya-Maps-Prestable":"1"})),(0,o.Z)(d).then((function(r){if(function(e){return"type"in e&&"captcha"===e.type}(r))throw window.location.href=r.captcha["captcha-page"],new Error("Response is captcha");if("csrfToken"in r){if(!1!==u)return c=r.csrfToken,e(t,n,a,!1);throw new Error("Invalid csrf token")}if(r.debug&&(0,i.vq)(r.debug),"error"in r)throw"message"in r.error?new Error(r.error.message):r.error;return r.data}))}},5495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={create:function(e,t){var n=t.success,r=t.fail,o=t.always,i=!1;return e.then((function(e){i||(n&&n(e),o&&o(null,e))}),(function(e){i||(r&&r(e),o&&o(e))})),{cancel:function(){return i=!0}}},cancel:function(e){e&&e.cancel()}}},8726:(e,t,n)=>{"use strict";n.d(t,{r1:()=>o});var r=n(2967),o=(n(7064),function(){return{events:{transitionEnd:i("transition"),animationEnd:i("animation")},styles:{transform:s("transform"),transition:s("transition"),userSelect:s("user-select")},cssStyles:{transform:a("transform"),transformOrigin:a("transform-origin")},has:{touch:"ontouchstart"in window||Boolean(window.navigator.maxTouchPoints),retinaDisplay:window.devicePixelRatio>1,printColorAdjust:null!==c("printColorAdjust"),snapAlign:null!==c("scrollSnapAlign"),objectFit:null!==c("objectFit")}}});function i(e){var t=c(e);return t?t+(0,r.Z)(e)+"End":null!==t?e+"end":null}function a(e){var t=c(e);return t?"-"+t+"-"+e:null!==t?e:null}function s(e){var t=c(e);return t?t+u(e):null!==t?e:null}function c(e){var t=window.document.createElement("div");return void 0!==t.style[e]?"":void 0!==t.style["webkit"+u(e)]?"webkit":void 0!==t.style["Moz"+u(e)]?"Moz":void 0!==t.style["ms"+u(e)]?"ms":null}function u(e){return e.split("-").map((function(e){return(0,r.Z)(e)})).join("")}},2402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7462),o=n(3366),i=n(7363),a=n(8253),s=n(935),c=["children","tag","forwardedRef","ariaHidden","ariaLabel","onClick","role"];const u=(0,s.Z)((function(e){var t=e.children,n=e.tag,s=void 0===n?"div":n,u=e.forwardedRef,l=e.ariaHidden,d=e.ariaLabel,p=e.onClick,f=e.role,m=(0,o.Z)(e,c),v=(0,a.h)({callback:e.onClick,clickableRef:u}),h=l||!p,g=h?-1:0,y="string"==typeof t?t:d,_=i.useCallback((function(t){var n;v.onMouseLeave(t),null===(n=e.onMouseLeave)||void 0===n||n.call(e,t)}),[v,e]),b=i.useCallback((function(t){var n;v.onMouseDown(t),null===(n=e.onMouseDown)||void 0===n||n.call(e,t)}),[v,e]);return i.createElement(s,(0,r.Z)({},m,v,{onMouseDown:b,onMouseLeave:_,onClick:p,"aria-hidden":h,"aria-label":y,role:f||"button",tabIndex:g}),t)}))},8253:(e,t,n)=>{"use strict";n.d(t,{h:()=>c});var r=n(7462),o=n(7363),i=n(2694),a=n(2030);n(935);function s(e){var t=e.callback;return o.useCallback((function(e,n){if(e.keyCode===i.n.ENTER||e.keyCode===i.n.SPACE){var r=n||t;null==r||r(e)}}),[t])}var c=function(e){var t=e.callback,n=e.clickableRef,i=o.useRef(null),c=n||i,u=(0,a.p)(c),l=s({callback:t});return(0,r.Z)({},u,{onKeyDown:l,ref:c})}},7064:(e,t,n)=>{"use strict";n(6504),n(5167)},935:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7462),o=n(7363);const i=function(e){var t=function(t,n){return o.createElement(e,(0,r.Z)({},t,{forwardedRef:n||void 0}),t.children)};return o.forwardRef(t)}},2030:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var r=n(7462),o=n(7363);function i(e){var t=o.useState(!1),n=t[0],i=t[1],a={onMouseLeave:o.useCallback((function(){return i(!1)}),[i]),onMouseDown:o.useCallback((function(){return i(!0)}),[i]),onFocus:o.useCallback((function(){var t;n&&e.current===window.document.activeElement&&(null===(t=e.current)||void 0===t||t.blur())}),[e,n])};return(0,r.Z)({},a)}},1721:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(7462),o=n(4578),i=n(7363),a=n(5876),s=n(844),c=n(5495),u=n(2402),l={},d={},p=(0,a.Z)("inline-image");const f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._loadAction=void 0,n._load=function(){c.Z.cancel(n._loadAction);var e=n.props.url;d[e]||(d[e]=(0,s.Z)({url:e,parser:"string"}),d[e].then((function(t){return l[e]=t}),(function(){return delete d[e]}))),n._loadAction=c.Z.create(d[e],{success:function(){return n.setState({loaded:!0})}})},n.state={loaded:Boolean(l[n.props.url])},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.state.loaded||this._load()},n.componentDidUpdate=function(e){if(this.props.url!==e.url){c.Z.cancel(this._loadAction);var t=Boolean(l[this.props.url]);this.setState({loaded:t}),t||this._load()}},n.componentWillUnmount=function(){c.Z.cancel(this._loadAction)},n.render=function(){var e=this.props;return e.children?e.children(l[e.url]||""):i.createElement(u.Z,{tag:"span",key:this.state.loaded?0:1,style:(0,r.Z)({},e.style,{fontSize:0,lineHeight:0}),ariaLabel:e.ariaLabel,className:p({loaded:this.state.loaded})+(e.className?" "+e.className:""),onClick:e.onClick,dangerouslySetInnerHTML:{__html:l[e.url]||""}})},t}(i.PureComponent)},9875:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r={},o=function(e){return function(t,n){t({type:"EXTEND",payload:{loadingErrors:[].concat(n().loadingErrors,[e])}})}};const i=function(e,t){var n=e.toString();return r[n]||Object.keys(t).reduce((function(t,i){return t[i]=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return function(t){var s=function(e){return t(e[i].apply(e,a))};return r[n]?s(r[n]):e().then((function(e){var t=e.default;return s(r[n]=t)}),(function(e){return t(o(e.message))}))}},t}),{})}},6012:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7462),o=n(3366),i=n(4578),a=n(7363),s=n(8216),c=["shouldRender"];const u=function(e,t,n){void 0===n&&(n={});var u=!1,l=function(t){function s(){return t.apply(this,arguments)||this}(0,i.Z)(s,t);var l=s.prototype;return l.shouldComponentUpdate=function(e){return(n.withSideEffect||!u&&!this.props.shouldRender)&&e.shouldRender},l.componentDidUpdate=function(e){!e.shouldRender&&this.props.shouldRender&&(u=!0)},l.render=function(){var t=this.props,i=t.shouldRender,s=(0,o.Z)(t,c);return i?a.createElement(e,(0,r.Z)({},s)):n.placeholder||null},s}(a.Component);return s.$j((function(e){return{shouldRender:t(e)}}))(l)}},9906:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r={};const o=function(e){if(e in r)return r[e];var t=window.document.createElement("script");return t.type="text/javascript",t.charset="utf-8",e.includes("//")&&!e.startsWith(window.location.origin)&&(t.crossOrigin="anonymous"),t.src=("file:"===window.location.protocol&&e.startsWith("//")?"http:":"")+e,t.async=!0,r[e]=new Promise((function(e,n){t.onload=function(){t.onload=function(){return null},t.onerror=t.onload,e()},t.onerror=function(){t.onload=function(){return null},t.onerror=t.onload,n(new Error("Failed to load "+t.src))};var r=window.document.getElementsByTagName("head")[0];r.insertBefore(t,r.lastChild)})),r[e]}},1581:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>i});n(7363);var r=(0,n(671).Z)("theme",{theme:"light",setTheme:function(){}}),o=r.connect;r.Provider,r.Context;const i=o},8729:(e,t,n)=>{"use strict";n.d(t,{k7:()=>r,sL:()=>o,M8:()=>s,Uc:()=>c,h9:()=>f,OO:()=>m,b:()=>v,aC:()=>i,EB:()=>a,mH:()=>u,B1:()=>l,iR:()=>d,WN:()=>p,mu:()=>h,US:()=>g,az:()=>y,Uv:()=>_,cg:()=>b,Cb:()=>w});var r=["object/add"],o=["entrance/add","address/add","road/add","other/add","transit/stop/add","parking/add","barrier/add","fence/add","crosswalk/add","gate/add","provider/add"],i=["object/edit"],a=["object/other","address/edit","entrance/edit","object/location/edit","object/name/edit","object/not-found"],s=["assignment/organization/status"],c=["assignment/barrier/edit","assignment/gate/edit","assignment/entrance/edit","assignment/settlement/scheme/add","assignment/address/add"],u=["transit/stop/edit"],l=["transit/stop/not-found","transit/stop/name/edit","transit/stop/location/edit","transit/stop/route/incorrect","transit/stop/other"],d=["subway/edit"],p=["subway/not-found","subway/name/edit","subway/location/edit","subway/other"],f=["organization/add"],m=["organization/edit","organization/closed"],v=["organization/edit-info","organization/other","organization/closed/permanently","organization/closed/temporary","organization/closed/unknown","organization/opened","organization/moved","organization/location/edit","organization/edit-accessibility"],h=["route/edit","route/incorrect"],g=["route/edit/better","route/incorrect/road-closed","route/incorrect/poor-condition","route/incorrect/prohibiting-sign","route/incorrect/obstruction","route/incorrect/other","route/other"],y=["object/select"],_=["map/edit"],b=["spot/other"],w=([].concat(["ru.yandex.yandexnavi","ru.yandex.yandexnavi.inhouse","ru.yandex.yandexnavi.sandbox","ru.yandex.mobile.navigator","ru.yandex.mobile.navigator.inhouse","ru.yandex.mobile.navigator.sandbox"],["com.yango.maps.android.pr","com.yango.maps.android.debug","com.yango.maps.ios.inhouse","com.yango.maps.ios.sandbox","com.yango.maps.android","com.yango.maps.ios"],["web","mobile_maps_android","mobile_maps_ios","serp","tycoon","webview_form","ugc","nyak","ru.yandex.searchplugin","ru.yandex.yandexmaps","ru.yandex.traffic","ru.yandex.traffic.sandbox","ru.yandex.traffic.inhouse","ru.yandex.yandexmaps.debug","ru.yandex.yandexmaps.pr","com.yandex.maps.TestApp","com.yandex.maps.testapp","com.yandex.maps.mrctestapp","com.yandex.maps.mrctestapp.testing","com.yandex.browser","ru.yandex.mobile","ru.yandex.mobile.search","desktop-maps","touch-maps","touch-nmaps"]),["feedback.common.error_in_geo_object_menu","feedback.common.add_object_to_map","feedback.spot_other.finish","feedback.finish_form.edit_status_carousel","toponym.add_finish","toponym.edit_finish","organization.add_finish","organization.edit_finish","ugc_profile.feedbacks_footer","ugc_profile.feedbacks_footer.edit_map","ugc_profile.feedbacks_footer.add_object","ugc_profile.feedbacks_placeholder","ugc_profile.feedbacks_drafts.feedbacks_draft","ugc_profile.assignments_placeholder.add_object","ugc_profile.assignments_push_placeholder.edit_object","ugc_profile.organization_edit_status_assignment.edit","ugc_profile.organization_edit_status_assignment.submit","ugc_profile.barrier_assignment.edit","ugc_profile.gate_assignment.edit","ugc_profile.add_address_assignment.edit","ugc_profile.settlement_scheme_assignment.edit","ugc_profile.entrances_assignment.edit","ugc_profile.review_impression.closed","map.context","map.controls","organization.footer","organization.features","organization.search_result","toponym.search_results","toponym.default","toponym.building","toponym.building_without_address","toponym.add_object","route.routes_list","route.detailed_info","user_profile.edit_map","masstransit.default","masstransit.subway"])},8153:(e,t,n)=>{"use strict";n.d(t,{qv:()=>S,W3:()=>i,bl:()=>c,RP:()=>a,Qr:()=>s,NM:()=>u,OI:()=>l,ai:()=>d,mR:()=>p,KT:()=>f,LB:()=>m,Rf:()=>g,UZ:()=>v,pj:()=>h,xT:()=>_,cV:()=>C,T_:()=>b,XS:()=>w,fU:()=>E});var r=n(8729);function o(e){return r.sL.includes(e)}function i(e){return function(e){return r.k7.includes(e)}(e)||o(e)}function a(e){return r.aC.includes(e)}function s(e){return r.EB.includes(e)}function c(e){return a(e)||s(e)}function u(e){return r.mH.includes(e)}function l(e){return r.B1.includes(e)}function d(e){return r.iR.includes(e)}function p(e){return r.WN.includes(e)}function f(e){return function(e){return d(e)||p(e)}(e)||function(e){return u(e)||l(e)}(e)}function m(e){return r.h9.includes(e)}function v(e){return r.OO.includes(e)}function h(e){return r.b.includes(e)}function g(e){return v(e)||h(e)}function y(e){return r.US.includes(e)}function _(e){return function(e){return r.mu.includes(e)}(e)||y(e)}function b(e){return r.az.includes(e)}function w(e){return r.Uv.includes(e)}function E(e){return r.cg.includes(e)}function S(e){return function(e){return r.M8.includes(e)}(e)||function(e){return r.Uc.includes(e)}(e)||o(e)||s(e)||l(e)||p(e)||function(e){return h(e)||m(e)}(e)||y(e)||E(e)}function C(e){return o(e)||y(e)||E(e)||["transit/stop/location/edit","object/location/edit","entrance/edit","subway/location/edit"].includes(e)}},9907:(e,t,n)=>{"use strict";n.d(t,{R7:()=>Ue,VB:()=>Ae,Gr:()=>ze,y7:()=>Ne,XT:()=>Oe});var r=(0,n(7462).Z)({},{airport:"airports",area:"district",country_fallback:"fallback-toponym",house:"building",metro_station:"fallback-toponym",railway_station:"railway-station",other:"fallback-toponym",region:"fallback-toponym",station:"bus-station",vegetation:"park",unknown:"fallback-toponym"},{barbershop:"hairdressers",gasoline:"gas-station",hotel:"hotels","phone-shop":"mobile-phones",restaurant:"restaurants",shop:"supermarket","shopping-mall":"malls",pharmacy:"medicine"}),o={medicine:"medicine-tr",drugstores:"drugstores-tr","emergency-point":"emergency-point-tr","currency-exchange":"currency-exchange-tr"},i={banks:"banks-ru","currency-exchange":"currency-exchange-ru"},a=n(3285),s=n.n(a),c=n(1139),u=n.n(c),l=n(4796),d=n.n(l),p=n(9421),f=n.n(p),m=n(1316),v=n.n(m),h=n(3727),g=n.n(h),y=n(3186),_=n.n(y),b=n(9394),w=n.n(b),E=n(1216),S=n.n(E),C=n(7105),k=n.n(C),R=n(2134),Z=n.n(R),P=n(2811),M=n.n(P),I=n(9129),x=n.n(I),T=n(1925),L=n.n(T),D=n(6959),z=n.n(D),A=n(3463),N=n.n(A),U=n(8671),O=n.n(U),F=n(5090),B=n.n(F),H=n(7257),q=n.n(H),G=n(6616),W=n.n(G),j=n(5277),V=n.n(j),Y=n(1750),K=n.n(Y),X=n(7228),$=n.n(X),Q=n(7475),J=n.n(Q),ee=n(1382),te=n.n(ee),ne=n(6662),re=n.n(ne),oe=n(8491),ie=n.n(oe),ae=n(4966),se=n.n(ae),ce=n(6974),ue=n.n(ce),le=n(3480),de=n.n(le),pe=n(4777),fe=n.n(pe),me=n(826),ve=n.n(me),he=n(746),ge=n.n(he),ye=n(7836),_e=n.n(ye),be=n(2001),we=n.n(be),Ee=n(3247),Se=n.n(Ee),Ce=n(466),ke=n.n(Ce),Re=n(7835),Ze=n.n(Re),Pe=n(6055),Me=n.n(Pe),Ie=n(3418),xe=n.n(Ie),Te={"apteki-favicon":["favicon.svg"],favicon:["favicon.svg"],"metro-favicon":["favicon.svg"],rubrics:["administration-14.svg","administration-24.svg","aeroexpress-14.svg","aeroexpress-24.svg","airfield-14.svg","airfield-24.svg","airports-14.svg","airports-24.svg","animation-14.svg","animation-24.svg","aquarium-14.svg","aquarium-24.svg","architect-bureau-14.svg","architect-bureau-24.svg","art-14.svg","art-24.svg","atm-14.svg","atm-24.svg","attraction-14.svg","attraction-24.svg","auto-14.svg","auto-24.svg","auto-parts-14.svg","auto-parts-24.svg","auto-repair-14.svg","auto-repair-24.svg","baby-shop-14.svg","baby-shop-24.svg","bakery-24.svg","banks-14.svg","banks-24.svg","banks-ru-14.svg","banks-ru-24.svg","bars-14.svg","bars-24.svg","baths-14.svg","baths-24.svg","beach-14.svg","beach-24.svg","beauty-14.svg","beauty-24.svg","beauty-shops-14.svg","beauty-shops-24.svg","beer-market-14.svg","beer-market-24.svg","bike-14.svg","bike-24.svg","bike-rent-14.svg","bike-rent-24.svg","boat-station-14.svg","boat-station-24.svg","bookstore-14.svg","bookstore-24.svg","bowling-14.svg","bowling-24.svg","buddhism-14.svg","buddhism-24.svg","building-14.svg","building-24.svg","bus-medium-14.svg","bus-medium-24.svg","bus-station-14.svg","bus-station-24.svg","bus-stop-14.svg","bus-stop-24.svg","butcher-shop-14.svg","butcher-shop-24.svg","cableway-14.svg","cableway-24.svg","cafe-14.svg","cafe-24.svg","canteen-14.svg","canteen-24.svg","car-14.svg","car-24.svg","car-park-14.svg","car-park-24.svg","car-wash-14.svg","car-wash-24.svg","catholic-church-14.svg","catholic-church-24.svg","cemetery-14.svg","cemetery-24.svg","checkpoint-14.svg","checkpoint-24.svg","childrens-camp-14.svg","childrens-camp-24.svg","childrens-playground-14.svg","childrens-playground-24.svg","christmas-bazaars-24.svg","cinemas-14.svg","cinemas-24.svg","circus-14.svg","circus-24.svg","clothes-shop-14.svg","clothes-shop-24.svg","college-14.svg","college-24.svg","concert-hall-14.svg","concert-hall-24.svg","confectionary-14.svg","confectionary-24.svg","construction-hypermarket-14.svg","construction-hypermarket-24.svg","construction-tool-14.svg","construction-tool-24.svg","country-14.svg","country-24.svg","currency-exchange-14.svg","currency-exchange-24.svg","currency-exchange-ru-14.svg","currency-exchange-ru-24.svg","currency-exchange-tr-14.svg","currency-exchange-tr-24.svg","dairy-14.svg","dairy-24.svg","dancehall-14.svg","dancehall-24.svg","dental-14.svg","dental-24.svg","district-14.svg","district-24.svg","dolmus-14.svg","dolmus-24.svg","driving-school-14.svg","driving-school-24.svg","drugstores-14.svg","drugstores-24.svg","drugstores-tr-14.svg","drugstores-tr-24.svg","dry-cleaning-14.svg","dry-cleaning-24.svg","electronics-14.svg","electronics-24.svg","emergency-14.svg","emergency-24.svg","emergency-point-tr-14.svg","emergency-point-tr-24.svg","entertainments-14.svg","entertainments-24.svg","entrance-14.svg","entrance-24.svg","equestrian-14.svg","equestrian-24.svg","exhibition-center-14.svg","exhibition-center-24.svg","factory-14.svg","factory-24.svg","fallback-14.svg","fallback-24.svg","fallback-beauty-14.svg","fallback-beauty-24.svg","fallback-civil-services-14.svg","fallback-civil-services-24.svg","fallback-common-14.svg","fallback-common-24.svg","fallback-drugstores-14.svg","fallback-drugstores-24.svg","fallback-entertainment-14.svg","fallback-entertainment-24.svg","fallback-food-drink-14.svg","fallback-food-drink-24.svg","fallback-fun-14.svg","fallback-fun-24.svg","fallback-health-14.svg","fallback-health-24.svg","fallback-hydro-14.svg","fallback-hydro-24.svg","fallback-medicine-14.svg","fallback-medicine-24.svg","fallback-outdoor-14.svg","fallback-outdoor-24.svg","fallback-services-14.svg","fallback-services-24.svg","fallback-shopping-14.svg","fallback-shopping-24.svg","fallback-toponym-14.svg","fallback-toponym-24.svg","fallback-transport-14.svg","fallback-transport-24.svg","fast-food-14.svg","fast-food-24.svg","favorite-24.svg","festival-14.svg","festival-24.svg","film-studio-14.svg","film-studio-24.svg","fire-station-14.svg","fire-station-24.svg","fireworks-24.svg","fish-store-14.svg","fish-store-24.svg","fitness-14.svg","fitness-24.svg","flower-shop-14.svg","flower-shop-24.svg","food-market-14.svg","food-market-24.svg","forest-14.svg","forest-24.svg","fountain-14.svg","fountain-24.svg","funicular-14.svg","funicular-24.svg","furniture-store-14.svg","furniture-store-24.svg","gallery-14.svg","gallery-24.svg","garage-cooperative-14.svg","garage-cooperative-24.svg","garden-14.svg","garden-24.svg","gasstation-14.svg","gasstation-24.svg","gastro-market-14.svg","gastro-market-24.svg","geyser-14.svg","geyser-24.svg","giftshop-14.svg","giftshop-24.svg","golf-14.svg","golf-24.svg","government-14.svg","government-24.svg","grass-14.svg","grass-24.svg","greengrocery-14.svg","greengrocery-24.svg","hairdressers-14.svg","hairdressers-24.svg","haulier-14.svg","haulier-24.svg","heart-14.svg","heart-24.svg","highspeed-tram-stop-14.svg","highspeed-tram-stop-24.svg","home-14.svg","home-24.svg","home-appliances-14.svg","home-appliances-24.svg","hospital-14.svg","hospital-24.svg","hostels-14.svg","hostels-24.svg","hotels-14.svg","hotels-24.svg","household-supplies-14.svg","household-supplies-24.svg","hydro-14.svg","hydro-24.svg","hypermarket-14.svg","hypermarket-24.svg","indoor-infra-elevator-disabled-14.svg","indoor-infra-elevator-disabled-24.svg","indoor-service-charging-socket-14.svg","indoor-service-charging-socket-24.svg","indoor-service-luggage-14.svg","indoor-service-luggage-24.svg","industrial-enterprise-14.svg","industrial-enterprise-24.svg","information-14.svg","information-24.svg","it-14.svg","it-24.svg","jewelry-store-14.svg","jewelry-store-24.svg","justice-14.svg","justice-24.svg","kindergarten-14.svg","kindergarten-24.svg","landmark-14.svg","landmark-24.svg","laundry-14.svg","laundry-24.svg","library-14.svg","library-24.svg","liquor-store-14.svg","liquor-store-24.svg","locality-14.svg","locality-24.svg","locker-14.svg","locker-24.svg","malls-14.svg","malls-24.svg","market-14.svg","market-24.svg","marketplace-14.svg","marketplace-24.svg","medical-14.svg","medical-24.svg","medicine-14.svg","medicine-24.svg","medicine-il-14.svg","medicine-il-24.svg","medicine-tr-14.svg","medicine-tr-24.svg","memorable-event-14.svg","memorable-event-24.svg","mobile-phones-14.svg","mobile-phones-24.svg","monument-14.svg","monument-24.svg","mosque-14.svg","mosque-24.svg","mountain-14.svg","mountain-24.svg","museum-14.svg","museum-24.svg","music-store-14.svg","music-store-24.svg","musicclub-14.svg","musicclub-24.svg","nail-studio-14.svg","nail-studio-24.svg","news-14.svg","news-24.svg","night-club-14.svg","night-club-24.svg","office-14.svg","office-24.svg","office-service-14.svg","office-service-24.svg","offline-14.svg","offline-24.svg","online-store-14.svg","online-store-24.svg","opticial-store-14.svg","opticial-store-24.svg","orthodox-church-14.svg","orthodox-church-24.svg","park-14.svg","park-24.svg","pawnshop-14.svg","pawnshop-24.svg","pedestrian-14.svg","pedestrian-24.svg","perfume-shop-14.svg","perfume-shop-24.svg","pet-playground-14.svg","pet-playground-24.svg","petshop-14.svg","petshop-24.svg","photo-14.svg","photo-24.svg","picnic-14.svg","picnic-24.svg","pier-14.svg","pier-24.svg","pizzeria-14.svg","pizzeria-24.svg","planetarium-14.svg","planetarium-24.svg","playground-14.svg","playground-24.svg","police-14.svg","police-24.svg","police-post-14.svg","police-post-24.svg","pool-hall-14.svg","pool-hall-24.svg","port-14.svg","port-24.svg","post-office-14.svg","post-office-24.svg","printing-services-14.svg","printing-services-24.svg","protestant-church-14.svg","protestant-church-24.svg","province-14.svg","province-24.svg","pub-14.svg","pub-24.svg","racing-14.svg","racing-24.svg","railway-station-14.svg","railway-station-24.svg","railway-terminal-14.svg","railway-terminal-24.svg","restaurants-14.svg","restaurants-24.svg","rezervation-14.svg","rezervation-24.svg","route-14.svg","route-24.svg","sanatorium-14.svg","sanatorium-24.svg","school-14.svg","school-24.svg","science-14.svg","science-24.svg","shoe-store-14.svg","shoe-store-24.svg","shooting-14.svg","shooting-24.svg","skating-rink-14.svg","skating-rink-24.svg","ski-resort-14.svg","ski-resort-24.svg","smile-24.svg","software-14.svg","software-24.svg","spa-14.svg","spa-24.svg","sport-14.svg","sport-24.svg","sport-school-14.svg","sport-school-24.svg","sportcenter-14.svg","sportcenter-24.svg","sports-bar-14.svg","sports-bar-24.svg","spring-14.svg","spring-24.svg","stadium-14.svg","stadium-24.svg","stage-14.svg","stage-24.svg","standpipe-14.svg","standpipe-24.svg","stationery-store-14.svg","stationery-store-24.svg","stenograffia-14.svg","stenograffia-24.svg","street-14.svg","street-24.svg","subway-fallback-14.svg","subway-fallback-24.svg","supermarket-14.svg","supermarket-24.svg","sushi-14.svg","sushi-24.svg","swimming-pool-14.svg","swimming-pool-24.svg","synagogue-14.svg","synagogue-24.svg","tableware-14.svg","tableware-24.svg","tailor-14.svg","tailor-24.svg","taxi-14.svg","taxi-24.svg","tennis-14.svg","tennis-24.svg","theatre-14.svg","theatre-24.svg","ticket-office-14.svg","ticket-office-24.svg","tire-fitting-14.svg","tire-fitting-24.svg","tram-stop-14.svg","tram-stop-24.svg","trash-14.svg","trash-24.svg","travel-agency-14.svg","travel-agency-24.svg","university-14.svg","university-24.svg","urban-leisure-house-of-culture-14.svg","urban-leisure-house-of-culture-24.svg","urban-service-nursing-room-14.svg","urban-service-nursing-room-24.svg","vet-clinic-14.svg","vet-clinic-24.svg","veterinary-14.svg","veterinary-24.svg","viewpoint-14.svg","viewpoint-24.svg","waterfall-14.svg","waterfall-24.svg","waterpark-14.svg","waterpark-24.svg","wc-14.svg","wc-24.svg","wedding-14.svg","wedding-24.svg","well-14.svg","well-24.svg","wine-14.svg","wine-24.svg","work-14.svg","work-24.svg","ya-gas-station-14.svg","ya-gas-station-24.svg","yoga-14.svg","yoga-24.svg","zoo-14.svg","zoo-24.svg"],service:["bookmark-14.svg","bookmark-list-14.svg","geolocation-14.svg","home-14.svg","home-24.svg","like-14.svg","like-24.svg","lock-24.svg","message-24.svg","my-location-14.svg","personal-14.svg","poll-24.svg","search-14.svg","search-24.svg","show-map-14.svg","web-24.svg","work-14.svg","work-24.svg"]},Le={small:14,normal:24,large:38},De={light:{red:{ru:x(),uk:L(),en:z(),tr:N(),uz:O(),kk:B()},"red-border":{ru:te(),uk:re(),en:ie(),tr:se(),uz:ue(),kk:de()},black:{ru:s(),uk:u(),en:d(),tr:f(),uz:v(),kk:g()},portal:{ru:Ze(),en:ke(),tr:ke(),uk:Ze(),uz:ke(),kk:Ze()}},dark:{red:{ru:q(),uk:W(),en:V(),tr:K(),uz:$(),kk:J()},"red-border":{ru:fe(),uk:ve(),en:ge(),tr:_e(),uz:we(),kk:Se()},black:{ru:_(),uk:w(),en:S(),tr:k(),uz:Z(),kk:M()},portal:{ru:xe(),en:Me(),tr:Me(),uk:xe(),uz:Me(),kk:xe()}}};function ze(e,t){var n=e.type,a=e.name,s=e.size,c=function(e,t){var n=e.toLowerCase().replace(/\s+/g,"-");return"ru"===t.lang&&i[n]?i[n]:"tr"===t.lang&&o[n]?o[n]:r[n]||n}(a,t);if(!c)return null;var u=c+"-"+Le[s]+".svg";return Te[n]&&Te[n].includes(u)?t.staticHost+"static/v32/icons/"+n+"/"+u:null}function Ae(e,t){var n=e.name,r=e.size,o=ze({type:"rubrics",name:n,size:r},t),i=ze({type:"rubrics",name:"fallback",size:r},t);return o||i}function Ne(e){return"//yastatic.net/s3/front-maps-static/constructor-icons/"+e+".svg"}function Ue(e){var t=e.type,n=e.lang,r=e.theme;return De[r][t][n]}function Oe(e){var t=e.lang;return["ru","uk","kk"].includes(t)}},8131:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Sc});var r=n(7462),o=n(4578),i=n(7363),a=n(1533),s=n(8244),c=n(6859),u=n(5095),l=n(6382),d=n(5731);var p=n(5495),f=n(7643),m=n(2668),v=n(129),h=n(1279),g=["","permission_denied","position_unavailable","timeout"],y=function(e){this.code=void 0,this.message=void 0,this.message=e,this.code=g.indexOf(e)},_=6e4,b={ERROR_TYPES:g,getCurrentPosition:function(e,t,n){var r,o;return void 0===n&&(n=_),"denied"===(null===(r=t.query.mocks)||void 0===r?void 0:r.geolocation)?Promise.reject({code:1}):"unavailable"===(null===(o=t.query.mocks)||void 0===o?void 0:o.geolocation)?Promise.reject({code:2}):(e.logEvent("geolocation_request"),E({timeout:n}).then((function(n){var r,o,i=n.coords;e.logEvent("geolocation_success",{accuracy:i.accuracy});var a=C(null===(r=t.query.mocks)||void 0===r?void 0:r.geolocation),s=a?{accuracy:null!==(o=a.accuracy)&&void 0!==o?o:i.accuracy,latitude:a.latitude,longitude:a.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null}:i;return w(s,t),s})).catch((function(t){throw e.logEvent("geolocation_fail",{type:b.ERROR_TYPES[t.code]}),t})))},watchPosition:function(e,t,n,o){var i,a;if(void 0===o&&(o=_),"denied"===(null===(i=n.query.mocks)||void 0===i?void 0:i.geolocation))return e.onError("permission_denied"),0;if("unavailable"===(null===(a=n.query.mocks)||void 0===a?void 0:a.geolocation))return e.onError("position_unavailable"),0;t.logEvent("geolocation_watch_request");var s,c,u,l,d,p,f=!1;return s=function(r){var o,i;f||(t.logEvent("geolocation_watch_success",{accuracy:r.coords.accuracy}),f=!0);var a=C(null===(o=n.query.mocks)||void 0===o?void 0:o.geolocation),s=a?{accuracy:null!==(i=a.accuracy)&&void 0!==i?i:r.coords.accuracy,latitude:a.latitude,longitude:a.longitude,altitude:null,altitudeAccuracy:null,heading:null,speed:null}:r.coords;w(s,n),e.onSuccess(s)},c=function(n){var r=b.ERROR_TYPES[n.code];f||(t.logEvent("geolocation_watch_fail",{type:r}),f=!0),e.onError(r)},u={timeout:o},(null===(l=window.yandex)||void 0===l||null===(d=l.mapsApp)||void 0===d?void 0:d.getCurrentUserLocation)?window.setInterval((function(){return E(u).then(s).catch(c)}),null!==(p=null==u?void 0:u.timeout)&&void 0!==p?p:_):window.navigator.geolocation.watchPosition(s,c,(0,r.Z)({enableHighAccuracy:!0},u))},clearWatch:function(e){var t,n;null!==(t=window.yandex)&&void 0!==t&&null!==(n=t.mapsApp)&&void 0!==n&&n.getCurrentUserLocation?window.clearInterval(e):window.navigator.geolocation.clearWatch(e)},checkPermission:function(){return window.navigator.permissions?Promise.race([window.navigator.permissions.query({name:"geolocation"}).then((function(e){return e.state})),h.Vs(2e3)]).catch((function(){})):Promise.resolve(void 0)}};function w(e,t){e&&(e.accuracy>5e3||((new window.Image).src=t.morda.url+"/gpsave?"+v.stringify({sk:t.xscriptCsrfToken,lat:e.latitude,lon:e.longitude,precision:e.accuracy})))}function E(e){var t,n,o,i=null===(t=window.yandex)||void 0===t||null===(n=t.mapsApp)||void 0===n?void 0:n.getCurrentUserLocation;return i?Promise.race([i().then((function(e){return"string"==typeof e?JSON.parse(e):e})).catch((function(){throw new y("position_unavailable")})),h.Vs(null!==(o=null==e?void 0:e.timeout)&&void 0!==o?o:_).then((function(){throw new y("timeout")}))]):new Promise((function(t,n){return window.navigator.geolocation.getCurrentPosition(t,n,(0,r.Z)({enableHighAccuracy:!0},e))}))}var S=/^\d+\.?(\d+)?,\d+\.?(\d+)?(,\d+)?$/;function C(e){if(S.test(e)){var t=e.split(",").map(Number);return{latitude:t[0],longitude:t[1],accuracy:t[2]}}}const k=b;var R=n(844),Z=n(4807);const P={getRoadEvents:function(e,t){return(0,Z.Z)("traffic/getRoadEvents",{query:{id:e}},t)},getRoadEvent:function(e,t){return(0,Z.Z)("traffic/getRoadEvent",{query:{eventId:e}},t)},getForecast:function(e,t){return(0,Z.Z)("traffic/getForecast",{query:{id:e}},t)},actual:{getLevel:function(e,t){return(0,Z.Z)("traffic/getLevelInfo",{query:{ids:e}},t)}},archive:{getMetaData:function(e,t,n){return(0,R.Z)({url:n.hosts.trafficArchive+"description/traffic-light",query:{tm:t,ids:e.join(","),l:n.locale},jsonp:!0}).then((function(t){var n=(t.data.features||[]).find((function(t){var n=t.properties;return Boolean(n&&n.HotspotMetaData&&e.includes(n.HotspotMetaData.id))}));if(!n)return{level:null};var r=n.properties&&n.properties.JamsMetaData.level;return{level:void 0!==r?r:null}}))}}};var M=n(2514),I=n(5877),x=n.n(I),T=n(2690),L=n(8067),D=n(9471),z=n(1318),A=U(z.F),N=U(z.i);[].concat(A,["panorama"]),[].concat(N,["panorama","gallery"]);function U(e){return e.filter((function(e){return"overview"!==e}))}n(1118),n(934),n(3568);var O=n(4135);n(7064);n(1064),n(8153);var F=n(5088),B=(n(6422),n(9676));n(8729);var H=n(7771),q=n(2714),G=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/;const j=function(e,t){if((0,H.Z)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,q.Z)(e))||(W.test(e)||!G.test(e)||null!=t&&e in Object(t))};var V=n(520);function Y(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Y.Cache||V.Z),n}Y.Cache=V.Z;const K=Y;var X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/\\(\\)?/g;const Q=function(e){var t=K(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(X,(function(e,n,r,o){t.push(r?o.replace($,"$1"):n||e)})),t}));var J=n(7338);const ee=function(e,t){return(0,H.Z)(e)?e:j(e,t)?[e]:Q((0,J.Z)(e))};const te=function(e){if("string"==typeof e||(0,q.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};const ne=function(e,t){for(var n=0,r=(t=ee(t,e)).length;null!=e&&n<r;)e=e[te(t[n++])];return n&&n==r?e:void 0};var re=n(2119);const oe=function(){try{var e=(0,re.Z)(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();const ie=function(e,t,n){"__proto__"==t&&oe?oe(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var ae=n(106),se=Object.prototype.hasOwnProperty;const ce=function(e,t,n){var r=e[t];se.call(e,t)&&(0,ae.Z)(r,n)&&(void 0!==n||t in e)||ie(e,t,n)};var ue=n(6009),le=n(7226);const de=function(e,t,n,r){if(!(0,le.Z)(e))return e;for(var o=-1,i=(t=ee(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var c=te(t[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=a){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=(0,le.Z)(l)?l:(0,ue.Z)(t[o+1])?[]:{})}ce(s,c,u),s=s[c]}return e};const pe=function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=ne(e,a);n(s,a)&&de(i,ee(a,e),s)}return i};const fe=function(e,t){return null!=e&&t in Object(e)};var me=n(4732),ve=n(1656);const he=function(e,t,n){for(var r=-1,o=(t=ee(t,e)).length,i=!1;++r<o;){var a=te(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&(0,ve.Z)(o)&&(0,ue.Z)(a,o)&&((0,H.Z)(e)||(0,me.Z)(e))};const ge=function(e,t){return null!=e&&he(e,t,fe)};const ye=function(e,t){return pe(e,t,(function(t,n){return ge(e,n)}))};var _e=n(8694),be=n(7685),we=be.Z?be.Z.isConcatSpreadable:void 0;const Ee=function(e){return(0,H.Z)(e)||(0,me.Z)(e)||!!(we&&e&&e[we])};const Se=function e(t,n,r,o,i){var a=-1,s=t.length;for(r||(r=Ee),i||(i=[]);++a<s;){var c=t[a];n>0&&r(c)?n>1?e(c,n-1,r,o,i):(0,_e.Z)(i,c):o||(i[i.length]=c)}return i};const Ce=function(e){return(null==e?0:e.length)?Se(e,1):[]};const ke=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Re=Math.max;const Ze=function(e,t,n){return t=Re(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=Re(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),ke(e,this,s)}};const Pe=function(e){return function(){return e}};const Me=function(e){return e};const Ie=oe?function(e,t){return oe(e,"toString",{configurable:!0,enumerable:!1,value:Pe(t),writable:!0})}:Me;var xe=Date.now;const Te=function(e){var t=0,n=0;return function(){var r=xe(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ie);Le=function(e,t){return null==e?{}:ye(e,t)},Te(Ze(Le,void 0,Ce),Le+"");var Le;var De=n(6897);n(1099);function ze(e){return{type:"area"===e.query.rlt&&e.experiments.ui.areaMeasure?"area":"ruler",isEnabled:!1,points:("string"==typeof e.query.rl?e.query.rl:"").split("~").reduce((function(e,t){var n=(0,d.P)(t);if(!n)return e;var r=e[e.length-1],o=r?[r.coordinates[0]+n[0],r.coordinates[1]+n[1]]:n;return e.push({coordinates:o,value:r?r.value+(0,L.t)(o,r.coordinates):0,showBalloon:!1}),e}),[])}}var Ae=n(7114),Ne={};function Ue(e,t,n){return e.uri&&e.coords?function(e,t,n,r){return Fe(e,n,r).then((function(e){return!e&&t?Oe(t,n,r):e}))}(e.uri,e.coords,t,n):e.uri?Fe(e.uri,t,n):e.value&&!e.coords?function(e,t,n){return Be(e,(function(){return Ae.Z.fetch({type:["geo"],text:e,count:1,origin:n},t)}))}(e.value,t,n):e.coords?Oe(e.coords,t,n):Promise.resolve(void 0)}function Oe(e,t,n){return Be(e.join(","),(function(){return Ae.Z.fetch({mode:"reverse",type:["geo"],center:e,count:1,origin:n},t)}))}function Fe(e,t,n){return Be(e,(function(){return Ae.Z.fetch({uri:e,count:1,origin:n},t)}))}function Be(e,t){return Ne[e]?Promise.resolve(Ne[e]):t().then((function(e){return e.items.length>0?e.items[0]:void 0})).then((function(t){var n;t&&(Ne[e]=t,Object.keys(Ne).length>100&&((n={})[e]=Ne[e],Ne=n));return t}))}var He=n(5876),qe=n(956),Ge=n(943),We=n(259),je=n(3582),Ve=n(1491),Ye=n(9907),Ke=(0,He.Z)("geolocation-pin"),Xe={fill:"#000",fillOpacity:.05,stroke:[{width:1,opacity:.07,color:"#000"}],interactive:!1,zIndex:We.I.minimum,simplificationRate:0},$e=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props,t=(0,Ye.XT)(e.config)?"map-placemark-dot-ru-32":"map-placemark-dot-32";return i.createElement(i.Fragment,null,i.createElement(Ge.ZP,{name:"geolocation_pin"},i.createElement(qe.Z,{coordinates:e.currentPosition,zIndex:We.I.minimum,nonInteractive:!0},i.createElement("div",{className:Ke("placemark")},i.createElement(Ve.Z,{name:t})))),e.config.uatraits.isMobile?i.createElement(je.Z,{center:e.currentPosition,radius:e.accuracy,drawingStyle:Xe}):null)},t}(i.Component);const Qe=(0,M.ZP)($e);var Je=n(3366),et=n(1721),tt=n(115),nt=n.n(tt),rt=n(4891),ot=n.n(rt),it=["color","size","comma","caption","outline"],at=(0,He.Z)("map-circle-placemark");const st=function(e){var t=e.color,n=e.size,o=void 0===n?"medium":n,a=e.comma,s=e.caption,c=e.outline,u=(0,Je.Z)(e,it);return i.createElement(qe.Z,(0,r.Z)({},u),i.createElement("div",{className:at({comma:a,size:o,outline:c}),style:{color:t}},i.createElement(et.Z,{className:at("placemark"),url:a?ot():nt()}),i.createElement("div",{className:at("content")},e.children),s?i.createElement("div",{className:at("caption")},s):null))};var ct={pmbl:"#177ee6",pmrd:"#f43",pmgn:"#3bb300"},ut=ct.pmbl;const lt=function(e){return e.points?i.createElement(i.Fragment,null,e.points.map((function(e,t){var n=e.coordinates,r=e.color;return i.createElement(st,{key:t+"_"+n.join(),coordinates:n,color:r&&r in ct?ct[r]:ut,nonInteractive:!0,comma:!0})}))):null};var dt=n(3144),pt=n(9611);function ft(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function mt(e,t,n){return mt=ft()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,pt.Z)(o,n.prototype),o},mt.apply(null,arguments)}var vt=n(7179),ht=n(8726),gt=n(3214),yt=n(5698),_t=n(4986),bt=n(9056),wt=n(5522),Et=n(9111),St=n(576),Ct=n(8766),kt=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._updateLayer=function(e,n){var r=t.props.map;if(!r.destroyed){var o=n&&r.getDataSource(n.layer);n&&n.dataSource&&(o?e&&r.updateTileDataSource(n.layer,n.dataSource):r.addDataSource(n.layer,n.dataSource));var i=r.getLayers(),a=i.topRasterLayers,s=i.mainLayers,c=[].concat(s,a);if(e){var u=(0,gt.se)(e.layer);c=c.filter((function(e){return!u.includes(e)}))}if(n){var l,d=(0,gt.se)(n.layer);(l=c).push.apply(l,d)}r.setLayers((0,gt.c8)(c,t.props.ymaps3.EventBlockerLayer,t.props.config)),!e||!e.dataSource||n&&n.dataSource||r.removeDataSource(e.layer)}},t}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateLayer(void 0,this.props)},n.componentDidUpdate=function(e){this.props.layer===e.layer&&(0,St.Z)(e.dataSource,this.props.dataSource)||this._updateLayer(e,this.props)},n.componentWillUnmount=function(){this._updateLayer(this.props)},n.render=function(){return i.createElement(Ct.Z,(0,r.Z)({},this.props))},t}(i.Component);const Rt=(0,M.ZP)((0,yt.ZP)({shouldWait:!0})(kt));var Zt,Pt={failIfMajorPerformanceCaveat:!0,antialias:!1,depth:!0,stencil:!0,alpha:!1},Mt=["SwiftShader","Parallels"];function It(){try{var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("webgl",Pt);if(t)return t}catch(n){}Lt()}function xt(e){if(void 0===Zt){var t=e||It();t?Zt=function(e){for(var t=!0,n=[],r=0,o=["requestAnimationFrame","Worker","URL","Blob","XMLHttpRequest","Set","Map"];r<o.length;r++){var i=o[r];window[i]||(t=!1,n.push("WindowPropertyNotExist-".concat(i)))}"function"!=typeof Math.trunc&&(t=!1,n.push("MathTrunc"));0===e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)&&(t=!1,n.push("MAX_VERTEX_TEXTURE_IMAGE_UNITS"));e.getExtension("OES_vertex_array_object")||(t=!1,n.push("OES_vertex_array_object"));e.getExtension("OES_standard_derivatives")||(t=!1,n.push("OES_standard_derivatives"));var a=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);a&&0!==a.precision||(t=!1,n.push("Highp"));(function(e){if(!e)return!1;var t=e.createShader(e.VERTEX_SHADER);if(!t)return!1;e.shaderSource(t,"#version 100\nattribute vec2 p;\nvoid main() {\n    gl_Position = vec4(p,0,1);\n    gl_PointSize = 1.0;\n}"),e.compileShader(t);var n=e.createShader(e.FRAGMENT_SHADER);if(!n)return!1;e.shaderSource(n,"#version 100\nvoid main() {\n    gl_FragColor = vec4(1, 0, 0, 1);\n}"),e.compileShader(n);var r=e.createProgram();if(!r)return!1;e.attachShader(r,t),e.attachShader(r,n),e.bindAttribLocation(r,0,"p"),e.linkProgram(r);var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.clearColor(0,1,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(r),e.drawArrays(e.POINTS,0,1);var i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteBuffer(o),e.deleteShader(t),e.deleteShader(n),e.deleteProgram(r),255===i[0]})(e)||(t=!1,n.push("TestPoints"));for(var s=e.getExtension("WEBGL_debug_renderer_info"),c=s&&e.getParameter(s.UNMASKED_RENDERER_WEBGL),u=0,l=Mt;u<l.length;u++){var d=l[u];if("string"==typeof c&&c.indexOf(d)>-1){t=!1,n.push("BlacklistedGpu");break}}return{supported:t,reasonsFailed:n}}(t):Lt()}return Zt}function Tt(){return Zt?Zt.supported:window.WebGLRenderingContext?(n=navigator.userAgent,!(!(/YandexSearch\//.test(n)||/YaApp/.test(n)||/YaBrowser\/[0-9][0-9.]* YaApp_iOS\/[0-9][0-9.]*/.test(n))&&!/MiuiBrowser\//.test(n)&&/Mac OS X [0-9_]+;.*HTC[_/ ]/.test(n)||/Mac OS X 10_[0-8][^0-9]/.test(navigator.userAgent)||/SamsungBrowser\//.test(n)||(t=null===(e=navigator.userAgent)||void 0===e?void 0:e.match(/WebKit\/?(\d+)/i),Boolean(t&&Number(t[1])<537))||function(){var e,t=null===(e=navigator.userAgent)||void 0===e?void 0:e.match(/Chrome\/(\d+)/i);return!!t&&Number(t[1])<57}())||(Lt(),!1)):(Lt(),!1);var e,t,n}function Lt(){Zt={supported:!1,reasonsFailed:["HasWebGl"]}}var Dt,zt=n(7229),At=n(4254),Nt=n(8553),Ut="undefined"==typeof window,Ot=[],Ft=0;function Bt(){Ut=!0,Ot.forEach((function(e){return e()})),Dt&&Dt.disconnect()}function Ht(){var e=window.performance.now();e>2e4?Bt():(Ft?3e3-(e-Ft):3e3)<=0?Bt():setTimeout(Ht,1e3)}Ut||(0,Nt.Z)((function(){if(!window.PerformanceLongTaskTiming||!window.performance||!window.performance.now)return void setTimeout(Bt,5e3);(Dt=new window.PerformanceObserver((function(e){var t=e.getEntries().pop();t&&(Ft=t.startTime+t.duration)}))).observe({entryTypes:["longtask"]}),Ht()}));const qt=function(e){Ut?e():Ot.push(e)};var Gt=n(1502),Wt=n(1581),jt=function(){return Promise.all([n.e("ymaps").then(n.bind(n,8225)),n.e("ymaps").then(n.bind(n,220)),n.e("ymaps").then(n.t.bind(n,8040,23))]).then((function(e){var t=e[0],n=e[1].EventBlockerLayer,o=e[2];return new Promise((function(e){return setTimeout((function(){return e([(0,r.Z)({},t,{EventBlockerLayer:n}),o.default])}),0)}))}))},Vt=function(e,t){return Promise.all([n.e("ymaps-vector").then(n.bind(n,1948)),n.e("ymaps-vector").then(n.t.bind(n,4828,23))]).then((function(e){var n=e[0],r=e[1];return function(e){return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return mt(n.VectorMapEngine,[r.default,t||{},e].concat(i))}}}))},Yt=(0,vt.Z)(M.ZP,Wt.ZP),Kt=function(e){function t(t){var n;(n=e.call(this,t)||this)._isMapCreated=!1,n._ymaps3=void 0,n._loadAction=void 0,n._loadDelayStart=void 0,n._ref=i.createRef(),n._location=void 0,n._camera=void 0,n._map=void 0,n._previousWindowMap=void 0,n._onMapUpdateDebounced=void 0,n._filter=void 0,n._onYmaps3Load=function(e){var t=e[0],r=e[1];n._ymaps3=t,t.errorLoggerFactory((function(e){var t=new r;return t.initErrors(e),t.logError})),n._createMap()},n._handleMapLocationRequest=function(e){var t=n._map;if(n._location&&e&&t){var r=n._location,o="bounds"in e?(0,s.$Y)({bounds:e.bounds},n.props.margin,n._getSize(),n.props.config.uatraits.isMobile||"snap"===t.effectiveZoomRounding):void 0,i=r.center,a=r.zoom;o?i=o.center:"center"in e&&(i=e.center),o?a=o.zoom:"zoom"in e&&e.zoom&&(a=e.zoom),a===r.zoom&&(0,De.J)(i,r.center)||t.animateCenterAndZoom(i,a,e.duration||0)}},n._createMap=function(){var e=n.props,t=n.state,r=n._isElementProvided?e.element:n._ref.current;if(r&&!n._isMapCreated&&n._ymaps3){n._isMapCreated=!0,e.config.query["disable-vector-force"]?(B.Z.set("disable_vector_force",!0),n.setState({isVectorDisabledForce:!0})):B.Z.get("disable_vector_force")&&n.setState({isVectorDisabledForce:!0});var o=e.locationRequest,i=o&&"center"in o&&o.center||e.initialLocation.center,a=o&&"zoom"in o&&o.zoom||e.initialLocation.zoom;n._location={center:i,zoom:a},n._camera=e.initialCamera||{azimuth:0,tilt:0};var s=(0,gt.mt)(e.config,e.theme),c=n._getMapMode(),u=n._ymaps3.YaMap,l=Object.values(gt.UZ),d=(0,gt.c8)(l,n._ymaps3.EventBlockerLayer,e.config),p=d.topRasterLayers,f=d.mainLayers,m=new u({mode:c,element:r,center:i,zoom:a,margin:e.margin,zoomRange:e.zoomRange||{min:2,max:21},dataSources:s,topRasterLayers:p,mainLayers:f,behaviors:e.behaviors,zoomRounding:e.zoomRounding,eventObjectsFilter:e.eventObjectsFilter,disableRasterPreload:e.config.uatraits.isMobile,nonRotatableRasterSources:gt.Iw});if(e.initialCamera&&(e.initialCamera.azimuth||e.initialCamera.tilt)&&m.on("vectorStart",(function(){var t,n;null!==(t=e.initialCamera)&&void 0!==t&&t.azimuth&&(0,Gt.Cm)(m,e.initialCamera.azimuth),null!==(n=e.initialCamera)&&void 0!==n&&n.tilt&&(0,Gt.lp)(m,e.initialCamera.tilt)})),window.yandex_map=m,m.events.clickTimeout=300,m.events.waitHotspotsTimeout=1e3,(0,ht.r1)().has.touch?n._ymaps3.loadHotspotsForViewport(m):n._ymaps3.loadHotspotsByPointerPosition(m),e.vector&&e.config.isVectorEnabled&&!t.isVectorDisabledForce)if(Tt()){var v=Vt(e.config.experiments.ui),h=new Promise((function(e,t){setTimeout((function(){var n=It();n&&xt(n).supported||t(new Error("Vector is not supported")),e(n)}))}));Promise.all([v,h]).then((function(e){var t=e[0],n=e[1];m.destroyed||m.provideVectorMapEngineFactory(t(n))})).catch((function(){n.setState({isVectorSupported:!1})}))}else n.setState({isVectorSupported:!1});n._map=m,n._onMapUpdate(),n._onZoomRoundingChange(),n._onMapSizeChange(),n._addFilter(),e.onReady&&e.onReady(m),n._handleMapLocationRequest(o),n.forceUpdate()}},n._addFilter=function(){var e=n.props.getFilter;e&&(n._filter=e(n._ymaps3),n._map.addObjectFilter(n._filter))},n._onMapUpdate=function(){var e=n._map;if(!e.isInAction){var t=[e.center[0],e.center[1]];(n._location.zoom!==e.zoom||!(0,De.J)(n._location.center,t))&&(n._location={zoom:Math.round(100*e.zoom)/100,center:t},n._onLocationChange()),n._camera.azimuth===e.azimuth&&n._camera.tilt===e.tilt||(n._camera={azimuth:e.azimuth,tilt:e.tilt},n.props.onCameraChange&&n.props.onCameraChange(n._camera))}},n._onLocationChange=function(){var e=n.props.onLocationChange;if(e){var t=(0,s.$Y)(n._location,n.props.margin,n._getSize()),o=t.bounds,i=t.span;e((0,r.Z)({},n._location,{bounds:o,span:i}))}},n._onMapSizeChange=function(){n.props.onSizeChange&&n.props.onSizeChange(n._getSize(),n._map.offset),n._onLocationChange()},n._getSize=function(){var e=n._map.size;return{width:e.x,height:e.y}},n._onResize=function(){var e=n._map;e&&e.resize()},n._onDragStart=function(){n.setState({isDragged:!0})},n._onDragEnd=function(){n.setState({isDragged:!1})},n._onZoomRoundingChange=function(){n.props.onZoomRoundingChange&&n._map&&n.props.onZoomRoundingChange(n._map.effectiveZoomRounding)},n._onThemeChange=function(){var e=n.props,t=n._map,r=(0,gt.mt)(e.config,e.theme);Object.entries(r).filter((function(e){return"tile"===e[1].type})).forEach((function(e){var n=e[0],r=e[1];null==t||t.updateTileDataSource(n,r)}))},n._renderLayers=function(){var e=n.props;return"satellite"===e.type?i.createElement(Rt,{layer:"sat"}):"hybrid"===e.type?i.createElement(i.Fragment,null,i.createElement(Rt,{layer:"sat"}),i.createElement(Rt,{layer:"skl",onClick:e.onPoiClick,shouldHover:function(){return Boolean(e.isPoiEnabled||e.isHoverForceEnabled)}})):i.createElement(i.Fragment,null,i.createElement(Rt,{layer:"map",onClick:e.onPoiClick,shouldHover:function(){return Boolean(e.isPoiEnabled||e.isHoverForceEnabled)}}),!e.config.bunker.disablePersonalizedPoi&&e.config.authorization&&e.config.hosts.tilesApi&&"vector"===n._getMapMode()?i.createElement(Rt,{layer:"personalizedPoi",onClick:e.onPoiClick,shouldHover:function(){return Boolean(e.isPoiEnabled||e.isHoverForceEnabled)}}):null)},n.state={isDragged:!1,isVectorSupported:!0,isVectorDisabledForce:!1};var o=n.props.updateTimeout||300;return n._onMapUpdateDebounced=(0,Et.Z)(n._onMapUpdate,o),"undefined"!=typeof window&&(t.delayLoad?(n._loadDelayStart=Date.now(),(0,At.J3)("mapLoadDelay",n._loadDelayStart),qt((function(){n._loadAction||((0,At.J3)("mapLoadDelayCompleted",Date.now()-n._loadDelayStart),n._loadAction=p.Z.create(jt(),{success:n._onYmaps3Load}))}))):n._loadAction=p.Z.create(jt(),{success:n._onYmaps3Load})),n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._createMap(),this._previousWindowMap=window.yandex_map},n.componentDidUpdate=function(e){!e.delayLoad||this.props.delayLoad||this._loadAction||((0,At.J3)("mapLoadDelayAborted",Date.now()-this._loadDelayStart),this._loadAction=p.Z.create(jt(),{success:this._onYmaps3Load}));var t=this._map;if(!t)return this._createMap();var n=this.props;n.behaviors&&!(0,St.Z)(n.behaviors,e.behaviors)&&t.behaviors.setEnabled(n.behaviors);var r=n.locationRequest;r!==e.locationRequest&&this._handleMapLocationRequest(r),(0,St.Z)(n.margin,e.margin)||(t.setMargin(n.margin),this._onLocationChange());var o=this._getMapMode();t.setMode(o),n.getFilter!==e.getFilter&&(this._filter&&(t.removeObjectFilter(this._filter),this._filter=void 0),this._addFilter()),e.theme!==n.theme&&this._onThemeChange()},n.componentWillUnmount=function(){p.Z.cancel(this._loadAction),this._onMapUpdateDebounced.cancel(),this._map&&this._map.destroy(),window.yandex_map=this._previousWindowMap||window.yandex_map},n._getMapMode=function(){var e=this.props.config.isVectorEnabled&&!this.state.isVectorDisabledForce;return this.state.isVectorSupported&&this.props.vector&&e?"vector":"raster"},n.render=function(){var e=this.props,t=this.state;return i.createElement(i.Fragment,null,this._isElementProvided?null:i.createElement("div",{className:e.className,ref:this._ref}),i.createElement(yt.Ib,{value:{map:this._map,ymaps3:this._ymaps3}},this._renderLayers(),i.createElement(_t.Z,{onUpdate:this._onMapUpdateDebounced,onDragStart:this._onDragStart,onInertiaStart:this._onDragEnd,onDragEnd:this._onDragEnd,onResize:this._onMapSizeChange,onZoomRoundingChanged:this._onZoomRoundingChange}),e.children,this.state.isDragged?i.createElement(zt.Z,{cursor:"grabbing"}):null),i.createElement(bt.Z,{onResize:this._onResize}),i.createElement(wt.Z,{type:"resize",listener:this._onResize}),t.isVectorDisabledForce?i.createElement(Ge.ZP,{name:"disable_vector_force"}):null)},(0,dt.Z)(t,[{key:"_isElementProvided",get:function(){return"element"in this.props}}]),t}(i.Component);const Xt=Yt(Kt);var $t,Qt=n(7473),Jt=n.n(Qt),en=n(9705),tn=["layer"],nn={getLayers:function(e,t){var n=($t=$t||{}).requests||[],r=n.push(function(e,t){return{layerIds:e.layers,center:e.center?(0,en.s)(e.center,{fractionDigits:8}):void 0,zoom:e.zoom&&Math.round(e.zoom),span:e.span?(0,en.s)(e.span,{fractionDigits:8}):void 0,locale:t.locale,lang:t.lang}}(e,t))-1,o=$t.promise||function(e){return new Promise((function(t,n){Jt()((function(){var r=$t.requests;$t=void 0,function(e,t){return(0,Z.Z)("layers/info",{query:{requests:e}},t)}(r,e).then(t).catch(n)}))}))}(t);return $t={promise:o,requests:n},o.then((function(e){return e[r]}))},getLayer:function(e,t){var n=e.layer,o=(0,Je.Z)(e,tn);return o.zoom&&!rn(n,o.zoom,t)?Promise.resolve(void 0):nn.getLayers((0,r.Z)({layers:[n]},o),t).then((function(e){return e[n]}))},checkStaticZoomRange:rn};function rn(e,t,n){var r=n.layers[e];if(!r)return!0;var o="zoomRange"in r&&r.zoomRange;return!o||t>=o[0]&&t<=o[1]}const on=nn;const an=(0,vt.Z)(M.ZP,(0,yt.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._updateDebounced=void 0,n._loadAction=void 0,n._update=function(){var e=n.props,t=e.map.getLayers(),r=t.topRasterLayers,o=t.mainLayers,i=[].concat(r,o).map((function(e){return e.split(":")[0]})),a=gt.Hi.filter((function(e){return i.includes(e)}));p.Z.cancel(n._loadAction);var s=(0,St.Z)(a,["map"])?Promise.resolve({map:{copyrights:["© Яндекс"]}}):on.getLayers({layers:a,center:e.map.center,zoom:e.map.zoom},e.config);n._loadAction=p.Z.create(s,{success:n._onDataLoad})},n._onDataLoad=function(e){var t=n.props.map;Object.entries(e).forEach((function(e){var n=e[0],o=e[1];if(o){var i=t.getDataSource(n),a=(0,r.Z)({},i);if("zoomRange"in o&&o.zoomRange){var s=o.zoomRange,c=s[0],u=s[1];a.zoomRange={min:c,max:u}}a.copyrights="copyrights"in o?o.copyrights:void 0,(0,St.Z)(i,a)||t.updateTileDataSource(n,a)}}))},n._updateDebounced=(0,Et.Z)(n._update,500),n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateDebounced()},n.componentWillUnmount=function(){this._updateDebounced.cancel(),p.Z.cancel(this._loadAction)},n.render=function(){return i.createElement(_t.Z,{onUpdate:this._updateDebounced})},t}(i.Component));var sn=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._loaderAction=void 0,t._loadFile=function(){var e=t.props,n=e.config.staticHost+"static/v32/map-customizations/"+e.name+".json";p.Z.cancel(t._loaderAction),t._loaderAction=p.Z.create((0,R.Z)({url:n,parser:"json"}),{success:t._setMapCustomization})},t._setMapCustomization=function(e){void 0===e&&(e={});var n=t.props;n.dataSourceIds.forEach((function(t){var r=n.map.getDataSource(t);r&&"tile"===r.type&&n.map.updateTileDataSource(t,(0,gt._I)(r,e))}))},t}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadFile()},n.componentDidUpdate=function(e){this.props.name!==e.name&&this._loadFile()},n.componentWillUnmount=function(){this._setMapCustomization(),p.Z.cancel(this._loaderAction)},n.render=function(){return null},t}(i.PureComponent);const cn=(0,M.ZP)((0,yt.ZP)({shouldWait:!0})(sn));var un=n(1027),ln=n(3682),dn="_vector_ready",pn=["drag","dblClick","magnifier","oneFingerZoom","pinchZoom"],fn=["scrollZoom"],mn=["mouseRotate","pinchRotate","mouseTilt","panTilt"],vn=(0,He.Z)("map-widget-map-component"),hn=function(e){function t(t){var n;return(n=e.call(this,t)||this)._map=void 0,n._onReady=function(e){window.document.body.classList.add("_map_ready"),n._map=e,n.setState({isReady:!0})},n._getBehaviors=function(){var e;return[].concat(pn,null!==(e=n.props.config.flyover)&&void 0!==e&&e.isEnabled?mn:[],n.props.config.isScrollDisabled?[]:fn)},n._onMainEngineChanged=function(){var e;"vector"!==(null===(e=n._map)||void 0===e?void 0:e.getEffectiveMode())||window.document.body.classList.contains(dn)||window.document.body.classList.add(dn)},n._updateTile3dState=function(e){n.setState((function(t){return{flyover:(0,r.Z)({},t.flyover,{showFlyover:Boolean(e),tile3dState:e})}}))},n._setTile3dLayerInitialized=function(){n.state.flyover.isLayerInitialized||n.setState((function(e){return{flyover:(0,r.Z)({},e.flyover,{isLayerInitialized:!0})}}))},n.state={isReady:!1,flyover:{showFlyover:!1,tile3dState:null,updateTile3dState:n._updateTile3dState,isLayerInitialized:!1,setLayerInitialized:n._setTile3dLayerInitialized}},n}return(0,o.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=(null===(e=t.config.flyover)||void 0===e?void 0:e.isEnabled)&&this.state.flyover.isLayerInitialized;return i.createElement(Xt,{className:vn(),type:t.config.mapType,initialLocation:t.location,vector:t.config.isVectorEnabled,isPoiEnabled:t.isPoiEnabled,onReady:this._onReady,locationRequest:t.locationRequest,margin:t.margin,onPoiClick:t.onPoiClick,onLocationChange:t.onLocationChange,onSizeChange:t.onSizeChange,behaviors:this._getBehaviors()},i.createElement(an,null),n?i.createElement(i.Fragment,null,i.createElement(ln.Z,null),i.createElement(cn,{name:"realty",dataSourceIds:["map"]})):null,this.state.isReady?i.createElement(un.v6,{value:this.state.flyover},t.children):null,i.createElement(_t.Z,{onMainEngineChanged:this._onMainEngineChanged}))},t}(i.Component);const gn=(0,M.ZP)(hn);var yn=n(7535);function _n(e,t){var n,r,o,i,a,s,c,u,l,d,p=0,f="FeatureCollection"===e.type,m="Feature"===e.type,v=f?e.features.length:1;for(n=0;n<v;n++){for(s=f?e.features[n].geometry:m?e.geometry:e,u=f?e.features[n].properties:m?e.properties:{},l=f?e.features[n].bbox:m?e.bbox:void 0,d=f?e.features[n].id:m?e.id:void 0,a=(c=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(i=c?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,u,l,d))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===t(i.geometries[r],p,u,l,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,u,l,d))return!1;p++}}var bn=6378137;function wn(e){return function(e,t,n){var r=n;return _n(e,(function(e,o,i,a,s){r=0===o&&void 0===n?e:t(r,e,o,i,a,s)})),r}(e,(function(e,t){return e+function(e){var t,n=0;switch(e.type){case"Polygon":return En(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=En(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)}),0)}function En(e){var t=0;if(e&&e.length>0){t+=Math.abs(Sn(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(Sn(e[n]))}return t}function Sn(e){var t,n,r,o,i,a,s=0,c=e.length;if(c>2){for(a=0;a<c;a++)a===c-2?(r=c-2,o=c-1,i=0):a===c-1?(r=c-1,o=0,i=1):(r=a,o=a+1,i=a+2),t=e[r],n=e[o],s+=(Cn(e[i][0])-Cn(t[0]))*Math.sin(Cn(n[1]));s=s*bn*bn/2}return s}function Cn(e){return e*Math.PI/180}var kn=n(1886),Rn=n(8447),Zn=n(9657),Pn=n(1421),Mn=n(5713),In=n(5968),xn=n(6176),Tn=n(9971),Ln=(0,He.Z)("ruler-balloon"),Dn={main:10,side:0},zn={"delete-points":{title:"Удалить все точки?",description:"Чтобы удалить только одну точку, нажмите на неё дважды.",confirmation:"Удалить все"},close:{title:"Выключить линейку?",description:"Вы уверены, что хотите удалить все точки и выключить линейку?",confirmation:"Выключить"}};const An=function(e){function t(t){var n;return(n=e.call(this,t)||this)._clearAndDisableRuler=function(){var e,t;n.props.deletePoints(),null===(e=(t=n.props).disableRuler)||void 0===e||e.call(t)},n._openPopup=function(e){n.setState({popupType:e})},n._closePopup=function(){n.setState({popupType:null})},n._clearRuler=function(){n.props.deletePoints()},n._renderPopup=function(){var e=n.state.popupType;if(!e)return null;var t=n.props;return i.createElement(In.Z,{coordinates:t.coordinates,position:["top","bottom","left","right"],offset:Dn,showArrow:!1,isShown:!0},i.createElement(Ge.ZP,{name:"popup",nodeState:{type:e}},i.createElement("div",{className:Ln("popup")},i.createElement("div",{className:Ln("title")},zn[e].title),i.createElement("div",{className:Ln("description")},zn[e].description),i.createElement("div",{className:Ln("buttons")},i.createElement("div",{className:Ln("confirm")},i.createElement(Ge.ZP,{name:"confirm",logClick:!0},i.createElement(xn.Z,{ariaHidden:!0,view:"primary",size:"small",onClick:"delete-points"===e?n._clearRuler:n._clearAndDisableRuler},zn[e].confirmation))),i.createElement("div",{className:Ln("cancel")},i.createElement(Ge.ZP,{name:"cancel",logClick:!0},i.createElement(xn.Z,{ariaHidden:!0,view:"secondary-blue",size:"small",onClick:n._closePopup},"Отмена")))))))},n._renderTooltip=function(){return i.createElement("div",{className:Ln("tooltip-wrapper")},i.createElement("div",{className:Ln("tooltip")},i.createElement("div",{className:Ln("label")},Mn.jq(n.props.value,n.props.measure),"quadratic"===n.props.measure?"²":null),n._renderControls()))},n._renderControls=function(){return n.props.showControls?i.createElement(Ge.ZP,{name:"controls"},i.createElement("div",{className:Ln("controls")},i.createElement(Tn.Z,{text:"Очистить точки",position:"bottom",size:"s",isAir:!0},i.createElement(Ge.ZP,{name:"remove_all_points",logClick:!0},i.createElement("div",{className:Ln("trash"),onClick:function(){return n._openPopup("delete-points")}},i.createElement(Ve.Z,{name:"trash-12",className:Ln("trash-icon"),inline:!0})))),n.props.disableRuler?i.createElement(Tn.Z,{text:"Выключить линейку",position:"bottom",size:"s",isAir:!0},i.createElement(Ge.ZP,{name:"turn_off_ruler",logClick:!0},i.createElement("div",{className:Ln("close"),onClick:function(){return n._openPopup("close")}},i.createElement(Ve.Z,{name:"cross-12",className:Ln("close-icon"),inline:!0})))):null)):null},n.state={popupType:null},n}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(qe.Z,{coordinates:e.coordinates,zIndex:We.I.ruler+1,dataSourceId:e.dataSourceId,blockEvents:!0,draggable:e.draggable,onDragStart:e.onDragStart,onDragMove:e.onDragMove,onDragEnd:e.onDragEnd},i.createElement("div",{className:Ln()},this.state.popupType?this._renderPopup():this._renderTooltip()))},t}(i.Component);var Nn=n(9327),Un=n(5900);function On(e,t){var n=t[0],r=t[1],o=[n[1]-r[1],r[0]-n[0],n[0]*r[1]-r[0]*n[1]],i=[o[1],-o[0],e[1]*o[0]-e[0]*o[1]],a=o[0]*i[1]-i[0]*o[1];return[(i[2]*o[1]-o[2]*i[1])/a,(i[0]*o[2]-o[0]*i[2])/a]}function Fn(e,t,n){var r=t[0],o=t[1],i=n[0]-r,a=n[1]-o,s=i*i+a*a,c=0;0!==s&&(c=((e[0]-r)*i+(e[1]-o)*a)/s,c=Math.max(0,Math.min(1,c)));var u=r+c*i,l=o+c*a,d=e[0]-u,p=e[1]-l;return Math.sqrt(d*d+p*p)}function Bn(e,t,n,r,o){for(var i=0;i<e.length-1;i++){var a=[e[i],e[i+1]];if(Fn((0,Un.f)(t,r),(0,Un.f)(a[0],r),(0,Un.f)(a[1],r))<n/2){var s=On(t,[a[0],a[1]]);return o?{point:s,segmentIndex:i}:s}}}var Hn,qn=(0,He.Z)("map-line-editor"),Gn=We.I.editing-3,Wn=We.I.editing-1,jn=We.I.editing-2,Vn=function(e){function t(t){var n;return(n=e.call(this,t)||this)._setLayers=function(e){var t=n.props.map,r=t.getLayers(),o=r.topRasterLayers,i=r.mainLayers,a=[].concat(o,i),s=n.props.config.uatraits.isMobile?"click":"fastclick";n.props.editorLayerOwner?(a.push(gt.Il),Hn=n.props.editorLayerOwner,t.events.on(s,gt.Il,n._onEditorLayerClick)):e&&(e.editorLayerOwner===Hn&&(a=a.filter((function(e){return e!==gt.Il})),Hn=void 0),t.events.off(s,gt.Il,n._onEditorLayerClick)),t.setLayers((0,gt.c8)(a,n.props.ymaps3.EventBlockerLayer,n.props.config))},n._onEditorLayerClick=function(e,t){n.props.onPointAdd(t.coordinates,n.props.points.length)},n._updatePoint=function(e,t,r){n.props.onPointUpdate&&void 0!==t&&n.props.onPointUpdate(e,t,Boolean(r))},n._onMouseMove=function(e){var t=n.props.map.convertScreenToWorldCoordinates(e).coordinates;if(n.props.onLineMouseMove&&n.props.onLineMouseMove(e,{coordinates:t}),n.props.polyLineCoordinates&&n.props.isActive&&void 0===n.state.draggingPoint){var r=Math.max.apply(Math,n.props.lineStyle.stroke.map((function(e){return e.width||0}))),o=Bn(n.props.polyLineCoordinates,t,r,n.props.map.zoom,!0);o&&"point"in o&&n.setState({previewPoint:o})}},n._onNewPointDragStart=function(){var e=n.state,t=n.props;if(e.previewPoint){var r=function(e,t,n){for(var r=0,o=15e-7,i=0;i<e.length-1;i++){var a=t[r];if(a&&(0,De.J)(a,e[i],o)&&(r+=1),i===n)return r}return r}(t.polyLineCoordinates,t.points,e.previewPoint.segmentIndex)||void 0;void 0!==r&&e.previewPoint.point&&(n.setState({draggingPoint:{index:r,point:e.previewPoint.point}}),t.onPointAdd(e.previewPoint.point,r))}},n._onExistingPointDragStart=function(e){n.props.points[e]&&n.setState({draggingPoint:{index:e,point:n.props.points[e]}})},n._onDragMove=function(e){var t=e.coordinates,r=n.state;r.draggingPoint&&(n.setState({draggingPoint:{index:r.draggingPoint.index,point:t}}),n._updatePoint(t,r.draggingPoint.index))},n._onDragEnd=function(){var e=n.state;e.draggingPoint&&(n.setState({draggingPoint:void 0,previewPoint:void 0}),n._updatePoint(e.draggingPoint.point,e.draggingPoint.index,!0))},n._onPointDoubleClick=function(e){n.props.isActive&&n.props.onPointRemove&&n.props.onPointRemove(e)},n._onPointClick=function(e){n.props.onPointClick&&n.props.onPointClick(e)},n._renderDraggingOrPreviewPoint=function(){var e=n.state,t=n.props,r=e.draggingPoint||e.previewPoint;if(!r||!t.isActive||t.config.uatraits.isMobile)return null;var o="segmentIndex"in r;return i.createElement(qe.Z,{coordinates:r.point,onDragStart:n._onNewPointDragStart,onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onMouseMove:n._onMouseMove,onMouseLeave:t.onPreviewPointMouseLeave,onClick:t.onPreviewPointClick,zIndex:o?Gn:Wn,draggable:t.isActive,dataSourceId:gt.UZ[t.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0},o?i.createElement("div",{className:qn("preview-point")},t.previewPointElement):n.props.renderPointElement("index"in r&&r.index||0))},n._renderPoints=function(){return n.props.points.map((function(e,t){return i.createElement(qe.Z,{key:t,onDragStart:function(){return n._onExistingPointDragStart(t)},onDragMove:n._onDragMove,onDragEnd:n._onDragEnd,onDoubleClick:function(){return n._onPointDoubleClick(t)},onClick:function(){return n._onPointClick(t)},coordinates:e,draggable:n.props.isActive,zIndex:jn,dataSourceId:gt.UZ[n.props.editorLayerOwner?"EDITOR_MARKERS":"DEFAULT_MARKERS"],blockEvents:!0,nonInteractive:!n.props.isActive},n.state.draggingPoint&&n.state.draggingPoint.index===t?null:n.props.renderPointElement(t))}))},n.state={},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._setLayers()},n.componentDidUpdate=function(e){e.editorLayerOwner!==this.props.editorLayerOwner&&this._setLayers(e)},n.render=function(){var e=this.props.editorLayerOwner?"EDITOR_GRAPHICS":"RASTER_GRAPHICS";return i.createElement(i.Fragment,null,this._renderDraggingOrPreviewPoint(),this._renderPoints(),i.createElement(Nn.Z,{drawingStyle:this.props.lineStyle,geometry:{type:"LineString",coordinates:this.props.polyLineCoordinates},onMouseMove:this._onMouseMove,onMouseEnter:this.props.onLineMouseEnter,onMouseLeave:this.props.onLineMouseLeave,dataSourceId:gt.UZ[e],onClick:this.props.onPreviewPointClick}))},t}(i.Component);const Yn=(0,yt.ZP)({shouldWait:!0})((0,M.ZP)(Vn));var Kn=n(1823),Xn={stroke:[{color:"#666",width:3,opacity:.7},{color:"#fff",width:5,opacity:.7}],fillOpacity:0,simplificationRate:0,zIndex:21},$n={stroke:[{color:"#666",width:0,opacity:0}],fill:"#666",fillOpacity:.3,simplificationRate:0,interactive:!0,cursor:"grab",zIndex:20},Qn=(0,He.Z)("ruler-view"),Jn=function(e){function t(t){var n;if((n=e.call(this,t)||this)._referencePointPositions=[],n._area=0,n._getGeometryApproximateCenter=function(e){var t=(0,kn.o)(e),n=(0,Rn.t)(t[0],t[1]);return(0,Zn.S)(t[0],n.startDirection,n.distance/2).endPoint},n._caclGeodesicLine=function(e){var t=e[0],r=e.slice(1);return("area"===n.props.type&&t?[].concat(r,[t]):r).reduce((function(e,t){return[].concat(e,(0,Pn.b)((0,Kn.g)([e.pop(),t])))}),t?[t]:[])},n._onPointAdd=function(e,t){n._updatePoints(t,e)},n._onPointUpdate=function(e,t){n._updatePoints(t,e,!0)},n._onPointRemove=function(e){n._updatePoints(e,void 0,!0)},n._updatePoints=function(e,t,o){if(n.props.onUpdate){var i=n.props.draggedPoints||n.props.points,a=i.slice(0,e);if(t&&a.push({coordinates:t,value:er(t,a[a.length-1]),showBalloon:i[e]&&i[e].showBalloon}),i.slice(e+(o?1:0)).forEach((function(e){a.push((0,r.Z)({},e,{value:er(e.coordinates,a[a.length-1])}))})),n._area=tr(n._caclGeodesicLine(a.map((function(e){return e.coordinates})))),a.length>1){var s=n._getGeometryApproximateCenter(a.map((function(e){return e.coordinates})));s&&(n._referencePointPositions=a.map((function(e){return(0,Rn.t)(s,e.coordinates)})))}n.props.onUpdate(a,a)}},n._togglePointBalloon=function(e){if(n.props.onUpdate){var t=n.props.points,o=(0,r.Z)({},t[e],{showBalloon:!t[e].showBalloon}),i=[].concat(t.slice(0,e),[o],t.slice(e+1));n.props.onUpdate(i)}},n._applyDragEvent=function(e){var t=n.props;if(t.onUpdate){var o=(t.draggedPoints||t.points).map((function(t,o){return(0,r.Z)({},t,{coordinates:(0,Zn.S)(e,n._referencePointPositions[o].startDirection,n._referencePointPositions[o].distance).endPoint})}));t.onUpdate(t.points,o)}},n._onBalloonDrag=function(e){var t=n.props,r=t.draggedPoints||t.points,o=(0,Rn.t)(r[r.length-1].coordinates,e.coordinates),i=n._getGeometryApproximateCenter(r.map((function(e){return e.coordinates}))),a=(0,Zn.S)(i,o.endDirection,o.distance).endPoint;n._applyDragEvent(a)},n._onFeatureDrag=function(e){if(n.props.onUpdate){var t=n._getGeometryApproximateCenter(e.coordinates[0]);t&&n._applyDragEvent(t)}},n._renderBalloon=function(e,t){var r=t===n.props.points.length-1,o="area"===n.props.type;if(o&&!r)return null;if(0===t||!e.showBalloon&&!r)return null;var a=o?n._area:e.value;return i.createElement(An,{key:t,coordinates:e.coordinates,value:a,measure:o?"quadratic":"linear",showControls:r,dataSourceId:n.props.isEnabled?gt.UZ.EDITOR_MARKERS:void 0,disableRuler:n.props.disableRuler,deletePoints:n.props.deletePoints,draggable:o&&Boolean(n.props.onUpdate),onDragStart:n._onBalloonDrag,onDragMove:n._onBalloonDrag,onDragEnd:n._onBalloonDrag})},n._renderPoint=function(){return i.createElement("div",{className:Qn("point")},i.createElement(Ve.Z,{name:"point"}))},n.state={geodesicLine:n._caclGeodesicLine(n.props.points.map((function(e){return e.coordinates})))},n.props.points.length>1){var o=n._getGeometryApproximateCenter(n.props.points.map((function(e){return e.coordinates})));o&&(n._referencePointPositions=n.props.points.map((function(e){return(0,Rn.t)(o,e.coordinates)})))}return n._area=tr(n._caclGeodesicLine(n.props.points.map((function(e){return e.coordinates})))),n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){if(e.points!==this.props.points||e.type!==this.props.type||this.props.draggedPoints!==e.draggedPoints){var t=this.props.draggedPoints||this.props.points;this.setState({geodesicLine:this._caclGeodesicLine(t.map((function(e){return e.coordinates})))})}},n.render=function(){var e=this.props.draggedPoints||this.props.points,t="area"===this.props.type;return i.createElement(i.Fragment,null,t?i.createElement(Nn.Z,{drawingStyle:$n,geometry:{type:"Polygon",coordinates:[this.state.geodesicLine]},draggable:Boolean(this.props.onUpdate),onDragStart:this._onFeatureDrag,onDragMove:this._onFeatureDrag,onDragEnd:this._onFeatureDrag,dataSourceId:this.props.isEnabled?gt.UZ.EDITOR_GRAPHICS:gt.UZ.RASTER_GRAPHICS}):null,i.createElement(Yn,{previewPointElement:i.createElement("div",{className:Qn("preview-point")}),renderPointElement:this._renderPoint,polyLineCoordinates:this.state.geodesicLine,points:e.map((function(e){return e.coordinates})),lineStyle:Xn,isActive:Boolean(this.props.onUpdate),onPointAdd:this._onPointAdd,onPointUpdate:this._onPointUpdate,onPointRemove:this._onPointRemove,onPointClick:this._togglePointBalloon,editorLayerOwner:this.props.isEnabled?"ruler":void 0}),e.map(this._renderBalloon))},t}(i.Component);function er(e,t){return t?t.value+(0,L.t)(e,t.coordinates):0}function tr(e){return wn({type:"Polygon",coordinates:[e]})}Jn.displayName="RulerComponent";const nr=(0,M.ZP)(Jn);var rr=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(nr,{type:e.ruler.type,points:e.ruler.points,isEnabled:e.ruler.isEnabled,onUpdate:function(t){return e.updateRuler({points:t})},deletePoints:function(){return e.updateRuler({points:[]})},disableRuler:function(){return e.updateRuler({points:[],isEnabled:!1})}})},t}(i.Component);const or=rr;var ir=n(7846),ar=n(3332),sr=n(3513),cr=(0,He.Z)("traffic-road-event-content-view"),ur=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props,t=this.props.event;if(!t.position)return null;var n=t.time_start||t.time_end,r=t.time_start_value&&t.tzOffset&&(0,F.wQ)(new Date(1e3*Number(t.time_start_value)),t.tzOffset)||void 0,o=t.time_end_value&&t.tzOffset&&(0,F.wQ)(new Date(1e3*Number(t.time_end_value)),t.tzOffset)||void 0;return i.createElement("div",{className:cr()},i.createElement("div",{className:cr("title")},(0,sr.t0)(this.props.event.type||"other")),t.description?i.createElement("div",{className:cr("description"),dangerouslySetInnerHTML:{__html:t.description}}):null,n?i.createElement("div",{className:cr("time"),dangerouslySetInnerHTML:{__html:r&&o?(0,ar.o0)(r,e.config)+" &mdash; "+(0,ar.o0)(o,e.config):r?(0,ar.o0)(r,e.config):""}}):null,t.author?i.createElement("div",{className:cr("source")},i.createElement("span",{className:cr("source-label")},"Источник"),t.link?i.createElement("a",{className:cr("source-link"),href:t.link.href,target:"_blank"},t.author.name):null):null)},t}(i.Component);const lr=(0,M.ZP)(ur);function dr(e){var t,n;return(null===(t=e.query.l)||void 0===t?void 0:t.includes("trfe"))||(null===(n=e.userMap)||void 0===n?void 0:n.isTrafficShown)}function pr(e){return"atm"===e.query.rtm}function fr(e){var t;return null!==(t={auto:"auto",mt:"masstransit",pd:"pedestrian",bc:"bicycle"}[e.query.rtt])&&void 0!==t?t:"auto"}var mr=function(e){function t(t){var n,r,o;return(o=e.call(this,t)||this)._loadStaticLayerAction=void 0,o._updateVersionFromStaticLayers=function(e){e.trf&&e.trfe&&o.setState({actualVersion:e.trf.version,roadEventsVersion:e.trfe.version})},o.state={actualVersion:null===(n=t.config.layers.trf)||void 0===n?void 0:n.version,roadEventsVersion:null===(r=t.config.layers.trfe)||void 0===r?void 0:r.version},o}(0,o.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),p.Z.cancel(this._loadStaticLayerAction)},n._shouldUpdateLayer=function(e){return e.mapLocation!==this.props.mapLocation},n._updateLayer=function(){e.prototype._updateLayer.call(this),this._updateStaticLayer()},n._onLayerLoad=function(e){var t,n,r=P.actual.getLevel(e.timezone.ids,this.props.config);null===(t=(n=this.props).onLayerLoaded)||void 0===t||t.call(n,e),this._loadLevel(r)},n._updateStaticLayer=function(){p.Z.cancel(this._loadStaticLayerAction),this._loadStaticLayerAction=p.Z.create(on.getLayers({layers:["trf","trfe"]},this.props.config),{success:this._updateVersionFromStaticLayers})},n.render=function(){var e=this.state;return this.props.children({actualVersion:e.actualVersion,roadEventsVersion:e.roadEventsVersion})},t}(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._loadLayerAction=void 0,t._loadLevelAction=void 0,t._updateTimer=-1,t._onLayerDataLoad=function(e){var n,r,o=t.props;e&&e.timezone?null===(n=(r=t)._onLayerLoad)||void 0===n||n.call(r,e):o.onTrafficLevelChange(null)},t}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._updateLayer(),this._updateTimer=window.setInterval((function(){return e._updateLayer()}),12e4)},n.componentDidUpdate=function(e){this._shouldUpdateLayer(e)&&this._updateLayer()},n.componentWillUnmount=function(){window.clearInterval(this._updateTimer),p.Z.cancel(this._loadLayerAction),p.Z.cancel(this._loadLevelAction)},n._loadLevel=function(e){p.Z.cancel(this._loadLevelAction);var t=this.props;this._loadLevelAction=p.Z.create(e,{success:function(e){return t.onTrafficLevelChange(e.level)},fail:function(){return t.onTrafficLevelChange(null)}})},n._updateLayer=function(){p.Z.cancel(this._loadLayerAction),this._loadLayerAction=p.Z.create(on.getLayer({layer:"trf",center:this.props.mapLocation.center,zoom:this.props.mapLocation.zoom},this.props.config),{success:this._onLayerDataLoad})},t}(i.Component));const vr=(0,M.ZP)(mr);var hr=n(7048),gr=n(9598),yr=n(6752);const _r=function(e){return i.createElement(yr.Z,{type:"mapNode"},i.createElement(Ge.ZP,(0,r.Z)({},e),e.children))};function br(e){return[.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])]}var wr=n(7689);function Er(e,t){var n=br(e),r=br(t),o=(0,wr.j)(e),i=(0,wr.j)(t);return Math.abs(n[0]-r[0])<.5*(o[0]+i[0])&&Math.abs(n[1]-r[1])<.5*(o[1]+i[1])}var Sr=n(350);const Cr={getTimings:function(e,t){var n=new RegExp("/tiles\\?.*l=("+e.join("|")+")"),r=6e5,o=Sr.Z.getResourcesTimings((function(e){return n.test(e)})).filter((function(e){var n=v.parse(e.name),o=[[256*Number(n.x),256*Number(n.y)],[256*(Number(n.x)+1),256*(Number(n.y)+1)]];return Er(t,o)&&e.responseEnd<r&&e.responseEnd>0&&e.duration<r&&e.duration>=0}));if(0!==(o=o.filter((function(e,t){var n=e.name;return o.findIndex((function(e){return e.name===n}))===t}))).length){o.sort((function(e,t){return t.responseEnd-e.responseEnd}));var i=o.reduce((function(e,t){return e+t.duration}),0);return{averageDuration:Math.round(i/o.length),minLoadEnd:Math.round(o[o.length-1].responseEnd),medianaLoadEnd:Math.round(o[Math.floor(o.length/2)].responseEnd),maxLoadEnd:Math.round(o[0].responseEnd)}}}};var kr=n(8216);const Rr=function(e){return e.ready?i.createElement(yr.Z,{type:"timingNode"},i.createElement(Ge.ZP,{name:e.type,nodeState:(0,r.Z)({ready:e.ready},e.extraState)},e.children)):null};var Zr=kr.$j((function(e){return{config:e.config,isSidebarCollapsed:D.XA(e)}})),Pr=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){if("distribution_fullscreen"!==this.props.type){if(!t.isTimingLogged){var e=this.props,n=e.config.pageMode;("search-result"===e.config.pageMode||e.config.uatraits.isMobile&&"orgpage"===e.config.pageMode)&&(n="search"),"metro_page"===e.type&&(n="metro"),function(e){switch(e){case"routes_page":return"routes";case"org_page":return"orgpage";case"discovery_page":return"discovery";case"home_page":case"distribution_fullscreen":return"home";case"panorama_page":return"panoramas";case"photos_page":return"photos";case"search_card_page":case"search_list_page":return"search";case"traffic_page":return"traffic";case"masstransit_stop_page":case"masstransit_route_page":return"masstransit";case"catalog_page":return"catalog";case"metro_page":return"metro"}}(e.type)===n&&(t.isTimingLogged=!0,e.isSidebarCollapsed||this.setState({ready:Sr.Z.getTimeToNow()}))}}else this.setState({ready:Sr.Z.getTimeToNow()})},n.render=function(){var e=this.props.type;if("undefined"==typeof window)return null;var t=window._maps_internal_timingsMarks;return i.createElement(Rr,{type:e,ready:this.state.ready,extraState:{show:t&&e in t?t[e]:this.state.ready}})},t}(i.PureComponent);Pr.isTimingLogged=!1;const Mr=Zr(Pr);var Ir=n(5733);const xr=(0,vt.Z)(M.ZP,Wt.ZP)(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._memoizedCreateHotspotFetchFunction=K(Ir.R),t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.config,n=t.hosts.roadEventsRenderer,r=n+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&v=%v&format=protobuf",o=n+"1.1/tiles?trf&%n&%l&%c&v=%v";return i.createElement(Rt,{layer:"trfe",dataSource:{type:"tile",vector:(0,gt.x8)({priority:"medium",tileUrl:(0,gt.pr)(r.replace("%n","l=trfe"),t.lang,e.roadEventsVersion),imageUrl:n+"icons?id={{id}}&scale={{scale}}",glyphRangeUrl:t.hosts.vectorGlyphs.replace("{{lang}}",t.lang),theme:(0,gt.gh)(e.theme)},t),raster:{tileUrl:(0,gt.pp)((0,gt.pr)(o.replace("%n","l=trfe"),t.lang,e.roadEventsVersion),t),fetchHotspots:this._memoizedCreateHotspotFetchFunction((0,gt.pp)((0,gt.c1)((0,gt.pr)(o.replace("%n","l=trje")+"&format=json",t.lang,e.roadEventsVersion),t),t)),transparent:!0},zoomRange:e.zoomRange},onClick:e.onClick})},t}(i.Component));var Tr=(0,vt.Z)(M.ZP,Wt.ZP),Lr=!0;const Dr=Tr(function(e){function t(t){var n;(n=e.call(this,t)||this)._onTilesReady=function(){if(!n.state.tilesReady){var e=n.props,t=(0,hr.n)(e.mapLocation.bounds,e.mapLocation.zoom);if(n.setState({tilesReady:!0}),Lr){var r=Cr.getTimings(["trf"],t);r&&n.setState({tilesTimings:r}),Lr=!1}}},n._countTrafficModeChange=function(){gr.Z.reachGoal("traffic")},n._renderLayer=function(){var e=n.props,t=e.config;if(!t.layers.trf)return null;var r=t.layers.trf.zoomRange?{min:t.layers.trf.zoomRange[0],max:t.layers.trf.zoomRange[1]}:void 0;if("traffic#actual"===e.providerKey){var o=t.hosts.traffic+"2.x/tiles?trf&%n&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",a=t.hosts.traffic+"1.1/tiles?trf&%n&%l&%c&tm=%v";return i.createElement(i.Fragment,null,i.createElement(Rt,{layer:"trf",dataSource:{type:"tile",vector:(0,gt.x8)({priority:"medium",tileUrl:(0,gt.pr)(o.replace("%n","l=trf"),t.lang,e.actualVersion),imageUrl:t.hosts.traffic+"icons/{{id}}?scale={{scale}}&id={{id}}",theme:(0,gt.gh)(e.theme)},t),raster:{tileUrl:(0,gt.pp)((0,gt.pr)(a.replace("%n","l=trf"),t.lang,e.actualVersion),t),transparent:!0},zoomRange:r}}),e.showRoadEvents?i.createElement(xr,{onClick:e.onClick,zoomRange:r,roadEventsVersion:e.roadEventsVersion}):null)}return"traffic#archive"===e.providerKey?i.createElement(Rt,{layer:"trfa",dataSource:{type:"tile",raster:{tileUrl:(0,gt.pp)((0,gt.pr)(t.hosts.trafficArchive+"tiles?trj&l=trf&%l&%c&tm=%v",t.lang,e.archiveVersion),t),transparent:!0},vector:(0,gt.x8)({priority:"medium",tileUrl:(0,gt.pr)(t.hosts.trafficArchive+"2.x/tiles?trf&l=trf&%l&x={{x}}&y={{y}}&z={{z}}&tm=%v&format=protobuf",t.lang,e.archiveVersion),imageUrl:t.hosts.trafficArchive+"icons?id={{id}}&scale={{scale}}",theme:(0,gt.gh)(e.theme)},t),zoomRange:r}}):null};var r=t.config.query;return Lr=Lr&&r.l&&r.l.split(",").includes("trf"),n.state={tilesReady:!1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._countTrafficModeChange()},n.componentDidUpdate=function(e){var t=this.props;e.providerKey!==t.providerKey&&this._countTrafficModeChange()},n.componentWillUnmount=function(){Lr=!1},n.render=function(){var e=this.props,t=this.state;return i.createElement(i.Fragment,null,i.createElement(_t.Z,{onReady:this._onTilesReady}),this._renderLayer(),i.createElement(_r,{name:"traffic_layer",nodeState:{providerKey:e.providerKey}}),i.createElement(Rr,{type:"traffic_tiles",ready:t.tilesTimings?t.tilesTimings.averageDuration:void 0,extraState:t.tilesTimings}),this.state.tilesReady&&this.props.logTilesReady?i.createElement(Mr,{type:"traffic_page"}):null)},t}(i.Component));var zr={main:16,side:0},Ar=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content?i.createElement(ir.Z,{displayType:t._getDisplayType(),mapLocation:t.props.mapLocation,coordinates:t.props.content.data.coordinates,onClose:t.props.resetContentData,updateLocationRequest:t.props.updateLocationRequest,offset:zr,mapSize:t.props.mapSize},i.createElement(lr,{event:t.props.content.data.event})):null},t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props,t=dr(e.config);return i.createElement(i.Fragment,null,i.createElement(vr,{mapLocation:e.mapLocation,onTrafficLevelChange:e.onTrafficLevelChange},(function(n){return i.createElement(Dr,{providerKey:"traffic#actual",mapLocation:e.mapLocation,actualVersion:n.actualVersion,onClick:e.onClick,showRoadEvents:t,roadEventsVersion:n.roadEventsVersion})})),this._renderContent())},t}(i.Component);const Nr=(0,M.ZP)(Ar);var Ur=n(2815),Or={};function Fr(e,t){if(!t.offset||!t.size)return{left:0,right:0,bottom:0,top:0};var n=t.offset[0],r=t.offset[0],o=t.offset[1],i=t.offset[1]+t.size.height;return"MASSTRANSIT"===e.pinType&&(n+=e.rotated?-t.size.width:-7,r+=e.rotated?7:t.size.width),"CONSTRUCTION"===e.pinType&&(n+=-10,r=r+t.size.width+-10,o+=-30,i+=-30),"ROUTEPOINT"===e.pinType&&(n-=t.size.width/2,r+=t.size.width/2,o=o+8-10,i+=8),"SPECIAL"===e.pinType&&(n+=-12,r=r+t.size.width+-12,o+=-24,i+=-24),{left:n,right:r,top:o,bottom:i}}function Br(e,t,n,r){return Promise.all(e.map((function(e){return function(e,t,n,r){var o=Gr(e);return Or[o]=Or[o]||(0,Ur.Z)((function(){return t(e)}),r),Or[o].then((function(t){var r=(0,Un.f)(n.bounds[0],n.zoom),o=(0,Un.f)(e.coordinates,n.zoom);return{size:t,offset:[o[0]-r[0],o[1]-r[1]]}}))}(e,t,n,r)}))).then((function(t){return e.map((function(n,r){return function(e,t,n){var r=e[n],o=t[n];if(!o.offset||!o.size)return[];var i=Fr(r,o);return i.left===i.right||i.top===i.bottom?[]:e.reduce((function(e,n,o){if(r===n)return e;var a=t[o];if(!a.offset||!a.size)return e;var s=Fr(n,a);return s.left===s.right||s.top===s.bottom?e:Er([[i.left,i.top],[i.right,i.bottom]],[[s.left,s.top],[s.right,s.bottom]])?e.concat(o):e}),[])}(e,t,r)}))}))}function Hr(e,t,n,r){return Br(e,t,n,r).then((function(e){return e.every((function(e){return 0===e.length}))}))}function qr(e,t,n,r,o,i){return new Promise((function(a){if(1===e.length)a({pins:e,optimized:!0});else if(o>10)a({pins:e,optimized:!1});else{var s=t(e);Hr(s.pins,n,r,i).then((function(e){e?a({pins:s.pins,optimized:!0}):s.isFinished?s.isFinished&&a({pins:s.pins,optimized:!1}):a(qr(s.pins,t,n,r,o++,i))}))}}))}function Gr(e){switch(e.pinType){case"CONSTRUCTION":return e.coordinates.join(",")+e.pinType;case"MASSTRANSIT":return(e.balloonItems&&String(e.balloonItems.length)||"0")+(e.text||"")+(e.dotSize||"")+(e.rotated||"")+e.pinType+e.coordinates.join(",")+e.pinIndex;case"ROUTEPOINT":return(String(e.index)||0)+(e.value||"")+e.pinType+(e.isLast&&"last");case"SPECIAL":return e.coordinates.join(",")+e.position+e.pinType}}function Wr(e){switch(e.pinType){case"CONSTRUCTION":case"MASSTRANSIT":case"SPECIAL":return Gr(e);case"ROUTEPOINT":return(String(e.index)||0)+e.pinType+(e.isLast&&"last")}}var jr=n(111),Vr="ROUTEPOINT",Yr="MASSTRANSIT",Kr="CONSTRUCTION",Xr="SPECIAL",$r=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updateMapLocationThrottled=void 0,n._validityChecksCounter=0,n._processingTimeout=0,n._routeComponentProcessingFunction=function(e,t){return 1===e.length?Promise.resolve(e):function(e,t,n){return t.reduce((function(e,t){return e.then((function(e){return e.optimized?e:n(e.pins,t)}))}),Promise.resolve({pins:e,optimized:!1}))}(e.sort((function(e,t){return e.pinIndex>t.pinIndex?1:-1})),n.props.algoSteps,t).then((function(e){return e.pins}))},n._updatePins=function(){n._validityChecksCounter=0,window.clearTimeout(n._processingTimeout),n._validateDrawing(n.props.unprocessedPins.map((function(e,t){return(0,r.Z)({pinIndex:t},e)})))},n._collectAndProcessGroups=function(e){var t=n.state.mapLocation,r=n.props.config;Br(e,n.props.getNodeByPin,t,r).then((function(o){var i=function(e){for(var t=new Array(e.length).map((function(){return!1})),n=[],r=0;r<e.length;r++)if(!t[r]){var o=[r],i=[r];for(t[r]=!0;o.length>0;)for(var a=e[o.pop()],s=0;s<a.length;++s){var c=a[s];t[c]||(t[c]=!0,o.push(c),i.push(c))}n.push(i)}return n}(o).map((function(o){var i=o.map((function(t){return e[t]}));return n._routeComponentProcessingFunction(i,(function(e,o){return qr(e,o,n.props.getNodeByPin,t,0,r)}))}));Promise.all(i).then((function(e){var t=e.reduce((function(e,t){return e.concat(t)}));n._validateDrawing(t)}))}))},n._updateMapLocation=function(){var e=n.props.map.zoom;Math.abs(n.state.mapLocation.zoom-e)<.25||n.setState({mapLocation:(0,s.cx)(n.props.map)})},n._onMapUpdate=function(){n._updateMapLocationThrottled()},n._validateDrawing=function(e){n._validityChecksCounter+=1;var t=n.props.filterPinsByZoom(e,n.state.mapLocation.zoom);n._validityChecksCounter>=2?n.setState({pinsToDraw:t}):Hr(t,n.props.getNodeByPin,n.state.mapLocation,n.props.config).then((function(e){e?n.setState({pinsToDraw:t}):n._processingTimeout=window.setTimeout((function(){return n._collectAndProcessGroups(t)}),50)}))},n.state={pinsToDraw:[],mapLocation:(0,s.cx)(n.props.map)},n._updateMapLocationThrottled=(0,jr.Z)(n._updateMapLocation,300),n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._validityChecksCounter=0,this._validateDrawing(this.props.unprocessedPins.map((function(e,t){return(0,r.Z)({pinIndex:t},e)})))},n.componentDidUpdate=function(e,t){this.state.mapLocation.zoom===t.mapLocation.zoom&&this.props.unprocessedPins===e.unprocessedPins||this._updatePins()},n.componentWillUnmount=function(){window.clearTimeout(this._processingTimeout)},n.render=function(){var e=this;return i.createElement(i.Fragment,null,this.state.pinsToDraw.map((function(t){var n=e.props.getMapPlacemarkProps(t);return n?i.createElement(qe.Z,(0,r.Z)({key:Wr(t)},n),e.props.getNodeByPin(t)):null})),i.createElement(_t.Z,{onUpdate:this._onMapUpdate}))},t}(i.Component);const Qr=(0,yt.ZP)({shouldWait:!0})((0,M.ZP)($r));var Jr=n(4306),eo=n.n(Jr),to=n(8496),no=n.n(to),ro=n(285),oo=n.n(ro),io=n(5503),ao=n.n(io),so=n(634),co={fallback:{small:"subway-fallback-16",normal:"subway-fallback-24"},adana:{small:"subway-adana-16",normal:"subway-adana-24"},almaty:{small:"subway-almaty-16",normal:"subway-almaty-24"},ankara:{small:"subway-ankara-16",normal:"subway-ankara-24"},athens:{small:"subway-athens-16",normal:"subway-athens-24"},baku:{small:"subway-baku-16",normal:"subway-baku-24"},barcelona:{small:"subway-barcelona-16",normal:"subway-barcelona-24"},berlin:{small:"subway-berlin-16",normal:"subway-de-ubahn-24"},bucharest:{small:"subway-bucharest-16",normal:"subway-bucharest-24"},budapest:{small:"subway-budapest-16",normal:"subway-budapest-24"},bursa:{small:"subway-bursa-16",normal:"subway-bursa-24"},dnipro:{small:"subway-dnepropetrovsk-16",normal:"subway-dnepropetrovsk-24"},dubai:{small:"subway-dubai-metro-16",normal:"subway-dubai-metro-24"},ekaterinburg:{small:"subway-ekb-16",normal:"subway-ekb-24"},helsinki:{small:"subway-helsinki-16",normal:"subway-helsinki-24"},istanbul:{small:"subway-istanbul-16",normal:"subway-istanbul-24"},izmir:{small:"subway-izmir-16",normal:"subway-izmir-24"},kazan:{small:"subway-kazan-16",normal:"subway-kazan-24"},kharkiv:{small:"subway-kharkov-16",normal:"subway-kharkov-24"},kiev:{small:"subway-kiev-16",normal:"subway-kiev-24"},kyiv:{small:"subway-kiev-16",normal:"subway-kiev-24"},lisbon:{small:"subway-lisboa-16",normal:"subway-lisbon-24"},london:{small:"subway-london-16",normal:"subway-london-underground-24"},madrid:{small:"subway-madrid-16",normal:"subway-madrid-24"},minsk:{small:"subway-minsk-16",normal:"subway-minsk-24"},moscow:{small:"subway-msk-16",normal:"subway-msk-24"},"moscow-mcd":{small:"subway-msk-16",normal:"subway-msk-24"},"nizhny-novgorod":{small:"subway-nn-16",normal:"subway-nn-24"},novosibirsk:{small:"subway-nsk-16",normal:"subway-nsk-24"},oslo:{small:"subway-oslo-16",normal:"subway-oslo-24"},paris:{small:"subway-paris-16",normal:"subway-paris-metro-24"},praga:{small:"subway-prague-metro-16",normal:"subway-prague-24"},rome:{small:"subway-roma-16",normal:"subway-roma-24"},"saint-petersburg":{small:"subway-spb-16",normal:"subway-spb-24"},samara:{small:"subway-samara-16",normal:"subway-samara-24"},"san-francisco":{small:"subway-san-francisco-metro-16",normal:"subway-san-francisco-metro-24"},santiago:{small:"subway-santiago-16",normal:"subway-santiago-24"},sofia:{small:"subway-sofia-metro-16",normal:"subway-sofia-metro-24"},stockholm:{small:"subway-stockholm-16",normal:"subway-stockholm-24"},tashkent:{small:"subway-tashkent-16",normal:"subway-tashkent-24"},tbilisi:{small:"subway-tbilisi-16",normal:"subway-tbilisi-24"},tokyo:{small:"subway-tokyo-metro-16",normal:"subway-tokyo-metro-24"},vienna:{small:"subway-wein-16",normal:"subway-wein-24"},volgograd:{small:"subway-tram-volgograd-16",normal:"subway-volgograd-tram-24"},warsaw:{small:"subway-warsaw-metro-16",normal:"subway-warsaw-24"},yekaterinburg:{small:"subway-ekb-16",normal:"subway-ekb-24"},yerevan:{small:"subway-erevan-16",normal:"subway-erevan-24"}},uo=Object.entries({bus:{normal:"bus-16"},minibus:{normal:"minibus-16"},tramway:{normal:"tram-16"},trolleybus:{normal:"trolley-16"},water:{normal:"ship-16"},underground:{normal:"subway-icon-fallback-16"},cable:{normal:"cableway-16"},aero:{normal:"aero-16"},aeroexpress:{normal:"aeroexpress-16"},funicular:{normal:"funicular-16"},train:{normal:"train-16"},suburban:{normal:"train-16"},railway:{normal:"train-16"},fallback:{normal:"unknown-16"}}).reduce((function(e,t){var n=t[0],r=t[1];return e[n]=null==r?void 0:r.normal,e}),{walk:"pedestrian-16"}),lo=n(2402),po=(0,He.Z)("masstransit-route-pin-view"),fo=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._onClick=function(e){var n=t.props,r=e||n.balloonItems&&n.balloonItems[0].stopId;r&&n.onClick&&n.onClick({coordinates:n.coordinates,id:r})},t._renderBalloonItem=function(e){var n,r="underground"===e.iconType&&e.city?null===(n=co[e.city])||void 0===n?void 0:n.small:"metro-exit"===e.iconType?void 0:uo[e.iconType];return i.createElement(lo.Z,{className:po("balloon-item",{type:e.iconType}),style:{backgroundColor:"underground"!==e.iconType?e.color:void 0},onClick:function(){return t._onClick(e.stopId)}},r?i.createElement(Ve.Z,{inline:!0,className:po("balloon-icon"),name:r}):null,["suburban","aeroexpress"].includes(e.iconType)?null:i.createElement("div",{className:po("balloon-text"),style:{backgroundColor:e.color}},e.text))},t._renderBalloon=function(){var e=t.props.balloonItems;return e?i.createElement("div",{className:po("balloon")},t._renderBalloonItem(e[0]),e[1]?i.createElement(i.Fragment,null,i.createElement(Ve.Z,{name:"arrow-right-8",className:po("arrow"),inline:!0}),t._renderBalloonItem(e[1])):null):null},t._renderText=function(){return t.props.text?i.createElement(lo.Z,{tag:"span",className:po("text"),onClick:function(){return t._onClick()}},t.props.text):null},t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.balloonItems&&t.balloonItems[t.balloonItems.length-1].color||t.dotColor,r=t.dotSize||"normal";return i.createElement("div",{className:po({rotated:t.rotated,double:t.balloonItems&&2===t.balloonItems.length,clickable:Boolean(t.onClick)})},i.createElement("div",{className:po("container")},i.createElement("div",{"aria-hidden":!0,className:po("dot",{size:r}),style:{background:n},onClick:function(){return e._onClick()}}),this._renderBalloon()),this._renderText())},t}(i.PureComponent);const mo=(0,M.ZP)(fo);var vo=n(9410),ho=n(9164),go=n.n(ho),yo=n(1855),_o=n.n(yo),bo=(0,He.Z)("waypoint-pin-view"),wo=function(e){function t(t){var n;(n=e.call(this,t)||this)._getServiceIconUrl=function(){var e=n.props;return e.serviceType&&"geolocation"!==e.serviceType?Ye.Gr({type:"service",name:e.serviceType,size:e.mobileChooseMode?"normal":"small"},e.config):null},n._getRubricIconUrl=function(){var e=n.props;if(e.searchResult){var t,r;if("categories"in e.searchResult&&e.searchResult.categories)t=null===(r=e.searchResult.categories[0])||void 0===r?void 0:r.class;else"kind"in e.searchResult&&(t=e.searchResult.kind);if(t)return Ye.Gr({type:"rubrics",name:t,size:e.mobileChooseMode?"normal":"small"},e.config)||void 0}},n._renderText=function(){if(!n.props.text)return null;var e=(0,vo.Z)(n.props.text,{length:40});return i.createElement("div",{className:bo("text")},e.split(" ").map((function(e,t){return i.createElement("span",{key:t,className:bo("word")},e)})))},n._renderWaypoint=function(){var e=n.props,t=n.state;return i.createElement(i.Fragment,null,i.createElement(et.Z,{url:e.mobileChooseMode?_o():go(),className:bo("pin-icon")}),i.createElement(et.Z,{url:t.currentIconUrl,key:t.currentIconUrl,className:bo("rubric-icon",{"mobile-choose":e.mobileChooseMode,current:!0,type:e.serviceType})}),t.temporaryIconUrl?i.createElement(et.Z,{url:t.temporaryIconUrl,key:t.temporaryIconUrl,className:bo("rubric-icon",{"mobile-choose":e.mobileChooseMode,temporary:!0})}):null,n._renderText())},n._renderIntermediatePoint=function(){var e=n.props;return i.createElement(i.Fragment,null,i.createElement("div",{className:bo("content")},i.createElement("span",{className:bo("index")},e.index)),n._renderText())};var r=Ye.Gr({type:"rubrics",name:"fallback",size:t.mobileChooseMode?"normal":"small"},t.config),o=n._getServiceIconUrl()||n._getRubricIconUrl()||r;return n.state={temporaryIconUrl:null,currentIconUrl:o},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props,n=this._getServiceIconUrl()||this._getRubricIconUrl();(t.serviceType||t.searchResult!==e.searchResult)&&n&&n!==this.state.currentIconUrl&&this.setState({temporaryIconUrl:this.state.currentIconUrl,currentIconUrl:n})},n.render=function(){var e=this.props,t=0===e.index,n=!t&&!e.isLast&&!e.mobileChooseMode;return"geolocation"===e.serviceType&&e.config.uatraits.isMobile?i.createElement("div",{className:bo({geolocation:!0})}):i.createElement("div",{className:bo({disabled:e.disabled,first:t,last:e.isLast,intermediate:n,"mobile-choose":e.mobileChooseMode})},n?this._renderIntermediatePoint():this._renderWaypoint())},t}(i.Component);const Eo=(0,M.ZP)(wo);var So=n(2208);function Co(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)}function ko(e){var t=e.filter((function(e){return"CONSTRUCTION"===e.pinType&&["STAIRS_UP","STAIRS_DOWN","STAIRS_UNKNOWN"].includes(e.type)}));if(t.length<2)return{pins:e,isFinished:!0};var n=e.findIndex((function(e){return Co(e)})),r=(0,f.Z)(e[n],{type:"STAIRS_UNKNOWN"}),o=e.filter((function(e){return!Co(e)})).concat(r);return{pins:o,isFinished:!0}}function Ro(e){var t=e.filter((function(e){return"CONSTRUCTION"===e.pinType}));if(t.length<2)return{pins:e,isFinished:!0};var n=e.findIndex((function(e){return"CONSTRUCTION"===e.pinType})),r=e.filter((function(e){return"CONSTRUCTION"!==e.pinType})).concat(e[n]);return{pins:r,isFinished:!0}}function Zo(e){return{pins:e.filter((function(e){return"CONSTRUCTION"!==e.pinType})),isFinished:!0}}function Po(e){return{pins:e.filter((function(e){return"MASSTRANSIT"!==e.pinType||"balloonItems"in e&&e.balloonItems||"dotSize"in e})),isFinished:!0}}function Mo(e){var t=e.findIndex((function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems}));if(-1!==t){var n=[].concat(e),r=n[t];return n[t]=(0,f.Z)(n[t],{balloonItems:void 0,dotColor:r.balloonItems&&r.balloonItems[r.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0}),{pins:n,isFinished:!1}}return{pins:e,isFinished:!0}}function Io(e){return{pins:e.filter((function(e){var t;return"MASSTRANSIT"!==e.pinType||!e.balloonItems||"metro-exit"!==(null===(t=e.balloonItems[0])||void 0===t?void 0:t.iconType)})),isFinished:!0}}function xo(e){var t=No(e);return t?Ao(t,e):{pins:e,isFinished:!0}}function To(e){var t=e.reduce((function(e,t,n){return"MASSTRANSIT"===t.pinType?e.concat(n):e}),[]);return Ao(t.length>2?t.slice(0,3):t.slice(0,2),e)}function Lo(e){var t=No(e);return t?function(e,t){var n=e[0],o=e[1],i=t[n],a=t[o];if("MASSTRANSIT"!==i.pinType||"MASSTRANSIT"!==a.pinType)return{pins:t,isFinished:!0};if(!i.balloonItems||!a.balloonItems)return{pins:t,isFinished:!0};var s=i.balloonItems[0].initialText===a.balloonItems[0].initialText&&i.balloonItems[0].color===a.balloonItems[0].color;return t[o]=s?(0,f.Z)(a,(0,r.Z)({},i,{pinIndex:a.pinIndex,rotated:!1})):(0,f.Z)(a,{rotated:!1,text:"",balloonItems:[i.balloonItems[0],a.balloonItems[0]]}),{pins:t.filter((function(e){return e.pinIndex!==i.pinIndex})),isFinished:!1}}(t,e):{pins:e,isFinished:!0}}function Do(e){var t=e.findIndex((function(e,t,n){var r=n[t+1];return r&&"MASSTRANSIT"===e.pinType&&"MASSTRANSIT"===r.pinType&&e.text===r.text})),n=-1!==t?[e[t],e[t+1]]:[];return 2===n.length&&"MASSTRANSIT"===n[0].pinType&&"MASSTRANSIT"===n[1].pinType?n[0].balloonItems&&1===n[0].balloonItems.length&&n[1].balloonItems&&1===n[1].balloonItems.length&&n[0].balloonItems[0].color!==n[1].balloonItems[0].color?{pins:e,isFinished:!0}:{pins:[].concat(e.filter((function(e){return!n.includes(e)})),[n[1]]),isFinished:!0}:{pins:e,isFinished:!0}}function zo(e){return{pins:e.map((function(e){return"MASSTRANSIT"!==e.pinType||!e.balloonItems||2===e.balloonItems.length||e.first||"MASSTRANSIT"!==e.pinType||1!==e.balloonItems.length||e.first?e:(0,f.Z)(e,{balloonItems:void 0,dotColor:e.balloonItems&&e.balloonItems[e.balloonItems.length-1].color,dotSize:"none",rotated:!1,text:void 0})})),isFinished:!0}}function Ao(e,t){var n=e.map((function(e){return t[e].rotated?1:0})),r=Math.pow(2,n.length)-1,o=parseInt(n.join(""),2);return o<r?((o+1).toString(2).padStart(n.length,"0").split("").map(Number).map(Boolean).forEach((function(n,r){t[e[r]]=(0,f.Z)(t[e[r]],{rotated:n})})),{pins:t,isFinished:!1}):{pins:t,isFinished:!0}}function No(e){for(var t=e.map((function(e,t){return{pin:e,index:t}})).filter((function(e){var t=e.pin;return"MASSTRANSIT"===t.pinType&&t.balloonItems&&1===t.balloonItems.length})),n=[],r=1;r<t.length;r++)if(t[r-1].pin.pinIndex===t[r].pin.pinIndex-1){n.push(t[r-1],t[r]);break}return n.length>0?[n[0].index,n[1].index]:null}function Uo(e){var t=e.findIndex((function(e){return"MASSTRANSIT"===e.pinType&&e.balloonItems&&2===e.balloonItems.length}));if(-1===t)return{pins:e,isFinished:!0};var n=e[t];if("MASSTRANSIT"!==n.pinType||!n.balloonItems||2!==n.balloonItems.length)return{pins:e,isFinished:!0};var r={pinIndex:n.pinIndex-1,balloonItems:[n.balloonItems[0]],coordinates:n.balloonItems[0].initialCoordinates,last:!0,pinType:Yr,rotated:!1,text:n.balloonItems[0].initialText},o={pinIndex:n.pinIndex,balloonItems:[n.balloonItems[1]],coordinates:n.balloonItems[1].initialCoordinates,first:!0,pinType:Yr,rotated:!1,text:n.balloonItems[1].initialText},i=[].concat(e);return i.splice(t,1,r,o),{pins:i,isFinished:!1}}function Oo(e){return{pins:[].concat(e).map((function(e){return(0,f.Z)(e,{rotated:!1})})),isFinished:!0}}function Fo(e){if(e.filter((function(e){return"ROUTEPOINT"===e.pinType&&e.value})).length>1){var t=e.findIndex((function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0!==e.index&&!e.isLast})),n=[].concat(e);if(-1!==t)return n[t]=(0,f.Z)(n[t],{value:""}),{pins:n,isFinished:!1};var r=e.findIndex((function(e){return"ROUTEPOINT"===e.pinType&&e.value&&0===e.index}));if(-1!==r)return n[r]=(0,f.Z)(e[r],{value:""}),{pins:n,isFinished:!0}}return{pins:e,isFinished:!0}}function Bo(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter((function(e){return!("SPECIAL"===e.pinType&&"end"===e.position)})),isFinished:!0}}function Ho(e){if(e.length<2)return{pins:e,isFinished:!0};var t=e.filter((function(e){return"SPECIAL"!==e.pinType||["RAILWAY_CROSSING","SPEED_BUMP","BORDER_CROSSING"].includes(e.type)})),n=e.filter((function(e){return"SPECIAL"===e.pinType&&"FERRY"===e.type})),r=e.filter((function(e){return"SPECIAL"===e.pinType&&"TOLL_ROAD"===e.type})),o=e.filter((function(e){return"SPECIAL"===e.pinType&&"FORD_CROSSING"===e.type})),i=e.filter((function(e){return"SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type}));return n.length&&t.push(n[0]),r.length&&t.push(r[0]),o.length&&t.push(o[0]),i.length&&t.push(i[0]),{pins:t,isFinished:!0}}function qo(e){return e.length<2?{pins:e,isFinished:!0}:{pins:e.filter((function(e){return!("SPECIAL"===e.pinType&&"RUGGED_ROAD"===e.type)})),isFinished:!0}}function Go(e){return function(t){if(t.length<2)return{pins:t,isFinished:!0};var n=t.filter((function(t){return!("SPECIAL"===t.pinType&&t.type===e)}));if(!n.length){var r=t.filter((function(e,t){return t%2==0}));return{pins:r,isFinished:1===r.length}}return{pins:n,isFinished:!0}}}function Wo(e){return 0===e.length?{pins:e,isFinished:!0}:{pins:e.filter((function(e){return"SPECIAL"!==e.pinType})),isFinished:!0}}var jo={FORD_CROSSING:{ru:{begin:"poi-alerts-ford-crossing-24",end:"poi-alerts-ford-crossing-end-24"}},RUGGED_ROAD:{ru:{begin:"poi-alerts-road-rugged-24",end:"poi-alerts-rugged-end-24"}},TOLL_ROAD:{ru:{begin:"poi-alerts-pay-ru-24",end:"poi-alerts-pay-end-ru-24"},tr:{begin:"poi-alerts-pay-tr-24",end:"poi-alerts-pay-end-tr-24"},uk:{begin:"poi-alerts-pay-uah-24",end:"poi-alerts-pay-end-uah-24"},en:{begin:"poi-alerts-pay-usd-24",end:"poi-alerts-pay-end-usd-24"}},FERRY:{ru:{begin:"poi-alerts-ship-24",end:"poi-alerts-ship-end-24"}},RAILWAY_CROSSING:{ru:{single:"poi-alerts-railway-crossing-24"}},SPEED_BUMP:{ru:{single:"poi-alerts-speed-bump-24"}},BORDER_CROSSING:{ru:{single:"poi-alerts-border-24"}}},Vo={STAIRS_UP:eo(),STAIRS_DOWN:no(),STAIRS_UNKNOWN:oo(),GATES:ao()},Yo=(0,He.Z)("route-pins-view"),Ko=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updatePins=function(){n.setState({pins:[].concat(n._getRoutePointPins(),n._getMasstransitPins(),n._getConstructionPins(),n._getSpecialRoadPins())})},n._getUpdatedWaypointCoordinates=function(e,t){var r=n.props,o=r.routePoints.filter((function(e,t){return!r.viaIndexes.includes(t)}))[t];return r.routePoints.map((function(t){return o===t?e:t.coords}))},n._onDragStart=function(){n.props.setDragging(!0)},n._onDragMove=function(e,t){var r=n.props,o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!0})},n._onDragEnd=function(e,t){var r=n.props;r.setDragging(!1);var o=n._getUpdatedWaypointCoordinates(e,t);r.onRoutePointsChange&&r.onRoutePointsChange(o,{viaIndexes:r.viaIndexes,isRough:!1})},n._getMasstransitPins=function(){var e=n.props;return e.activeRoute&&"paths"in e.activeRoute?e.activeRoute.paths.reduce((function(t,n){return t.concat((r=n.segments,e.config,r.reduce((function(e,t){var n;if(!t.edgePoints||!t.transports)return e;var r=t.stops&&t.stops[0],o=t.stops&&t.stops[t.stops.length-1];return e.push({balloonItems:[Qo(t.transports,t.edgePoints[0],r)],pinType:Yr,coordinates:t.edgePoints[0],rotated:!1,first:!0,text:null==r?void 0:r.name},{pinType:Yr,dotColor:Xo(t.transports),coordinates:t.edgePoints[1]}),null!=o&&null!==(n=o.exit)&&void 0!==n&&n.name&&e.push({pinType:Yr,balloonItems:[$o(o.exit,o)],coordinates:o.exit.coordinates,rotated:!1,dotSize:"small",text:"Выход"}),e.push({pinType:Yr,balloonItems:[Qo(t.transports,t.edgePoints[1],o)],coordinates:t.edgePoints[1],rotated:!1,last:!0,text:null==o?void 0:o.name}),e}),[])));var r}),[]):[]},n._getMapPlacemarkProps=function(e){var t;switch(e.pinType){case"CONSTRUCTION":return{coordinates:e.coordinates,zIndex:We.I.routes};case"MASSTRANSIT":return{coordinates:e.coordinates,zIndex:We.I.routePins.masstransit,blockEvents:!0};case"ROUTEPOINT":var r=n.props,o=e;return o.coords?{zIndex:0===o.index?We.I.routePins.waypoint+1:o.isLast?We.I.routePins.waypoint+2:We.I.routePins.waypoint,coordinates:o.coords,draggable:r.draggable&&!o.disabled&&(!r.draggableIndexes||(null===(t=r.draggableIndexes)||void 0===t?void 0:t.includes(o.index))),onDragStart:n._onDragStart,onDragEnd:function(e){var t=e.coordinates;return n._onDragEnd(t,o.index)},onDragMove:function(e){var t=e.coordinates;return n._onDragMove(t,o.index)}}:null;case"SPECIAL":return{zIndex:We.I.routes,coordinates:e.coordinates}}},n._getConstructionPins=function(){var e=n.props;return e.activeRoute&&"constructions"in e.activeRoute?e.activeRoute.constructions.map((function(e){return(0,r.Z)({},e,{pinType:Kr})})):[]},n._getSpecialRoadPins=function(){var e=n.props;if(!e.activeRoute||!("specialRoadPoints"in e.activeRoute)||!e.activeRoute.specialRoadPoints)return[];var t=e.config.experiments.ui.showBorderCrossing?e.activeRoute.specialRoadPoints:e.activeRoute.specialRoadPoints.filter((function(e){return"BORDER_CROSSING"!==e.type}));return t.map((function(e){return(0,r.Z)({},e,{pinType:Xr})}))},n._getRoutePointPins=function(){var e=n.props,t="taxi"===e.travelMode,o=c.MW(e.travelMode,e.config),i=e.routePoints.every((function(e){return!e.coords||Boolean(e.input)}))&&!e.isRoutePointDragging;return e.routePoints.filter((function(t,n){return!e.viaIndexes.includes(n)})).map((function(e,n,a){var s=t&&0!==n&&n!==a.length-1||n>=o-1&&n!==a.length-1;return(0,r.Z)({},e,{pinType:Vr,coordinates:e.coords||[0,0],disabled:s,showText:i,index:n,isLast:n===a.length-1})}))},n._getConstructionNode=function(e){return i.createElement("div",{className:Yo("construction",{type:e.type})},i.createElement(et.Z,{url:Vo[e.type]}))},n._getSpecialRoadPinNode=function(e){var t=n.props.config,r=jo[e.type];if(!r)return null;var o=r[t.lang],a=(0,Ye.XT)(t)?r.ru:r.en,s=r.ru,c=o||a||s;return i.createElement("div",{className:Yo("special-road",{type:e.type,position:e.position})},i.createElement(Ve.Z,{name:c[e.position]}))},n._getMasstransitPinNode=function(e){var t=n.props,o=!t.activeRoute||"isIntercityRoute"in t.activeRoute&&t.activeRoute.isIntercityRoute||t.isMapEditing?void 0:t.onStopClick;return i.createElement(mo,(0,r.Z)({},e,{onClick:o}))},n._getWaypointPinNode=function(e){return i.createElement(Eo,{text:e.showText?e.value:void 0,index:e.index,isLast:e.isLast,disabled:e.disabled,searchResult:e.searchResult,serviceType:e.serviceType})},n._getRouteItemPinNode=function(e){switch(e.pinType){case"CONSTRUCTION":return n._getConstructionNode(e);case"MASSTRANSIT":return n._getMasstransitPinNode(e);case"ROUTEPOINT":return n._getWaypointPinNode(e);case"SPECIAL":return n._getSpecialRoadPinNode(e)}},n._getAlgoSteps=function(){var e=[ko,Ro,Zo],t=n.props.activeRoute&&"masstransit"===n.props.activeRoute.type?[Po,Do,xo,Io,Oo,xo,Lo,zo,Uo,zo,Oo,To,Oo,Mo]:[],r=[Fo],o=[Go("SPEED_BUMP"),Go("RAILWAY_CROSSING"),qo,Go("TOLL_ROAD"),Go("FERRY"),Go("FORD_CROSSING"),Bo,Ho,Go("BORDER_CROSSING"),Wo];return[].concat(e,t,r,o)},n._filterPinsByZoom=function(e,t){return e.filter((function(e){return!("SPECIAL"===e.pinType&&"SPEED_BUMP"===e.type&&t<12)}))},n.state={pins:[]},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.activeRoute===e.activeRoute&&this.props.routePoints===e.routePoints||this._updatePins()},n.componentDidMount=function(){this._updatePins()},n.render=function(){return i.createElement(i.Fragment,null,i.createElement(Qr,{unprocessedPins:this.state.pins,getNodeByPin:this._getRouteItemPinNode,getMapPlacemarkProps:this._getMapPlacemarkProps,algoSteps:this._getAlgoSteps(),filterPinsByZoom:this._filterPinsByZoom}),this.state.pins.filter((function(e){return e.pinType===Vr})).map((function(e){var t,n=e.uri||(null===(t=e.searchResult)||void 0===t?void 0:t.uri);return n?i.createElement(so.Z,{key:n,uri:n}):null})))},t}(i.Component);function Xo(e){var t=c.Sk(e);return So.Sm(t)}function $o(e,t){return{iconType:"metro-exit",color:"#666",text:e.name,initialCoordinates:e.coordinates,initialText:e.name,stopId:null==t?void 0:t.id}}function Qo(e,t,n){var r=c.Sk(e);return{iconType:r.type,color:Xo(e),city:r.city,text:"underground"===r.type&&r.undergroundLineNumber?r.undergroundLineNumber:r.name,initialCoordinates:t,initialText:null==n?void 0:n.name,stopId:null==n?void 0:n.id}}const Jo=(0,M.ZP)(Ko);var ei=n(2366),ti=n(444);const ni=(0,vt.Z)(ti.Z,(0,yt.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=void 0,n._id=x().v4(),t.map.addGroup(n._dataSourceId,n._id,t.style,t.parentGroupId),n}(0,o.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.props.map.removeGroupAndChildren(this._dataSourceId,this._id)},n.render=function(){return i.createElement(ti.Q,{value:{parentGroupId:this._id}},this.props.children)},(0,dt.Z)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||gt.UZ.DEFAULT_GRAPHICS}}]),t}(i.PureComponent));var ri={main:4,underlay:8,dash:[5,10]},oi="#6000ff";const ii=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getStrokeStyleByType=function(e){return{simplifyPalette:!1,width:ri.main,dash:ri.dash,opacity:"undergroundWalk"===e?.5:1,palette:t.props.activeRoute.colorizeInfo.map((function(t){var n=t.type,r=t.count;return{color:n===e?"binding"===n?c.uC:oi:ei.L,count:r}}))}},t._getActiveStyle=function(){return[t._getStrokeStyleByType("undergroundWalk"),t._getStrokeStyleByType("walk"),t._getStrokeStyleByType("binding"),{width:ri.underlay,color:"#fff"}]},t._getInactiveStyle=function(){return[{width:ri.main,color:"#6d6d6d"},{width:ri.underlay,color:"#fff"}]},t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(ni,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},i.createElement(Nn.Z,{key:t.activeRoute.uuid,dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:this._getActiveStyle(),cursor:"default",zIndex:10},geometry:c.d(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?t.inactiveRoutes.map((function(n){return i.createElement(Nn.Z,{key:n.uuid,dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:{stroke:e._getInactiveStyle(),cursor:"pointer"},geometry:c.d(n),onFastClick:function(e,r){return t.onRouteClick(n,r.coordinates)}})})):null)},t}(i.Component);var ai=n(5538),si=n.n(ai),ci=n(2620),ui=n.n(ci),li=n(361),di=n.n(li),pi=n(6735),fi=n.n(pi),mi=n(821),vi=n.n(mi),hi=n(8453),gi=n.n(hi),yi=n(1757),_i=n.n(yi),bi=n(6394),wi=n.n(bi),Ei=n(9346),Si=n.n(Ei),Ci=n(2093),ki=n.n(Ci),Ri=n(7239),Zi=n.n(Ri),Pi=n(8045),Mi=n.n(Pi),Ii=n(7641),xi=n.n(Ii),Ti=n(856),Li=n.n(Ti),Di=n(3681),zi=n.n(Di),Ai=n(2631),Ni=n.n(Ai),Ui=n(2562),Oi=n.n(Ui),Fi=n(2654),Bi=n.n(Fi),Hi=n(3567),qi=n.n(Hi),Gi=n(9349),Wi=n.n(Gi),ji={start:[si()],middle:["",ui(),di(),fi(),vi(),gi(),_i(),wi(),Si(),ki()].concat(new Array(40).fill(Wi())),finish:["",Zi(),Mi(),xi(),Li(),zi(),Ni(),Oi(),Bi(),qi()].concat(new Array(40).fill(qi()))};const Vi=(0,M.ZP)((function(e){return e.cursor?i.createElement(zt.Z,{src:(t=e.cursor,n=t.split("_"),r=n[0],o=n[1],ji[r][Number(o)]),basePoint:[32,44]}):null;var t,n,r,o}));var Yi="#737ce6",Ki="#54b235",Xi={stroke:[{width:4,color:"#6d6d6d"},{width:8,color:"#fff"}],cursor:"pointer"};const $i=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getBicycleActiveDrawingStyle=function(){var e=t.props.mapLocation.zoom>=17,n={width:c.Qt(t.props.mapLocation.zoom).main,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(t){return{count:t.count,color:["PEDESTRIAN","PEDESTRIAN_UNDERGROUND"].includes(t.type)&&e||"BINDING"===t.type?ei.L:"AUTO"===t.type?Yi:Ki}}))},r={width:4,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(e){return{count:e.count,color:"BINDING"===e.type?c.uC:ei.L}})),dash:[5,10]},o={width:e?4:0,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(e){return{count:e.count,color:"PEDESTRIAN"===e.type?Yi:ei.L}})),dash:[5,10]},i={width:e?4:0,opacity:.5,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(e){return{count:e.count,color:"PEDESTRIAN_UNDERGROUND"===e.type?Yi:ei.L}})),dash:[5,10]};return{stroke:[{width:1.5,opacity:1,palette:(t.props.activeRoute.colorizeInfo||[]).map((function(e){return{count:e.count,color:"BICYCLE"===e.type?"#fff":ei.L}})),dash:[2,4]},n,r,o,i,{width:c.Qt(t.props.mapLocation.zoom).underlay,color:"#fff"}],cursor:"default",zIndex:10}},t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(ni,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:1}},i.createElement(Nn.Z,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:this._getBicycleActiveDrawingStyle(),geometry:c.d(e.activeRoute),onFastClick:function(t,n){return e.onRouteClick(e.activeRoute,n.coordinates)}}),e.inactiveRoutes?i.createElement(ni,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.6}},e.inactiveRoutes.map((function(t){return i.createElement(Nn.Z,{key:t.uuid,dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:Xi,geometry:c.d(t),onFastClick:function(n,r){return e.onRouteClick(t,r.coordinates)}})}))):null)},t}(i.Component);const Qi=function(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(null!=a&&(void 0===s?a==a&&!(0,q.Z)(a):n(a,s)))var s=a,c=i}return c};var Ji=n(5365),ea=n(6808);const ta=function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){var c=(s=n[o])[0],u=e[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var d=new Ji.Z;if(r)var p=r(u,l,c,e,t,d);if(!(void 0===p?(0,ea.Z)(l,u,3,r,d):p))return!1}}return!0};const na=function(e){return e==e&&!(0,le.Z)(e)};var ra=n(5989);const oa=function(e){for(var t=(0,ra.Z)(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,na(o)]}return t};const ia=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};const aa=function(e){var t=oa(e);return 1==t.length&&t[0][2]?ia(t[0][0],t[0][1]):function(n){return n===e||ta(n,e,t)}};const sa=function(e,t,n){var r=null==e?void 0:ne(e,t);return void 0===r?n:r};const ca=function(e,t){return j(e)&&na(t)?ia(te(e),t):function(n){var r=sa(n,e);return void 0===r&&r===t?ge(n,e):(0,ea.Z)(t,r,3)}};var ua=n(4193);const la=function(e){return function(t){return ne(t,e)}};const da=function(e){return j(e)?(0,ua.Z)(te(e)):la(e)};const pa=function(e){return"function"==typeof e?e:null==e?Me:"object"==typeof e?(0,H.Z)(e)?ca(e[0],e[1]):aa(e):da(e)};const fa=function(e,t){return e<t};const ma=function(e,t){return e&&e.length?Qi(e,pa(t,2),fa):void 0};var va=n(935),ha=(0,He.Z)("mrc-map-icon-view");const ga=(0,va.Z)((function(e){return i.createElement(qe.Z,{disableRoundCoordinates:!0,coordinates:e.coordinates,nonInteractive:!e.onClick,zIndex:e.zIndex,onClick:e.onClick},i.createElement("div",{className:ha({type:e.type||"main"}),style:{transform:"rotate("+(e.direction?e.direction:0)+"deg)"},ref:e.forwardedRef?e.forwardedRef:null}))}));var ya=n(5946),_a=(0,He.Z)("mrc-preview-balloon"),ba={main:20,side:20},wa=function(e){function t(t){var n;return(n=e.call(this,t)||this)._image=i.createRef(),n._onLoad=function(){n.setState({isPreviewLoaded:!0})},n._renderSpinner=function(){var e;return n.state.isPreviewLoaded||null!==(e=n._image.current)&&void 0!==e&&e.complete?null:i.createElement("div",{className:_a("placeholder")},i.createElement("div",{className:_a("spinner")},i.createElement(ya.Z,{view:"large"})))},n.state={isPreviewLoaded:!1},n}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(Ge.ZP,{name:"preview_balloon"},i.createElement("div",{ref:e.forwardedRef,className:_a()},i.createElement(In.Z,{type:"transparent",coordinates:e.coordinates,position:"bottom-right",offset:ba,onClose:function(){},showArrow:!1,isShown:!0},i.createElement("div",{className:_a("balloon")},this._renderSpinner(),i.createElement("img",{ref:this._image,className:_a("image",{loaded:this.state.isPreviewLoaded}),src:e.image.url,onLoad:this._onLoad})))))},t}(i.Component);const Ea=(0,va.Z)(wa);var Sa=n(3047);const Ca=(0,n(9875).Z)((function(){return n.e("mrc").then(n.bind(n,2584))}),{openPlayer:!0,closePlayer:!0,replaceId:!0,fetchSimilarNearby:!0,fetchSimilar:!0,fetchDirections:!0,enableLayer:!0,disableLayer:!0,play:!0,pause:!0,setGraphType:!0,updateFeatureCache:!0});var ka=new(function(){function e(){this._queue=[],this._isPending=!1}var t=e.prototype;return t._runNext=function(){var e=this;if(!this._isPending){var t=this._queue[this._queue.length-1];t&&(this._isPending=!0,t.runFn().finally((function(){e._isPending=!1,e._queue.pop(),e._runNext()})))}},t.add=function(e,t){var n=this,r=!1;return{promise:new Promise((function(o,i){n._queue.push({runFn:function(){return r?Promise.resolve().then(i):e().then(o).catch(i)},meta:t}),n._runNext()})),abort:function(){r=!0}}},t.has=function(e){var t=this._queue.find((function(t){var n=t.meta;return e(n)}));return Boolean(t)},e}());const Ra=function(e){var t=(0,M.ZR)(),n=kr.I0();return i.useEffect((function(){if(!Boolean(e.feature.properties.imageFull)&&!ka.has((function(t){return t.includes(e.feature.properties.id)}))){var r=function(e,t){for(var n=[],r=0;n.length<300;){var o=e-r,i=e+(r||1),a=t.features[o],s=t.features[i];if(a&&!a.properties.imageFull&&n.push(a.properties.id),s&&!s.properties.imageFull&&n.push(s.properties.id),o<=0&&i>=t.features.length-1)break;r++}return n}(e.featureCollection.features.indexOf(e.feature),e.featureCollection),o=ka.add((function(){return Sa.Fz(r,t)}),r);return o.promise.then((function(e){n(Ca.updateFeatureCache(e))})).catch((function(){})),function(){o.abort()}}}),[]),null};const Za=function(e){function t(t){var n;return(n=e.call(this,t)||this)._leaveTimer=0,n._getNearestFeature=function(e){var t=n.props,r=ma(t.featureCollection.features,(function(t){return(0,T.g)(t.geometry.coordinates,e)}));if(!r||r.properties.id!==t.selectedFeatureId)return r},n._onClick=function(){var e=n.state.currentFeature;e&&n.props.onClick&&n.props.onClick(e.properties.id),n.setState({currentFeature:null})},n._onMouseMove=function(e,t){var r=t.coordinates,o=Bn(n.props.featureCollection.features.map((function(e){return e.geometry.coordinates})),r,n.props.lineWidth,n.props.zoom);if(o&&!("point"in o)){var i=n._getNearestFeature(o);n.setState({currentFeature:i||null})}},n._onMouseEnter=function(){window.clearTimeout(n._leaveTimer)},n._onMouseLeave=function(){n._leaveTimer=window.setTimeout((function(){n.setState({currentFeature:null})}),200)},n._renderPreview=function(){var e=n.state;return e.currentFeature?e.currentFeature.properties.imagePreview?"placemark"===n.props.preview?i.createElement(ga,{coordinates:e.currentFeature.geometry.coordinates,direction:e.currentFeature.properties.heading||0,type:"additional"}):i.createElement(Ea,{coordinates:e.currentFeature.geometry.coordinates,image:e.currentFeature.properties.imagePreview}):i.createElement(Ra,{key:e.currentFeature.properties.id,feature:e.currentFeature,featureCollection:n.props.featureCollection}):null},n.state={currentFeature:null},n._onMouseMove=(0,jr.Z)(n._onMouseMove,16),n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this;if(this.props.featureCollection.features!==e.featureCollection.features&&this.state.currentFeature){var n=this.props.featureCollection.features.find((function(e){var n;return(null===(n=t.state.currentFeature)||void 0===n?void 0:n.properties.id)===e.properties.id}))||null;this.setState({currentFeature:n})}},n.componentWillUnmount=function(){window.clearTimeout(this._leaveTimer)},n.render=function(){var e=this.props;return i.createElement(i.Fragment,null,e.children({onMouseMove:this._onMouseMove,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onClick}),this._renderPreview())},t}(i.Component);var Pa=n(4960);var Ma=(0,He.Z)("map-routes-auto-view"),Ia=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getPoints=function(){var e=n.props;return e.activeRoute.refPointsLineCoordinates.map((function(t,r){return n.state.editingIndex===r?e.routePoints[r].coords:t}))},n._getPointsWithVia=function(){return{points:n.props.routePoints.map((function(e){return e.coords})),isViaPoints:n.props.routePoints.map((function(e,t){return n.props.viaIndexes.includes(t)}))}},n._getViaIndexesFromRefsWithVia=function(e){return e.map((function(e,t){return e?t:0})).filter(Boolean)},n._removeViaPoint=function(e){if(n.props.onRoutePointsChange){var t=n._getPointsWithVia(),r=t.points,o=t.isViaPoints;r.splice(e,1),o.splice(e,1),n.props.onRoutePointsChange(r,{viaIndexes:n._getViaIndexesFromRefsWithVia(o),isRough:!1})}},n._addViaPoint=function(e,t){if(n.props.onRoutePointsChange){var r=n._getPointsWithVia(),o=r.points,i=r.isViaPoints;o.splice(t,0,e),i.splice(t,0,!0),n.props.setDragging(!0),n.props.onRoutePointsChange(o,{viaIndexes:n._getViaIndexesFromRefsWithVia(i),isRough:!1})}},n._updateViaPoint=function(e,t,r){if(n.props.onRoutePointsChange){var o=n.props.routePoints.slice().map((function(e){return e.coords}));o.splice(t,1,e),n.setState({editingIndex:r?t:void 0}),n.props.onRoutePointsChange(o,{viaIndexes:n.props.viaIndexes,isRough:r})}},n._getActiveRouteStrokeStyles=function(){var e=n.props;return c.TI({route:e.activeRoute,isDefaultColor:e.isDefaultColor},e.config)},n._onPointUpdate=function(e,t,r){n._updateViaPoint(e,t,!r),n.props.setDragging(!r)},n._onMapUpdate=function(){n.setState({mapAzimuth:n.props.map.azimuth})},n._renderPointElement=function(e){var t=n.props.activeRoute.refPointsLineCoordinates.reduce((function(e,t,r){return n.props.viaIndexes.includes(r)?e:e.concat(r)}),[]);return t.includes(e)?null:i.createElement("div",{className:Ma("via-point")})},n._renderActiveRoute=function(e){var t=n.props,o=n._getActiveRouteStrokeStyles().underlayStyle.width,a=e?{onLineMouseEnter:e.onMouseEnter,onLineMouseMove:e.onMouseMove,onLineMouseLeave:e.onMouseLeave,onPreviewPointMouseLeave:e.onMouseLeave}:{};return i.createElement(Yn,(0,r.Z)({lineStyle:{stroke:[{width:o,opacity:0}],zIndex:12},polyLineCoordinates:t.activeRoute.coordinates||[],points:n._getPoints(),renderPointElement:n._renderPointElement,previewPointElement:i.createElement("div",{className:Ma("via-point",{preview:!0})}),isActive:t.isEditorActive,onPointAdd:n._addViaPoint,onPointUpdate:n._onPointUpdate,onPointRemove:n._removeViaPoint,onPreviewPointClick:function(r,o){o&&n.props.onRouteClick(t.activeRoute,o.coordinates),null==e||e.onClick()}},a))},n._renderActiveMrcFeature=function(){var e=n.props;if(e.isMrcPlayerHidden||e.isLoading||"comparison"===e.travelMode||e.feedback&&"route/edit/better"===e.feedback.type||!e.mrcFeatureCollection||!e.activeMrcIndex&&0!==e.activeMrcIndex||e.isRoutePointDragging||!e.isMrcPlaying&&0===e.activeMrcIndex)return null;var t=e.mrcFeatureCollection.features[e.activeMrcIndex];return t&&t.properties.heading?i.createElement(i.Fragment,null,i.createElement(ga,{coordinates:t.geometry.coordinates,direction:t.properties.heading+(0,Pa.Z)(n.state.mapAzimuth)}),i.createElement(_t.Z,{onUpdate:n._onMapUpdate})):null},n.state={mapAzimuth:t.map.azimuth},n}return(0,o.Z)(t,e),t.prototype.render=function(){var e,t,n=this,r=this.props,o=this._getActiveRouteStrokeStyles().underlayStyle.width,a=!("route/edit/better"===(null===(e=r.feedback)||void 0===e?void 0:e.type))&&!r.config.uatraits.isMobile&&"comparison"!==r.travelMode;return i.createElement(i.Fragment,null,a?i.createElement(Ge.ZP,{name:"mrc_route_thread",logClick:!0},i.createElement(Za,{featureCollection:r.mrcFeatureCollection||(t=[],{uuid:x()(),type:"FeatureCollection",features:t}),lineWidth:o,zoom:r.zoom,onClick:r.onMrcClick,preview:"balloon"},this._renderActiveRoute)):this._renderActiveRoute(),i.createElement(ni,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.7}},i.createElement(Nn.Z,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:c.X2({route:r.activeRoute,isActive:!0,isDefaultColor:r.isDefaultColor},r.config),geometry:c.d(r.activeRoute)}),r.inactiveRoutes?i.createElement(ni,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,style:{opacity:.86}},r.inactiveRoutes.map((function(e){return i.createElement(Nn.Z,{key:e.uuid,dataSourceId:gt.UZ.DEFAULT_GRAPHICS_UNDER_BUILDINGS,drawingStyle:c.X2({route:e,isActive:!1,isDefaultColor:r.isDefaultColor},r.config),geometry:c.d(e),onFastClick:function(t,r){return n.props.onRouteClick(e,r.coordinates)}})}))):null),r.config.uatraits.isMobile?null:this._renderActiveMrcFeature())},t}(i.Component);const xa=(0,yt.ZP)({shouldWait:!0})((0,M.ZP)(Ia));var Ta=[{width:4,color:"#6d6d6d"},{width:8,color:"#fff"}],La={main:4,dash:[5,10]},Da="#9d64fb",za=(0,He.Z)("map-routes-masstransit-view"),Aa=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getStopPlacemarksData=function(){return t.props.activeRoute.paths.reduce((function(e,t){return e.concat(t.segments.reduce((function(e,t){if(!t.stops)return e;var n=t.stops.reduce((function(e,t){return t.coordinateOnRoute?e.concat([t.coordinateOnRoute]):e}),[]);return n.shift(),e.concat({color:t.transports?Na(t.transports):void 0,coordinates:n})}),[]))}),[])},t._getColorForTransport=function(e){var n=t.props,r=e.type,o=e.segmentIndex;if(["walk","transfer","undergroundWalk","binding"].includes(r))return ei.L;var i=n.activeRoute.paths.reduce((function(e,t){return e.concat(t.segments)}),[]);return o&&i[o]&&i[o].transports?Na(i[o].transports):So.Lq(r)},t._getActiveDrawingStyle=function(){var e=t.props;return{cursor:"default",zIndex:10,stroke:[{simplifyPalette:!1,width:c.Qt(e.mapLocation.zoom).main,palette:e.activeRoute.colorizeInfo.map((function(e){return{color:t._getColorForTransport(e),count:e.count}}))},{simplifyPalette:!1,width:La.main,dash:La.dash,opacity:.5,palette:e.activeRoute.colorizeInfo.map((function(e){var t=e.type,n=e.count;return{color:["undergroundWalk","transfer"].includes(t)?Da:ei.L,count:n}}))},{simplifyPalette:!1,width:La.main,dash:La.dash,palette:e.activeRoute.colorizeInfo.map((function(e){var t=e.type,n=e.count;return{color:"walk"===t?Da:ei.L,count:n}}))},{simplifyPalette:!1,width:La.main,dash:La.dash,palette:e.activeRoute.colorizeInfo.map((function(e){var t=e.type,n=e.count;return{color:"binding"===t?c.uC:ei.L,count:n}}))},{width:c.Qt(e.mapLocation.zoom).underlay,opacity:.9,color:"#fff"}]}},t._renderStopDots=function(){return t.props.mapLocation.zoom<14?null:t._getStopPlacemarksData().map((function(e,t){return e.coordinates.map((function(n,r){return i.createElement(qe.Z,{key:t+"_"+r,coordinates:n,zIndex:We.I.default},i.createElement("div",{className:za("stop-dot"),style:{borderColor:e.color}}))}))}))},t}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props;return i.createElement(i.Fragment,null,i.createElement(ni,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS,style:{opacity:1}},i.createElement(Nn.Z,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS,drawingStyle:this._getActiveDrawingStyle(),geometry:c.d(t.activeRoute),onFastClick:function(e,n){return t.onRouteClick(t.activeRoute,n.coordinates)}}),t.inactiveRoutes?i.createElement(ni,{dataSourceId:gt.UZ.DEFAULT_GRAPHICS,style:{opacity:.6}},t.inactiveRoutes.map((function(t){return i.createElement(Nn.Z,{key:t.uuid,dataSourceId:gt.UZ.DEFAULT_GRAPHICS,drawingStyle:{cursor:"pointer",stroke:Ta},geometry:c.d(t),onFastClick:function(n,r){return e.props.onRouteClick(t,r.coordinates)}})}))):null),this._renderStopDots())},t}(i.Component);function Na(e){var t=c.Sk(e);return So.Sm(t)}const Ua=(0,M.ZP)(Aa);var Oa=(0,He.Z)("route-warning-view"),Fa={barrier:"snippet-barrier-20",blocked:"snippet-closed-20",ferries:"snippet-ferry-20",ford:"snippet-ford-crossing-20",general:"snippet-all-20","rugged-road":"snippet-bad-road-20","tolls-com":"snippet-paid-usd-20","tolls-kz":"snippet-paid-tenge-20","tolls-tr":"snippet-paid-try-20","tolls-ua":"snippet-paid-uah-20",tolls:"snippet-paid-rouble-20",frontier:"snippet-border-20","railway-crossing":"snippet-railway-crossing-20"};const Ba=function(e){var t=e.type;return i.createElement("div",{className:Oa("wrapper")},i.createElement(Ve.Z,{name:Fa[t],className:Oa({type:t})}))};var Ha={pedestrian:"pedestrian-24",bicycle:"bikes-24",auto:"car-24",masstransit:"bus-24"},qa=(0,He.Z)("map-widget-routes-content-view"),Ga=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n._renderContent=function(){switch(this.props.route.type){case"bicycle":case"pedestrian":case"masstransit":var e=c.K$(this.props.route.duration,this.props.config);return this._renderContentCommon(e,this.props.route.distance.text);case"auto":return this._renderContentAuto();default:return null}},n._renderRouteWarning=function(e){return"auto"===e.type?e.flags.blocked?i.createElement(Ba,{type:"blocked"}):e.flags.hasTolls?i.createElement(Ba,{type:"tolls"}):null:null},n._renderContentCommon=function(e,t){return i.createElement(i.Fragment,null,i.createElement("div",{className:qa("header")},i.createElement(Ve.Z,{name:Ha[this.props.route.type],inline:!0,className:qa("icon")}),e,i.createElement("div",{className:qa("warning")},this._renderRouteWarning(this.props.route))),i.createElement("div",{className:qa("body")},t))},n._renderContentAuto=function(){var e=this.props;if("auto"!==e.route.type)return null;var t,n=(t={duration:c.K$(e.route.duration,e.config),distance:e.route.distance.text}).distance+", без пробок: "+t.duration,r=c.K$(e.route.durationInTraffic,e.config),o=e.route.flags.blocked?"Проезд закрыт":r;return this._renderContentCommon(o,n)},n.render=function(){return i.createElement("div",{className:qa()},this._renderContent(),i.createElement(xn.Z,{view:"secondary-blue",size:"small",url:this.props.url,target:"_blank",isStretched:!0},"Подробнее"))},t}(i.Component);const Wa=(0,M.ZP)(Ga);var ja=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._lastChangedPointIndex=0,t._checkAndChangeBounds=function(){var e,n,r;if(!(t.props.routerResponse&&0===t.props.routerResponse.routes.length||"routes"!==(null===(e=t.props.config.mapWidget)||void 0===e?void 0:e.activeMode))){var o=(null===(n=t.props.routerResponse)||void 0===n?void 0:n.routes[t.props.activeRouteIndex])||(null===(r=t.props.routerResponse)||void 0===r?void 0:r.routes[0]),i=null==o?void 0:o.bounds,a=t.props.routePoints.filter((function(e){return Boolean(e.coords)}));if(0!==a.length){var s=a?kn.o(a.map((function(e){return e.coords}))):void 0,c=i||s;c&&t.props.onBoundsChange(c)}}},t._onRoutePointsChange=function(e){var n=t.props.routePoints.findIndex((function(t){return!!t.coords&&!e.includes(t.coords)}));-1===n&&(n=e[t._lastChangedPointIndex]?t._lastChangedPointIndex:e.length-1),t._lastChangedPointIndex=n,t.props.updateRoutePoint({coords:e[n],value:""},n)},t._onMapClick=function(e,n){var r={coords:n.coordinates,value:"",input:""};t.props.updateRoutePoint(r,t.props.emptyPointIndex)},t._renderContent=function(){var e,n;if(!t.props.content||!t.props.routerResponse||t.props.isRoutePointDragging)return null;var o=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0];if(!o)return null;var a=t.props.content.data.coordinates||(null===(e=o.coordinates)||void 0===e?void 0:e[Math.floor((null===(n=o.coordinates)||void 0===n?void 0:n.length)/2)]);if(!a)return null;var s=c.DP({routePoints:t.props.routePoints,viaIndexes:t.props.routerResponse.viaIndexes||[],travelMode:t.props.routerResponse.type,activeRouteIndex:t.props.activeRouteIndex,routerResponse:null,detailedIndex:-1,settings:{auto:{ignoreTrafficJams:pr(t.props.config),avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}}},t.props.config),d={l:t.props.isTrafficLayerEnabled?t.props.config.query.l||"trf":void 0},p=(0,l._)(u.e_(u.sY("",(0,r.Z)({},s,d,{routes:{avoidTypes:void 0}})),t.props.config));return i.createElement(ir.Z,{coordinates:a,displayType:"balloon",mapLocation:t.props.mapLocation,onClose:t.props.resetContentData,offset:{main:3,side:3},mapSize:t.props.mapSize,key:o.uuid},i.createElement(Wa,{route:o,url:p}))},t._renderRouteView=function(){if(!t.props.routerResponse||0===t.props.routerResponse.routes.length)return null;var e=t.props.routerResponse.routes[t.props.activeRouteIndex]||t.props.routerResponse.routes[0],n=t.props.routerResponse.routes.filter((function(t){return t.uuid!==e.uuid}));switch(e.type){case"pedestrian":return i.createElement(ii,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick});case"bicycle":return i.createElement($i,{activeRoute:e,inactiveRoutes:n,mapLocation:t.props.mapLocation,onRouteClick:t.props.onRouteClick});case"auto":return i.createElement(xa,{activeRoute:e,inactiveRoutes:n,viaIndexes:t.props.routerResponse.viaIndexes||[],routePoints:t.props.routePoints,zoom:t.props.mapLocation.zoom,feedback:null,isDefaultColor:Boolean(t.props.isTrafficLayerEnabled)||(e.colorizeInfo||[]).every((function(e){return"UNKNOWN"===e.type})),isLoading:!1,isEditorActive:!1,setDragging:Va,onRouteClick:t.props.onRouteClick});case"masstransit":return i.createElement(Ua,{activeRoute:e,inactiveRoutes:n,onRouteClick:t.props.onRouteClick,mapLocation:t.props.mapLocation});default:return null}},t._renderRoutePinsView=function(){var e,n,r,o=(null===(e=t.props.routerResponse)||void 0===e?void 0:e.routes[t.props.activeRouteIndex])||(null===(n=t.props.routerResponse)||void 0===n?void 0:n.routes[0])||null;return i.createElement(Jo,{activeRoute:o,travelMode:null==o?void 0:o.type,routePoints:t.props.routePoints,viaIndexes:(null===(r=t.props.routerResponse)||void 0===r?void 0:r.viaIndexes)||[],draggable:!0,isRoutePointDragging:t.props.isRoutePointDragging,draggableIndexes:t.props.draggablePointIndexes,setDragging:t.props.setDragging,onRoutePointsChange:t._onRoutePointsChange})},t._renderRouteCursor=function(){return t.props.cursor?i.createElement(Vi,{cursor:t.props.cursor}):null},t._renderMapListener=function(){return-1===t.props.emptyPointIndex?null:i.createElement(_t.Z,{onClick:t._onMapClick})},t}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._checkAndChangeBounds()},n.componentDidUpdate=function(e){!e.routerResponse&&this.props.routerResponse&&this._checkAndChangeBounds()},n.render=function(){return i.createElement(i.Fragment,null,this._renderRouteView(),this._renderRoutePinsView(),this._renderRouteCursor(),this._renderMapListener(),this._renderContent())},t}(i.Component);function Va(){}const Ya=(0,M.ZP)(ja);var Ka=n(5623),Xa=(0,He.Z)("user-maps-map-view"),$a=function(e){function t(t){var n;return(n=e.call(this,t)||this)._renderFeature=function(e,t,r){var o=(e.zIndex||r.length-t)+(t===n.state.hoveredIndex?r.length:0),a=!1;if("placemark"===e.type){var s;if(e.content)if("text"===e.content.type)s=i.createElement("div",{className:Xa("text")},e.content.text);else{var c=Ye.y7(e.content.name),u="fallback"===e.content.name;c&&(a=!u,s=i.createElement(et.Z,{className:Xa("icon",{fallback:u}),url:c}))}return i.createElement(st,{key:t,coordinates:e.coordinates,zIndex:o,color:e.stroke&&e.stroke.color,onClick:function(){return n.props.onFeatureClick(t,e.coordinates)},onMouseEnter:function(){return n.setState({hoveredIndex:t})},onMouseLeave:function(){return n.setState({hoveredIndex:-1})},comma:e.isComma,caption:e.caption,size:a?"large":"medium",outline:!0},s)}return i.createElement(Nn.Z,{key:t,geometry:n._moveGeometryToZeroWorld(e.geometry),drawingStyle:{zIndex:o,cursor:n.props.cursor||"pointer",stroke:e.stroke?[e.stroke]:void 0,fill:"polygon"===e.type&&e.fill?e.fill.color:void 0,fillOpacity:"polygon"===e.type&&e.fill?e.fill.opacity:void 0,interactive:Boolean(e.balloonCoordinates)},onClick:function(e,r){return n.props.onFeatureClick(t,r.coordinates)}})},n.state={hoveredIndex:-1},n}(0,o.Z)(t,e);var n=t.prototype;return n._moveGeometryToZeroWorld=function(e){var t=1/0,n=-1/0;(0,Ka.ZE)(e,(function(e){t=e[0]<t?e[0]:t,n=e[0]>n?e[0]:n}));var r=360*-Math.trunc((n+t)/360);return r?(0,Ka.ZE)(e,(function(e){return[e[0]+r,e[1]]})):e},n.render=function(){return this.props.features.map(this._renderFeature)},t}(i.PureComponent);const Qa=(0,M.ZP)($a);var Ja=(0,He.Z)("user-maps-balloon-content");const es=function(e){return i.createElement(i.Fragment,null,"placemark"===e.feature.type&&e.feature.caption&&e.showTitle?i.createElement("div",{className:Ja("title"),dangerouslySetInnerHTML:{__html:e.feature.caption}}):null,i.createElement("span",{dangerouslySetInnerHTML:{__html:e.feature.isTextInTitle?e.feature.title:e.feature.subtitle}}))};var ts=(0,He.Z)("map-widget-user-maps-content-view"),ns=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.render=function(){return this.props.feature.balloonCoordinates?i.createElement("div",{className:ts()},i.createElement(es,{showTitle:!1,feature:this.props.feature})):null},t}(i.Component);const rs=(0,M.ZP)(ns);const os=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getDisplayType=function(){return t.props.mapSize.width*t.props.mapSize.height>16e4?"balloon":"panel"},t._renderContent=function(){return t.props.content&&(t.props.content.data.feature.isTextInTitle?t.props.content.data.feature.title:t.props.content.data.feature.subtitle)?i.createElement(ir.Z,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,displayType:t._getDisplayType(),onClose:t.props.resetContentData,mapSize:t.props.mapSize},i.createElement(rs,{feature:t.props.content.data.feature})):null},t}return(0,o.Z)(t,e),t.prototype.render=function(){return i.createElement(i.Fragment,null,i.createElement(Qa,{features:this.props.userMap.features,cursor:this.props.cursor,onFeatureClick:this.props.onFeatureClick}),this._renderContent())},t}(i.Component);var is=n(1334),as=(0,He.Z)("masstransit-underground-line-name-view");const ss=function(e){var t,n,r=e.transport,o=r.city?null===(t=co[r.city])||void 0===t?void 0:t.small:null;return i.createElement("div",{className:as()},o?i.createElement("div",{className:as("icon")},i.createElement(Ve.Z,{inline:!0,name:o})):null,i.createElement("div",{className:as("line-number"),style:{backgroundColor:r.Style&&r.Style.color||"transparent"}},null!==(n=r.lineNumber)&&void 0!==n?n:null),i.createElement("div",{className:as("line-name")},r.name))};var cs=n(1137),us=n(2027),ls=(0,He.Z)("map-widget-masstransit-stop-content-view");const ds=function(e){var t,n,r,o=(0,M.ZR)(),a=e.content.data.stop,s=a.region?u.uf(a,a.region,{baseUrl:""}):"",c=(0,l._)(u.e_("/"+s,o)),d={coords:a.coordinates,value:"",uri:null===(t=a.searchResult)||void 0===t?void 0:t.uri},p=(0,l.V)([{coords:null,value:""},d],{},o),f=function(){if("railway"===a.type){var e,t=null===(e=a.links)||void 0===e?void 0:e.find((function(e){return"timetable"===e.type}));return null==t?void 0:t.href}if("underground"===a.type)return u.WU(o.hosts.metro,{ll:(0,en.s)(a.coordinates)});if("urban"===a.type&&a.region){var n=u.uf(a,a.region)||"";return(0,l._)(u.e_("/"+n,o))}};return i.createElement("div",{className:ls()},i.createElement(cs.Z,{title:("underground"===a.type?"Станция метро":"railway"===a.type?"Ж/д станция":"Остановка")+" "+a.name,titleUrl:c,subtitle:"underground"!==a.type?null===(n=a.searchResult)||void 0===n?void 0:n.description:void 0}),"underground"===a.type&&a.transports[0]?i.createElement("div",{className:ls("underground-title")},i.createElement(ss,{transport:a.transports[0]})):null,i.createElement("div",{className:ls("buttons-container")},i.createElement("div",{className:ls("button-container")},i.createElement(xn.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:p,target:"_blank"},"Как добраться")),i.createElement("div",{className:ls("button-container")},i.createElement(xn.Z,{view:"primary",size:"small",isStretched:!0,url:f(),target:"_blank"},"underground"===a.type?"Схема метро":"railway"===a.type?"Показать расписание":"Список маршрутов"))),null!==(r=a.searchResult)&&void 0!==r&&r.metro&&"underground"!==a.type?i.createElement("div",{className:ls("nearest-stops")},i.createElement(us.Z,{result:a.searchResult})):null)};var ps={bus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},minibus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},tramway:{small:"rubrics-tram-stop-14",normal:"rubrics-tram-stop-24"},trolleybus:{small:"rubrics-bus-stop-14",normal:"rubrics-bus-stop-24"},water:{small:"rubrics-pier-14",normal:"rubrics-pier-24"},underground:{small:"rubrics-subway-fallback-14",normal:"rubrics-subway-fallback-24"},suburban:{small:"rubrics-railway-station-14",normal:"rubrics-railway-station-24"},funicular:{small:"rubrics-funicular-14",normal:"rubrics-funicular-24"},cable:{small:"rubrics-cableway-14",normal:"rubrics-cableway-24"},aeroexpress:{small:"aeroexpress-14",normal:"aeroexpress-24"},fallback:{small:"rubrics-fallback-14",normal:"rubrics-fallback-24"}};const fs=(0,M.ZP)((function(e){var t,n,r,o;if(!e.vehicleType)return null;var a=(null===(t=co[null!==(n=e.undergroundCity)&&void 0!==n?n:""])||void 0===t?void 0:t[e.size])||(null===(r=ps[e.vehicleType])||void 0===r?void 0:r[e.size])||(null===(o=ps.fallback)||void 0===o?void 0:o[e.size]);return a?i.createElement(Ve.Z,{inline:!0,name:a,className:e.className}):null}));var ms=n(6941),vs=n.n(ms),hs=n(8151),gs=n.n(hs),ys=n(8293),_s=n.n(ys),bs=(0,He.Z)("masstransit-stop-placemark"),ws=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(_r,{name:"masstransit_stop_placemark",logClick:!0},i.createElement(qe.Z,{coordinates:e.coordinates,onClick:e.onClick,zIndex:We.I.masstransitStop},i.createElement("div",{className:bs({bookmark:e.isBookmark})},!e.hotspotIconUrl||e.isBookmark?i.createElement(fs,{className:bs("content-icon"),size:"normal",vehicleType:e.type,undergroundCity:e.undergroundCity}):null,e.hotspotIconUrl&&!e.isBookmark?i.createElement("img",{alt:"",src:e.hotspotIconUrl,className:bs("background-icon"),width:"60",height:"68"}):i.createElement(et.Z,{className:bs("background-icon"),url:e.isBookmark?gs():e.undergroundCity?_s():vs()}))),e.id?i.createElement(so.Z,{uri:O.p1(e.id)}):null)},t}(i.PureComponent);const Es=(0,M.ZP)(ws);var Ss=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._getDisplayType=function(){return t.props.mapSize.width>=460?"balloon":"panel"},t._renderStopPlacemark=function(e,t){var n,r=(0,So.Od)(e);"underground"===r&&(n=e.transports[0].city);return i.createElement(Es,{id:e.id,type:r,coordinates:e.coordinates,undergroundCity:n,isBookmark:!1,onClick:function(){return null==t?void 0:t(e)}})},t._renderStaticStop=function(){var e,n=t.props.config.masstransitStop;return n&&n.id!==(null===(e=t.props.content)||void 0===e?void 0:e.data.stop.id)?t._renderStopPlacemark(n,t.props.onStaticPlacemarkClick):null},t._renderContentStop=function(){var e=t._getDisplayType();return t.props.content?i.createElement(i.Fragment,null,i.createElement(ir.Z,{coordinates:t.props.content.data.coordinates,mapLocation:t.props.mapLocation,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,displayType:e,mapSize:t.props.mapSize},i.createElement(ds,{content:t.props.content})),"panel"===e?t._renderStopPlacemark(t.props.content.data.stop):null):null},t}return(0,o.Z)(t,e),t.prototype.render=function(){return i.createElement(i.Fragment,null,this._renderContentStop(),this._renderStaticStop())},t}(i.Component);const Cs=(0,M.ZP)(Ss);var ks;function Rs(e,t){var n,r,o,i,a=e.threads[0];if(null!=a&&null!==(n=a.BriefSchedule)&&void 0!==n&&n.Events&&(null===(r=a.BriefSchedule)||void 0===r?void 0:r.Events.length)>0){var s,c,u=(null===(s=a.BriefSchedule.Events[0].Estimated)||void 0===s?void 0:s.value)||(null===(c=a.BriefSchedule.Events[0].Scheduled)||void 0===c?void 0:c.value);if(u){var l=1e3*Number(u);return l-t<6e4?l-t:l}}if(null!=a&&null!==(o=a.BriefSchedule)&&void 0!==o&&o.Frequencies&&(null==a||null===(i=a.BriefSchedule)||void 0===i?void 0:i.Frequencies.length)>0){var d=1e3*a.BriefSchedule.Frequencies[0].value,p=a.BriefSchedule.Frequencies[0].begin?1e3*Number(a.BriefSchedule.Frequencies[0].begin.value):void 0,f=a.BriefSchedule.Frequencies[0].end?1e3*Number(a.BriefSchedule.Frequencies[0].end.value):void 0;return f&&f<t?-1/0:!p||p<t?d:p}return-1/0}const Zs={loadLayerRegions:function(e){return ks||(ks=(0,Z.Z)("masstransit/getLayerRegions",{},e).catch((function(){return[]})))},getStopInfo:function(e,t){return(0,Z.Z)("masstransit/getStopInfo",{query:{id:e.id,uri:e.uri,locale:t.locale,lang:t.lang,mode:"prognosis"}},t).then((function(e){if(!e)throw new Error("Stop no data");return e}))},getStopTimetable:function(e,t){return(0,Z.Z)("masstransit/getStopTimetable",{query:{id:e.id,timestamp:e.timestamp,locale:t.locale,lang:t.lang}},t).then((function(e){if(!e)return null;var t=function(e){return{id:e.id,name:e.name,type:e.type,currentTime:e.currentTime,region:e.region,tzOffset:e.tzOffset,transports:Ce(e.transports.map((function(e){return Ce(e.threads.map((function(t){var n=[],o=(0,r.Z)({},e,{description:t.description});return t.BriefSchedule&&t.BriefSchedule.Frequencies.length>0&&n.push.apply(n,t.BriefSchedule.Frequencies.map((function(e){var n;return(0,r.Z)({},o,{threads:[(0,r.Z)({},t,{BriefSchedule:{Frequencies:[e],Events:[],departureTime:null===(n=t.BriefSchedule)||void 0===n?void 0:n.departureTime}})]})}))),t.BriefSchedule&&t.BriefSchedule.Events.length>0&&n.push.apply(n,t.BriefSchedule.Events.map((function(e){var n;return(0,r.Z)({},o,{threads:[(0,r.Z)({},t,{BriefSchedule:{Frequencies:[],Events:[e],departureTime:null===(n=t.BriefSchedule)||void 0===n?void 0:n.departureTime}})]})}))),0===n.length&&n.push((0,r.Z)({},o,{threads:[(0,r.Z)({},t)]})),n})))})))}}(e);return t.transports=t.transports.filter((function(e){return Rs(e,t.currentTime)>0})).sort((function(e,n){return Rs(e,t.currentTime)-Rs(n,t.currentTime)})),t}))},getVehiclesInfo:function(e,t){return(0,Z.Z)("masstransit/getVehiclesInfoWithRegion",{query:(0,r.Z)({locale:t.locale,lang:t.lang},e)},t)},getVehiclePredictionInfo:function(e,t){return(0,Z.Z)("masstransit/getVehiclePredictionInfo",{query:(0,r.Z)({},e)},t)},getLine:function(e,t){return(0,Z.Z)("masstransit/getLine",{query:(0,r.Z)({locale:t.locale,lang:t.lang},e)},t)},getDistance:function(e,t){return(0,Z.Z)("masstransit/distance",{query:{startPoint:(0,en.s)(e.coordinates),destinationPoints:e.stops.map((function(e){return(0,en.s)(e.coordinates)})),locale:t.locale}},t)}};function Ps(e,t){var n=e.feature,o=n.properties,i=n.properties.uri;return function(e,t){return Zs.getStopInfo(e,t).then((function(t){return(0,r.Z)({},t,{coordinates:e.hotspotCoordinates||t.coordinates})}))}({id:O.QT(i),uri:i,hotspotProperties:o,hotspotCoordinates:e.coordinates,clearLine:!0},t).then((function(e){return{type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}}}))}const Ms=function(e){var t=(0,M.ZR)(),n=e.poiData,r=e.updateContent;return i.useEffect((function(){var e;if(n){p.Z.cancel(e);var o=O.lB(n.feature.properties.uri)?Ps(n,t):function(e,t){var n,r,o=e.feature,i=o.properties,a=o.properties.uri,s={clientId:null===(n=t.mapWidget)||void 0===n?void 0:n.clientId,origin:null===(r=t.mapWidget)||void 0===r?void 0:r.origin,from:"poi",coordinates:e.coordinates,hotspotProperties:i,uri:a};return Ae.Z.fetchSearchResult(s,t).then((function(t){var n=null==t?void 0:t.items[0];return n?{type:"search",data:{result:n,coordinates:e.coordinates}}:null}))}(n,t);e=p.Z.create(o,{success:function(e){e&&r(e)}})}return function(){p.Z.cancel(e)}}),[n,r,t]),null};function Is(e,t,n){return void 0===n&&(n=0),(0,Z.Z)("router/optimize/get",{query:e},t).then((function(r){var o;if(n>=15e3||!r||"failed"===r.status)return null;if("completed"===r.status)return r.points;var i=null!==(o=r.delay)&&void 0!==o?o:1e3;return h.Dc(i).then((function(){return Is(e,t,n+i)}))}))}const xs={getSummary:function(e,t){return(0,Z.Z)("router/getSummary",{query:(0,r.Z)({},e,{lang:t.lang,locale:t.locale})},t)},optimizeRoutePoints:function(e,t){return(0,Z.Z)("router/optimize/add",{query:(0,r.Z)({},e,{lang:t.locale})},t).then((function(e){var n;return e?h.Dc(null!==(n=e.delay)&&void 0!==n?n:1e3).then((function(){return Is({id:e.id},t)})):null}))},buildRoute:function(e,t){return(0,Z.Z)("router/buildRoute",{query:(0,r.Z)({},e,{locale:t.locale,lang:t.lang})},t)},restoreRoute:function(e,t){return(0,Z.Z)("router/restoreRoute",{query:(0,r.Z)({},e,{locale:t.locale,lang:t.lang})},t)},pollIntercityPrice:function(e,t){return(0,Z.Z)("router/poll-intercity-price",{query:e},t)}};var Ts=function(e){function t(t){var n;return(n=e.call(this,t)||this)._buildRouteAction=void 0,n._buildRouteDebounced=void 0,n._buildRoute=function(){var e=n.props,t=c.Ht(e.config,{travelMode:fr(e.config),routerResponse:null,routePoints:e.routePoints,activeRouteIndex:-1,viaIndexes:[],settings:{auto:{ignoreTrafficJams:pr(e.config),avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}}},{});p.Z.cancel(n._buildRouteAction),n._buildRouteAction=p.Z.create(xs.buildRoute(t,e.config),{success:function(t){if(t){var n=c.NA(t);e.onLoad(n)}},fail:function(){e.onLoad(null)}})},n._buildRouteDebounced=(0,Et.Z)(n._buildRoute,100),n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.routePoints!==this.props.routePoints&&this._buildRouteDebounced()},n.componentWillUnmount=function(){p.Z.cancel(this._buildRouteAction)},n.render=function(){return null},t}(i.Component);const Ls=(0,M.ZP)(Ts);var Ds=n(267);const zs=function(e,t){var n,r=(n=(0,i.useRef)(!0)).current?(n.current=!1,!0):n.current;(0,i.useEffect)((function(){if(!r)return e()}),t)};var As=n(6576),Ns=n(6004),Us=n(849),Os=n(1228),Fs=n(494),Bs=n(9283),Hs=(0,He.Z)("map-widget-search-result-list-item");const qs=function(e){var t,n=(0,M.ZR)();return i.createElement("div",{className:Hs(),onClick:function(){e.onClick(e.item)}},"toponym"===e.item.type?(t=e.item,i.createElement(cs.Z,{title:t.title,subtitle:t.description})):function(t){var o,a=Fs.lR(t,n);return i.createElement(i.Fragment,null,i.createElement(cs.Z,{title:e.item.title,subtitle:null===(o=t.categories)||void 0===o?void 0:o.slice(0,2).map((function(e){return e.name})).join(", ")}),i.createElement("div",{className:Hs("data")},i.createElement(Bs.Z,{result:t,disableLink:!0}),i.createElement("div",{className:Hs("time-label",(0,r.Z)({},a.state))},a.text)))}(e.item))};function Gs(e,t){var n=t[0],r=t[1];return e.reduce((function(e,t){return"string"!=typeof t?e.push(t):t.split(n).forEach((function(t,n){n>0&&e.push(r),e.push(t)})),e}),[])}const Ws=function(e,t){return Object.entries(t).reduce(Gs,[e]).filter((function(e){return e})).map((function(e,t){return i.createElement("span",{key:t},e)}))};var js=(0,He.Z)("map-widget-search-result-list-view"),Vs={main:-4,side:4},Ys={top:10,right:10};const Ks=function(e){var t,n,r,o,a=(0,M.ZR)(),s=(null!==(t=null===(n=e.searchResults)||void 0===n?void 0:n.totalResultCount)&&void 0!==t?t:0)-(null!==(r=null===(o=e.searchResults)||void 0===o?void 0:o.items.length)&&void 0!==r?r:0),c=i.useMemo((function(){return e.mapSize.width<=460?"fullscreen":"balloon"}),[e.mapSize]),l=function(t){var n,r,o,c,l,d=(a.query["display-text"]||a.query.text||"").toString(),p=e.searchResults;return null!==(n=p.chain)&&void 0!==n&&n.name&&(d=p.chain.name),i.createElement(i.Fragment,null,d?i.createElement("div",{className:js("header")},"Результаты поиска «"+{query:d}.query+"»"):null,i.createElement("div",{style:{maxHeight:t-30}},i.createElement(Us.Z,{width:"dynamic"},e.searchResults?i.createElement("div",null,e.searchResults.items.map((function(t){return i.createElement(qs,{item:t,key:t.id,onClick:e.onListItemClick})}))):null,e.isLoading?i.createElement("div",{className:js("spinner-container")},i.createElement(ya.Z,{view:"small"})):e.searchResults&&s>0?i.createElement("div",{className:js("more"),onClick:e.onLoadMoreClick},function(e){return"Показать ещё "+e.count+" "+(e.count%10==1&&e.count%100!=11?"результат":e.count%10>1&&e.count%10<5&&(e.count%100<10||e.count%100>20)?"результата":"результатов")}({count:Math.min(e.searchResults.requestResults,s)})):null,i.createElement("div",{className:js("footer")},i.createElement("div",{className:js("icon")},i.createElement(Ve.Z,{name:"super-search-24",inline:!0})),i.createElement("span",{className:js("caption")},Ws("Не нашли, что искали, — измените масштаб или __refineSearch",{__refineSearch:(c=u.VJ(e.mapLocation,a.query.text,a.query.chain,null===(r=a.searchPreloadedResults)||void 0===r||null===(o=r.chain)||void 0===o?void 0:o.name,a.query.filter),l=u.e_("/?"+c,a),i.createElement("a",{className:js("link"),href:l,target:"_blank"},"уточните запрос"))}))))))};return"fullscreen"===c?i.createElement(As.Z,null,i.createElement("div",{className:js("fullscreen-container")},i.createElement(Os.Z,{offset:Ys,onClick:e.onListClose}),l(e.mapSize.height-10))):i.createElement(Ns.Z,{isShown:!0,getTarget:function(){var t;return(null===(t=e.targetRef)||void 0===t?void 0:t.current)||null},onClose:e.onListClose,type:"normal",position:["bottom-left"],offset:Vs},i.createElement("div",{className:js("balloon-container")},l(e.mapSize.height-110)))};var Xs=(0,He.Z)("map-widget-search-control-view");const $s=(0,va.Z)((function(e){return i.createElement("div",{className:Xs({checked:e.checked}),ref:e.forwardedRef},i.createElement(xn.Z,{size:"small",view:"air-alt",checked:e.checked,icon:i.createElement(Ve.Z,{name:"search-24",inline:!0,className:Xs("icon")}),onClick:e.onClick},(t={count:e.resultsCount}).count+" "+(t.count%10==1&&t.count%100!=11?"найден":"найдено")));var t}));const Qs=function(e){var t,n,r,o=i.useRef(null),a=i.useMemo((function(){return e.mapSize.width<295||e.mapSize.height<250}),[e.mapSize]);return i.createElement(i.Fragment,null,(r=null!==(t=null===(n=e.searchResults)||void 0===n?void 0:n.totalResultCount)&&void 0!==t?t:0,a?null:i.createElement($s,{resultsCount:r,checked:e.isResultsListShown,ref:o,onClick:e.onControlClick})),!a&&e.isResultsListShown&&e.searchResults?i.createElement(Ks,{searchResults:e.searchResults,mapSize:e.mapSize,isLoading:e.isLoading,targetRef:o,mapLocation:e.mapLocation,onListItemClick:e.onResultClick,onListClose:e.onListClose,onLoadMoreClick:e.onLoadMoreClick}):null)};var Js=n(6174);const ec=function(e){var t=(0,M.ZR)(),n=Ds.Z((function(n,o){var i,a,s,c,u,l="search"===(null===(i=e.content)||void 0===i?void 0:i.type)?e.content.data.result.id:void 0,d=null==o?void 0:o.items.find((function(e){return e.id===l})),p=null!==(a=null==o?void 0:o.requestResults)&&void 0!==a?a:10,f=e.mapLocation,m={text:t.query.chain?"chain_id:("+t.query.chain+")":t.query.text,filters:t.query.filter?t.query.filter.split(";"):void 0,clientId:null===(s=t.mapWidget)||void 0===s?void 0:s.clientId,origin:null===(c=t.mapWidget)||void 0===c?void 0:c.origin,center:f.center,span:f.span,bounds:f.bounds,zoom:f.zoom,count:null==o?void 0:o.requestResults,type:["biz","geo"],context:null==o?void 0:o.requestContext,skip:n?Math.floor((null!==(u=null==o?void 0:o.items.length)&&void 0!==u?u:0)/p)*p:void 0};return Ae.Z.fetch(m,t).then((function(e){var t=e.items;return!d||t.find((function(e){return e.id===d.id}))||n&&null!=o&&o.items.find((function(e){return e.id===d.id}))||t.push(d),(0,r.Z)({},e,{items:n&&o?[].concat(o.items,t):t})})).catch((function(){return o}))}),[e.mapLocation,t],{value:t.searchPreloadedResults,loading:!1}),o=n[0],a=n[1],s=Boolean(o.value);zs((function(){s&&a(!1,o.value)}),[e.mapLocation,t]);var c,u=function(){a(!0,o.value)},l=function(){var t;e.setListContent("search-list"===(null===(t=e.content)||void 0===t?void 0:t.type)?null:{type:"search-list"})},d=function(){e.setListContent(null)},p=i.useMemo((function(){var n,r,o,i,a;return["search"===(null===(n=e.content)||void 0===n?void 0:n.type)?e.content.data.result:void 0,null===(r=t.mapWidget)||void 0===r||null===(o=r.activeObject)||void 0===o?void 0:o.items[0],null===(i=t.poiPreloadedResults)||void 0===i?void 0:i.items[0],null===(a=t.whatsherePreloadedResults)||void 0===a?void 0:a.items[0]].filter((function(e){return Boolean(e)}))}),[e.content,t]);return i.createElement(i.Fragment,null,o.value?i.createElement(Qs,{searchResults:o.value,mapSize:e.mapSize,isLoading:o.loading,mapLocation:e.mapLocation,isResultsListShown:"search-list"===(null===(c=e.content)||void 0===c?void 0:c.type),onResultClick:e.onResultClick,onLoadMoreClick:u,onControlClick:l,onListClose:d}):null,o.value?i.createElement(Js.Z,{hiddenResults:p,results:o.value,onPlacemarkClick:e.onResultClick}):null)};var tc=n(9993),nc=n(5930),rc=n(283);function oc(e){return e[0][0]=Math.round(e[0][0]),e[0][1]=Math.round(e[0][1]),e[1][0]=Math.round(e[1][0]),e[1][1]=Math.round(e[1][1]),e}var ic=n(7806);var ac=n(8024);function sc(e){return e.isPoiEnabled&&Boolean(e.content&&["masstransit-stop","search"].includes(e.content.type))}function cc(e){return{params:{ll:(0,en.s)(e.map.location.center),z:Math.round(100*e.map.location.zoom)/100}}}function uc(e){var t;return e.isPoiEnabled&&"masstransit-stop"===(null===(t=e.content)||void 0===t?void 0:t.type)?{params:{masstransit:{stopId:e.content.data.stop.id},mode:"stop"}}:{}}function lc(e,t){var n,r,o,i,a=null===(n=t.mapWidget)||void 0===n||null===(r=n.activeObject)||void 0===r?void 0:r.items[0];if(e.isPoiEnabled&&"search"===(null===(o=e.content)||void 0===o?void 0:o.type)){var s=e.content.data.result,c={};return"business"!==s.type||e.routes.routerResponse||t.searchPreloadedResults?c.poi={uri:s.uri,point:s.coordinates}:c.orgpage={id:s.id},{params:c}}return!sc(e)&&a&&"search"===(null===(i=t.mapWidget)||void 0===i?void 0:i.activeMode)?{params:{poi:{uri:a.uri,point:a.coordinates}}}:{}}function dc(e,t){var n,r,o,i;return"search"===(null===(n=t.mapWidget)||void 0===n?void 0:n.activeMode)?{params:{filter:t.query.filter,text:null===(r=t.searchPreloadedResults)||void 0===r?void 0:r.requestQuery,"display-text":null===(o=t.searchPreloadedResults)||void 0===o||null===(i=o.chain)||void 0===i?void 0:i.name}}:{}}function pc(e,t){var n,o,i,a,s,u=yc(e,t);if(u)return{textContent:"Как добраться",params:(0,r.Z)({},c.DP({routerResponse:null,travelMode:fr(t),detailedIndex:-1,activeRouteIndex:0,viaIndexes:[],routePoints:[c.Yo(),u]},t),{mode:"routes"})};if(e.routes.routePoints.length>0){var l,d,p,f,m=c.DP({routerResponse:null,travelMode:fr(t),detailedIndex:-1,activeRouteIndex:e.routes.activeRouteIndex,viaIndexes:(null===(l=e.routes.routerResponse)||void 0===l?void 0:l.viaIndexes)||[],routePoints:e.routes.routePoints},t),v=(0,r.Z)({},m,{rtm:t.query.rtm,mode:"routes"!==(null===(d=t.mapWidget)||void 0===d?void 0:d.activeMode)||sc(e)?void 0:"routes"}),h=null===(p=e.routes.routerResponse)||void 0===p?void 0:p.routes[e.routes.activeRouteIndex];return{params:v,textContent:sc(e)||t.searchPreloadedResults&&"routes"!==(null===(f=t.mapWidget)||void 0===f?void 0:f.activeMode)||null==h||!h.bounds||(n=e.map.location.bounds,o=h.bounds,i=(0,nc.Z)(ic.m6),a=(0,rc.C)((0,hr.n)(n,ic.m6),i),s=(0,rc.C)((0,hr.n)(o,ic.m6),i),!a.some((function(e){return s.some((function(t){return Er(oc(e),oc(t))}))})))?void 0:"Открыть маршрут"}}return{}}function fc(e,t){var n=e.ruler.points.slice(0,t.ruler.maxCount).map((function(e,t,n){var r=e.coordinates,o=n[t-1]&&n[t-1].coordinates,i=0===t?r:[r[0]-o[0],r[1]-o[1]];return(0,en.s)(i)})).join("~");return{params:{rl:n||null}}}function mc(e,t){return{layers:{trf:e.traffic.isActive,trfe:e.traffic.isActive&&dr(t)}}}function vc(e,t){var n=t.userMap;return n?{params:{um:n.id}}:{}}function hc(e,t){var n,r,o,i,a,s,c,u,l,d=yc(e,t),p=e.content&&"data"in e.content&&e.content.data.coordinates,f=sc(e)||"search"!==(null===(n=t.mapWidget)||void 0===n?void 0:n.activeMode)?null===(r=t.mapWidget)||void 0===r||null===(o=r.activeObject)||void 0===o||null===(i=o.items[0])||void 0===i?void 0:i.coordinates:void 0,m=null===(a=t.poiPreloadedResults)||void 0===a||null===(s=a.items[0])||void 0===s?void 0:s.coordinates,v=null===(c=t.whatsherePreloadedResults)||void 0===c||null===(u=c.items[0])||void 0===u?void 0:u.coordinates,h=null===(l=t.masstransitStop)||void 0===l?void 0:l.coordinates,g=[].concat((e.placemarks||[]).map((function(e){return e.coordinates})),[f,m,v,h]).filter((function(e){return Boolean(e&&(!(null!=d&&d.coords)||!(0,De.J)(null==d?void 0:d.coords,e))&&(!p||!(0,De.J)(p,e)))}));return{params:{pt:g.length>0?g.map((function(e){return(0,en.s)(e)})).join("~"):void 0}}}function gc(){return{params:{source:"mapframe",utm_source:"mapframe",from:"mapframe"}}}function yc(e,t){var n;if("search"!==(null===(n=t.mapWidget)||void 0===n?void 0:n.activeMode)&&!sc(e)){var r=[];return t.poiPreloadedResults&&t.poiPreloadedResults.items.length>0&&r.push({coords:t.poiPreloadedResults.items[0].coordinates,value:t.poiPreloadedResults.items[0].title}),t.whatsherePreloadedResults&&t.whatsherePreloadedResults.items.length>0&&r.push({coords:t.whatsherePreloadedResults.items[0].coordinates,value:t.whatsherePreloadedResults.items[0].title}),t.masstransitStop&&r.push({coords:t.masstransitStop.coordinates,value:t.masstransitStop.name}),r.find((function(t){return(0,ac.V)(e.map.location.bounds,t.coords)}))}}const _c=function(e){var t=(0,M.ZR)(),n=function(e,t){var n=[cc,uc,lc,dc,pc,fc,mc,vc,hc,gc].reduce((function(n,o){var i=o(e,t);return{textContent:n.textContent||i.textContent,params:(0,r.Z)({},n.params||{},i.params||{}),layers:(0,r.Z)({},n.layers||{},i.layers||{})}}),{}),o=n.params,i=void 0===o?{}:o,a=n.layers,s=void 0===a?{}:a,c=n.textContent;i.l=Object.entries(s).reduce((function(e,t){var n=t[0],r=t[1];return[].concat(e.filter((function(e){return e!==n})),r?[n]:[])}),[]).join(",")||null;var l=Object.entries(i).reduce((function(e,t){var n=t[0],r=t[1];return null!==r&&(e[n]=r),e}),{});return{url:u.sY(t.hosts.maps,l),textContent:c}}(e.state,t),o=n.url,a=n.textContent,s=i.createElement(tc.Z,{url:o},function(){switch(e.size){case"tiny":return null;case"small":return"Открыть в Картах";case"medium":return a||"Открыть в Яндекс Картах"}return null}());return"tiny"===e.size?i.createElement(Tn.Z,{text:"Открыть в Яндекс Картах",position:"right",isAir:!0},s):s};var bc=[50,70,72,50],wc={passive:!1},Ec=function(e){function t(t){var n,o,v;(v=e.call(this,t)||this)._getLocationAction=void 0,v._asyncRoadEventAction=void 0,v._getRoutePointAction=void 0,v._getInitialContent=function(){var e,t,n,r,o=v.props,i=null===(e=o.config.mapWidget)||void 0===e?void 0:e.activeMode,a=null===(t=v.props.config.poiPreloadedResults)||void 0===t?void 0:t.items[0];if("routes"===i&&v.props.config.routerResponse)return{type:"route",data:{}};if("poi"===i&&a){return{type:"search",data:{result:a,coordinates:a.coordinates}}}if("stop"===i&&o.config.masstransitStop)return{type:"masstransit-stop",data:{stop:o.config.masstransitStop,coordinates:o.config.masstransitStop.coordinates}};if("whatshere"===i&&null!==(n=v.props.config.whatsherePreloadedResults)&&void 0!==n&&n.items[0]){var s=v.props.config.whatsherePreloadedResults.items[0];return{type:"search",data:{result:s,coordinates:s.coordinates}}}if("search"===i&&(v.props.config.searchPreloadedResults||null!==(r=v.props.config.mapWidget)&&void 0!==r&&r.activeObject)){var c,u,l,d,p=null===(c=v.props.config.mapWidget)||void 0===c||null===(u=c.activeObject)||void 0===u?void 0:u.items[0],f=1===(null===(l=v.props.config.searchPreloadedResults)||void 0===l?void 0:l.items.length)?v.props.config.searchPreloadedResults.items[0]:void 0,m=p||(null===(d=v.props.config.searchPreloadedResults)||void 0===d?void 0:d.exactResult)||f;if("business"===(null==m?void 0:m.type)||"toponym"===(null==m?void 0:m.type))return{type:"search",data:{result:m,coordinates:m.coordinates}};if(!m&&o.mapSize.width>460)return{type:"search-list"}}return null},v._onRouterResponseLoad=function(e){v._deepSetState({routes:{routerResponse:e,activeRouteIndex:0}}),v._updateContentData({type:"route",data:{}})},v._getIsPoiEnabled=function(e,t){return e>=295&&t>=400},v._deepSetState=function(e,t){v.setState((function(t){return(0,f.Z)(t,e)}),t)},v._onGeolocationControlClick=function(){v._makeGeolocationRequest()},v._makeGeolocationRequest=function(){var e=v.props.config;v.setState({geolocation:{isStarted:!0}}),v._getLocationAction=p.Z.create(k.getCurrentPosition((0,m.P9)(e),e,1500),{success:v._onGeolocationSuccess,fail:v._onGeolocationFail})},v._onGeolocationSuccess=function(e){v._updateLocationRequest({center:[e.longitude,e.latitude],duration:1e3,zoom:e.accuracy<=200?16:void 0}),v._deepSetState({geolocation:{isStarted:!1,accuracy:e.accuracy,currentPosition:[e.longitude,e.latitude]}})},v._onGeolocationFail=function(){var e;null!==(e=v.props.config.mapWidget)&&void 0!==e&&e.userCoordinates&&(v._updateLocationRequest({center:v.props.config.mapWidget.userCoordinates,duration:1e3}),v._deepSetState({geolocation:{isStarted:!1,currentPosition:v.props.config.mapWidget.userCoordinates,accuracy:1e3}}))},v._updateLocation=function(e){v._deepSetState({map:{location:e}})},v._updateLocationRequest=function(e){v.setState((function(t){return{map:(0,r.Z)({},t.map,{locationRequest:e})}}))},v._onRoutesBoundsChange=function(e){var t=s.$Y({bounds:e},bc,v.state.map.size);v._updateLocationRequest(t)},v._updateRuler=function(e){v._deepSetState({ruler:e})},v._onTrafficLevelChange=function(e){v._deepSetState({traffic:{level:e}})},v._onTrafficControlClick=function(){var e=v._getContentData("traffic");v._deepSetState({traffic:{isActive:!v.state.traffic.isActive},content:e?void 0:v.state.content})},v._setMapSize=function(e){v._deepSetState({map:{size:e}})},v._updateContentData=function(e){v.setState({content:e})},v._processMapObjectClick=function(e,t){var n=v._getEmptyRoutePointIndex();-1!==n?v._updateRoutePoint(e,n):t()},v._onTrafficLayerClick=function(e,t){var n,r=v.props;if(e){var o=e.properties,i=o.HotspotMetaData,a=o.vectorMetadata,s=(null==a?void 0:a.get("objectId"))||(null==i?void 0:i.id);if(s){var c=null===(n=e.geometry)||void 0===n?void 0:n.coordinates;v._processMapObjectClick({value:"",coords:c&&2===c.length?c:t.coordinates},(function(){c&&2===c.length&&(p.Z.cancel(v._asyncRoadEventAction),v._asyncRoadEventAction=p.Z.create(P.getRoadEvent(s,r.config),{success:function(e){e&&e.position&&v._updateContentData({type:"traffic",data:{event:e,coordinates:e.position}})},fail:function(){return v._resetContentData()}}))}))}}},v._onRouteClick=function(e,t){var n,r=((null===(n=v.state.routes.routerResponse)||void 0===n?void 0:n.routes)||[]).indexOf(e);v._updateContentData({type:"route",data:{coordinates:t}}),v._deepSetState({routes:{activeRouteIndex:-1!==r?r:0}})},v._onUserMapsFeatureClick=function(e,t){var n={coords:t,value:""};v._processMapObjectClick(n,(function(){var n,r=null===(n=v.props.config.userMap)||void 0===n?void 0:n.features[e];r&&v._updateContentData({type:"user-maps",data:{feature:r,coordinates:t}})}))},v._onPlacemarkClick=function(e){var t={coords:e.coordinates,value:e.title,uri:e.uri};v._processMapObjectClick(t,(function(){if(v.state.isPoiEnabled)v._updateContentData({type:"search",data:{result:e,coordinates:e.coordinates}});else{var t="business"===e.type?u.S$({id:e.id,seoname:e.seoname},{},{baseUrl:""}):u.hL(e,e.region,{baseUrl:"",skipPointCheck:!0});if(t){var n=(0,l._)(u.e_("/"+t,v.props.config));window.open(n,"_blank")}}}))},v._onMasstransitPlacemarkClick=function(e){var t,n={coords:e.coordinates,value:e.name,uri:null===(t=e.searchResult)||void 0===t?void 0:t.uri};v._processMapObjectClick(n,(function(){if(v.state.isPoiEnabled)v._updateContentData({type:"masstransit-stop",data:{stop:e,coordinates:e.coordinates}});else{var t=e.region?u.uf(e,e.region,{baseUrl:""}):"";if(t){var n=(0,l._)(u.e_("/"+t,v.props.config));window.open(n,"_blank")}}}))},v._resetContentData=function(){v._deepSetState({content:null})},v._updateRoutePointDragging=function(e){a.flushSync((function(){var t;v._deepSetState({routes:{isPointDragging:e},content:"route"===(null===(t=v.state.content)||void 0===t?void 0:t.type)?null:v.state.content})}))},v._updateRoutePoint=function(e,t){if(v.state.routes.isPointDragging){var n=[].concat(v.state.routes.routePoints);n[t]=e,v._deepSetState({routes:{routePoints:n}})}else v._getRoutePointAction=p.Z.create(Ue(e,v.props.config,"router"),{success:function(n){e.value=(null==n?void 0:n.title)||"",e.input=(null==n?void 0:n.title)||"",e.searchResult=n;var r=[].concat(v.state.routes.routePoints);r[t]=e,v._deepSetState({routes:{routePoints:r}})},fail:function(){var n=[].concat(v.state.routes.routePoints);n[t]=e,v._deepSetState({routes:{routePoints:n}})}})},v._getEmptyRoutePointIndex=function(){return v.state.routes.routePoints.findIndex((function(e){return!e.coords}))},v._getRoutePointsDraggableIndexes=function(){var e;return(null===(e=v.props.config.routePoints)||void 0===e?void 0:e.reduce((function(e,t,n){return t.coords||e.push(n),e}),[]))||[]},v._onPoiClick=function(e,t){var n=e.properties.uri,r=e.geometry&&e.geometry.coordinates||t.coordinates;v._processMapObjectClick({coords:r,value:e.properties.name||"",uri:n},(function(){v.setState({poiData:{coordinates:r,feature:e}})}))},v._getCursor=function(){var e=v._getEmptyRoutePointIndex();if(-1!==e&&!v.props.config.uatraits.isPhone&&!v.state.ruler.isEnabled)return c.Bq(e,v.state.routes.routePoints)+"_"+e},v._getContentData=function(e){var t;if((null===(t=v.state.content)||void 0===t?void 0:t.type)===e)return v.state.content},v._preventZoomByPinching=function(e){"scale"in e&&1!==e.scale&&e.touches.length>1&&e.preventDefault()},v._renderInMapsControl=function(e){return i.createElement(_c,{state:v.state,size:e})},v._renderGeolocationPin=function(){return v.state.geolocation.currentPosition&&v.state.geolocation.accuracy?i.createElement(Qe,{currentPosition:v.state.geolocation.currentPosition,accuracy:v.state.geolocation.accuracy}):null},v._renderTrafficLayer=function(){return v.state.traffic.isActive?i.createElement(Nr,{mapLocation:v.state.map.location,mapSize:v.state.map.size,updateLocationRequest:v._updateLocationRequest,onClick:v._onTrafficLayerClick,onTrafficLevelChange:v._onTrafficLevelChange,resetContentData:v._resetContentData,content:v._getContentData("traffic")}):null},v._renderUserMaps=function(){return v.props.config.userMap?i.createElement(os,{userMap:v.props.config.userMap,mapLocation:v.state.map.location,mapSize:v.state.map.size,updateLocationRequest:v._updateLocationRequest,onFeatureClick:v._onUserMapsFeatureClick,cursor:v._getCursor(),resetContentData:v._resetContentData,content:v._getContentData("user-maps")}):null},v._renderSearchResult=function(){return i.createElement(is.Z,{mapSize:v.state.map.size,mapLocation:v.state.map.location,isTrafficLayerEnabled:v.state.traffic.isActive,updateLocationRequest:v._updateLocationRequest,content:v.state.isPoiEnabled?v._getContentData("search"):void 0,onContentClose:v._resetContentData,onStaticPlacemarkClick:v._onPlacemarkClick})},v._renderSearchComponentWithControl=function(){return i.createElement(ec,{mapLocation:v.state.map.location,mapSize:v.state.map.size,content:v._getContentData("search")||v._getContentData("search-list"),onResultClick:v._onPlacemarkClick,setListContent:v._updateContentData})};var h,g=s.$Y(v.props.config.mapLocation,bc,{width:t.mapSize.width,height:t.mapSize.height}),y=v._getIsPoiEnabled(t.mapSize.width,t.mapSize.height);return v.state={placemarks:t.config.query.pt?(h=t.config.query.pt,h.split("~").reduce((function(e,t){var n=t.split(","),r=n[0],o=n[1],i=n[2],a=n.slice(3),s=(0,d.P)(r+","+o);return!o||a.length>0||!s||e.push({coordinates:s,color:i}),e}),[])):void 0,map:{location:g,size:t.mapSize},geolocation:{isStarted:!1},ruler:ze(t.config),traffic:{isActive:(null===(n=t.config.query.l)||void 0===n?void 0:n.includes("trf"))||(null===(o=t.config.userMap)||void 0===o?void 0:o.isTrafficShown),level:null},routes:{activeRouteIndex:Number(t.config.query.rtn)||0,routerResponse:t.config.routerResponse?c.NA(t.config.routerResponse):null,routePoints:t.config.routePoints||[],isPointDragging:!1},content:v._getInitialContent(),isPoiEnabled:y},v}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.document.body.classList.add("_app_ready"),document.addEventListener("touchmove",this._preventZoomByPinching,wc)},n.componentDidUpdate=function(e,t){if(t.map.size!==this.state.map.size){var n=this._getIsPoiEnabled(this.state.map.size.width,this.state.map.size.height);this._deepSetState({isPoiEnabled:n})}},n.componentWillUnmount=function(){p.Z.cancel(this._getLocationAction),p.Z.cancel(this._getRoutePointAction)},n.render=function(){var e,t=this.state,n=Boolean(null===(e=this.props.config.flyover)||void 0===e?void 0:e.isEnabled);return i.createElement(gn,{location:t.map.location,locationRequest:t.map.locationRequest,margin:bc,onLocationChange:this._updateLocation,onSizeChange:this._setMapSize,isPoiEnabled:!n&&this.state.isPoiEnabled,onPoiClick:n?void 0:this._onPoiClick},i.createElement(yn.ZP,{geolocation:{isStarted:t.geolocation.isStarted,onClick:this._onGeolocationControlClick},location:t.map.location,ruler:{isEnabled:t.ruler.isEnabled,updateRuler:this._updateRuler},traffic:{isActive:t.traffic.isActive,level:t.traffic.level,onClick:this._onTrafficControlClick},search:{render:this._renderSearchComponentWithControl},inMaps:{render:this._renderInMapsControl}}),this._renderUserMaps(),this._renderGeolocationPin(),i.createElement(or,{ruler:t.ruler,updateRuler:this._updateRuler}),this._renderTrafficLayer(),i.createElement(lt,{points:t.placemarks}),i.createElement(Ya,{routerResponse:t.routes.routerResponse,activeRouteIndex:t.routes.activeRouteIndex,routePoints:t.routes.routePoints,mapLocation:t.map.location,mapSize:t.map.size,emptyPointIndex:this._getEmptyRoutePointIndex(),isTrafficLayerEnabled:t.traffic.isActive,isRoutePointDragging:t.routes.isPointDragging,cursor:this._getCursor(),setDragging:this._updateRoutePointDragging,draggablePointIndexes:this._getRoutePointsDraggableIndexes(),updateRoutePoint:this._updateRoutePoint,onRouteClick:this._onRouteClick,onBoundsChange:this._onRoutesBoundsChange,resetContentData:this._resetContentData,content:this._getContentData("route")}),i.createElement(Ls,{routePoints:t.routes.routePoints,onLoad:this._onRouterResponseLoad}),this._renderSearchResult(),i.createElement(Cs,{content:t.isPoiEnabled?this._getContentData("masstransit-stop"):void 0,mapSize:t.map.size,mapLocation:t.map.location,updateLocationRequest:this._updateLocationRequest,onContentClose:this._resetContentData,onStaticPlacemarkClick:this._onMasstransitPlacemarkClick}),i.createElement(Ms,{poiData:t.poiData,updateContent:this._updateContentData}))},t}(i.Component);const Sc=(0,M.ZP)(Ec)},1334:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(7462),o=n(4578),i=n(7363),a=n.n(i),s=n(2514),c=n(8876),u=n(414),l=n(7846),d=n(9064),p=n(6493),f=n(634),m=n(152),v=n(4874),h=(0,v.Z)({resolved:{},chunkName:function(){return"flyover"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("flyover").then(n.bind(n,9615))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 9615}}),g=460,y={advert:void 0,brandingId:void 0},_=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this)._getDisplayType=function(){return t.props.mapSize.width>=g?"balloon":"panel"},t._renderStaticSearchResult=function(e){var n;if(!e||e.id===(null===(n=t.props.content)||void 0===n?void 0:n.data.result.id))return null;var o={requestId:"",requestResults:1,totalResultCount:1,items:[e]};return i.createElement(i.Fragment,null,i.createElement(c.Z,{searchResults:o,mapLocation:t.props.mapLocation}),i.createElement(p.Z,{result:(0,r.Z)({},e,y),coordinates:e.coordinates,mode:"active",onClick:t.props.onStaticPlacemarkClick}),i.createElement(f.Z,{uri:e.uri}))},t._renderContentSearchResult=function(){var e=t.props.content,n=t._getDisplayType();if(!e)return null;var o=e.data.result,a={requestId:"",requestResults:1,totalResultCount:1,items:[o]};return i.createElement(i.Fragment,null,i.createElement(l.Z,{coordinates:e.data.coordinates,mapLocation:t.props.mapLocation,displayType:n,updateLocationRequest:t.props.updateLocationRequest,onClose:t.props.onContentClose,mapSize:t.props.mapSize},"business"===o.type?i.createElement(u.Z,{result:o}):i.createElement(d.Z,{result:o,isTrafficLayerEnabled:t.props.isTrafficLayerEnabled})),i.createElement(c.Z,{searchResults:a,mapLocation:t.props.mapLocation}),"panel"===n?i.createElement(i.Fragment,null,i.createElement(p.Z,{result:(0,r.Z)({},o,y),coordinates:o.displayCoordinates,mode:"active"}),i.createElement(f.Z,{uri:o.uri})):null)},t._renderBusinessGeometry=function(e){return e&&"business"===e.type?i.createElement(m.Z,{result:e}):null},t._renderFlyover=function(){var e,n=null===(e=t.props.content)||void 0===e?void 0:e.data.result;return n&&"business"===n.type?i.createElement(h,{result:n,zoom:t.props.mapLocation.zoom}):null},t}return(0,o.Z)(t,e),t.prototype.render=function(){var e,t,n,r,o,a=this.props.config,s=null===(e=a.whatsherePreloadedResults)||void 0===e?void 0:e.items[0],c=null===(t=a.poiPreloadedResults)||void 0===t?void 0:t.items[0],u=null===(n=a.mapWidget)||void 0===n||null===(r=n.activeObject)||void 0===r?void 0:r.items[0],l=Boolean(null===(o=a.flyover)||void 0===o?void 0:o.isEnabled);return i.createElement(i.Fragment,null,this._renderStaticSearchResult(s),this._renderStaticSearchResult(c),this._renderStaticSearchResult(u),this._renderBusinessGeometry(u),this._renderBusinessGeometry(c),l?this._renderFlyover():this._renderContentSearchResult())},t}(i.Component);const b=(0,s.ZP)(_)},6382:(e,t,n)=>{"use strict";n.d(t,{V:()=>l,_:()=>u});var r=n(7462),o=n(129),i=n.n(o),a=n(9705),s=n(5095),c=n(6859);function u(e){var t=e.split("?"),n=t[0],o=t[1],a=void 0===o?"":o;return n+"?"+i().stringify((0,r.Z)({},i().parse(a),{from:"mapframe"}))}function l(e,t,n){var o,i=c.DP({routePoints:e,viaIndexes:[],travelMode:t.travelMode||"auto",activeRouteIndex:0,routerResponse:null,detailedIndex:0,settings:{auto:{ignoreTrafficJams:!1,avoid:[],timeDependent:{type:"departure"}},masstransit:{avoidTypes:[],timeDependent:{type:"departure"}}},startNavigationInApp:!0},n),l=e.some((function(e){return!e.coords}))?null===(o=e.find((function(e){return e.coords})))||void 0===o?void 0:o.coords:void 0;return u(s.e_(s.sY("/",(0,r.Z)({ll:l?(0,a.s)(l):void 0,z:l?14:void 0},i)),n))}},414:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(4578),o=n(7363),i=n(5876),a=n(2514),s=n(5095),c=n(1118),u=n(6382),l=n(9283),d=n(7462),p=n(494),f=n(1491),m=(0,i.Z)("flip-icon");const v=function(e){var t=e.isFlipped;return o.createElement(f.Z,{name:"arrow-down-8",className:m({flipped:t}),inline:!0})};var h=n(9971),g=(0,i.Z)("map-widget-business-working-intervals-view");const y=function(e){var t=(0,a.ZR)(),n=o.useState(!1),r=n[0],i=n[1],s=p.lR(e.result,t),c=p.bL(e.result,t)||[],u=c.length>0;return o.createElement("div",{className:g()},o.createElement("div",{className:g("labels")},e.children?o.createElement("div",{className:g("extra-label")},e.children):null,o.createElement("div",{className:g("time-label",(0,d.Z)({},s.state,{clickable:u})),onClick:u?function(){i(!r)}:void 0},o.createElement("span",{className:g("label-text")},s.text),u?o.createElement("div",{className:g("working-status-control")},o.createElement(v,{isFlipped:r})):null)),r?o.createElement("div",{className:g("intervals")},c.map((function(e,t){var n=e.changedDate?o.createElement(o.Fragment,null,e.dayName,", ",o.createElement("span",{className:g("date")},e.changedDate)):e.dayName;return o.createElement(h.Z,{key:t,isDisabled:!e.changedDate,position:["right"],text:"Праздничный день"},o.createElement("div",{className:g("interval")},o.createElement("div",{className:g("day")},n),o.createElement("span",{className:g("time")},Array.isArray(e.text)?e.text.join(", "):e.text)))}))):null)};var _=n(8056),b=(0,i.Z)("map-widget-business-contacts-view");const w=function(e){var t,n,r=(0,a.ZR)(),i=o.useState(!1),c=i[0],u=i[1],l=function(){u(!c)},d=(0,_.Po)(e.result,r),p=d[0],m=d.slice(1),h=null===(t=e.result.urls)||void 0===t?void 0:t[0];return o.createElement("div",{className:b()},e.result.fullAddress?o.createElement("div",{className:b("item")},o.createElement(f.Z,{inline:!0,name:"logo-24",className:b("icon")}),e.result.fullAddress):null,p?o.createElement("div",{className:b("item")},o.createElement("div",null,p?o.createElement("div",{className:b("phone-container")},o.createElement("a",{className:b("main-phone"),href:"tel:"+(null!==(n=p.value)&&void 0!==n?n:p.number)},o.createElement(f.Z,{inline:!0,name:"call-24",className:b("icon")}),p.number),m.length>0?o.createElement("div",{className:b("flip"),onClick:l},m.length,o.createElement(v,{isFlipped:c})):null):null,c?m.map((function(e){var t;return o.createElement("a",{key:e.number,className:b("phone"),href:"tel:"+(null!==(t=e.value)&&void 0!==t?t:e.number)},e.number)})):null)):null,h?o.createElement("div",{className:b("item")},o.createElement(f.Z,{inline:!0,name:"web-24",className:b("icon")}),o.createElement("a",{className:b("url"),href:h,target:"_blank"},s.DJ(h,!0))):null)};var E=n(2027),S=n(6176),C=(0,i.Z)("map-widget-business-buttons-view"),k=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._renderGetToButton=function(){if(c.Wv(t.props.result))return null;var e={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},n=(0,u._)((0,u.V)([{coords:null,value:""},e],{},t.props.config));return o.createElement("div",{className:C("button-container")},o.createElement(S.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:n,target:"_blank"},"Как добраться"))},t._renderAboutButton=function(){return o.createElement("div",{className:C("button-container")},o.createElement(S.Z,{view:"primary",size:"small",isStretched:!0,url:t.props.businessUrl,target:"_blank"},"Об организации"))},t}return(0,r.Z)(t,e),t.prototype.render=function(){return o.createElement("div",{className:C()},this._renderGetToButton(),this._renderAboutButton())},t}(o.Component);const R=(0,a.ZP)(k);var Z=n(267),P=n(4807),M=n(9705),I={};const x={getRoute:function(e,t){var n=e.points.map((function(e){return e?(0,M.s)(e):""})).join("~");return I[n]||(I[n]=(0,P.Z)("taxi/getRoute",{query:{rll:n,lang:t.locale}},t)),I[n]},checkCoverage:function(e,t){return(0,P.Z)("taxi/checkCoverage",{query:{ll:(0,M.s)(e.center),lang:t.locale}},t)},launch:function(e,t){return(0,P.Z)("taxi/launch",{body:{lang:e.locale,id:t}},e).then((function(e){if(!e)throw new Error("The taxi launch response don't include userId");return e}))}};var T=(0,i.Z)("map-widget-taxi-link-view");const L=function(e){var t=(0,a.ZR)(),n=Z.Z((function(){return x.checkCoverage({center:e.endPoint},t)}),[e.endPoint,t],{value:null,loading:!1}),r=n[0],i=n[1];o.useEffect((function(){i()}),[e.endPoint,i]);return r.value||r.loading?o.createElement("div",{className:T()},o.createElement(f.Z,{name:"yndx-taxi-16",className:T("icon")}),o.createElement("a",{className:T("link"),href:function(){var n,r,o,i=null===(n=t.mapWidget)||void 0===n?void 0:n.taxi,a=t.uatraits.isMobile;if(i){var c=(null===(r=e.startPoint)||void 0===r?void 0:r.map(String))||[],u=c[0],l=void 0===u?"":u,d=c[1],p=void 0===d?"":d,f=e.endPoint.map(String),m=f[0],v=void 0===m?"":m,h=f[1],g=void 0===h?"":h;return s.Ow({urlTemplate:a?i.mobileUrlTemplate:i.urlTemplate,domain:i.domain,startLat:p,startLon:l,endLat:g,endLon:v,tariffClass:"",lang:null!==(o=i.lang)&&void 0!==o?o:"ru"})}}(),target:"_blank"},"Вызвать такси")):null};var D=n(1137),z=(0,i.Z)("map-widget-business-content-view"),A=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._getCategories=function(){if(t.props.result.categories&&0!==t.props.result.categories.length)return t.props.result.categories.map((function(e){return e.name})).join(", ")},t._renderFeedbackUrl=function(){var e=t.props,n=s.ne(e.result.id),r=(0,u._)(s.e_(n,e.config));return o.createElement("a",{className:z("feedback-link"),href:r,target:"_blank"},"Сообщить об ошибке")},t._renderTaxiUrl=function(){var e=t.props;return c.Wv(e.result)?null:o.createElement(L,{endPoint:e.result.coordinates,startPoint:e.userCoordinates})},t}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=s.S$({id:e.result.id,seoname:e.result.seoname},{},{baseUrl:""}),n=(0,u._)(s.e_("/"+t,e.config));return o.createElement("div",{className:z()},o.createElement(D.Z,{title:e.result.title,titleUrl:n,subtitle:this._getCategories()}),o.createElement(y,{result:this.props.result},o.createElement(l.Z,{result:e.result})),o.createElement(w,{result:e.result}),o.createElement("div",{className:z("stops")},o.createElement(E.Z,{result:e.result})),o.createElement("div",{className:z("business-buttons")},o.createElement(R,{businessUrl:n,result:e.result})),o.createElement("div",{className:z("bottom-links")},this._renderTaxiUrl(),this._renderFeedbackUrl()))},t}(o.Component);const N=(0,a.ZP)(A)},9283:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(4578),o=n(7363),i=n(5876),a=n(2514),s=n(5095),c=n(6382),u=n(7179),l=n(1491),d=n(943),p=n(6695),f=(0,i.Z)("a11y-hidden");const m=function(e){var t=e.children,n=e.tag,r=void 0===n?"span":n;return t?o.createElement(r,{className:f()},t):null};var v=n(1581),h=(0,i.Z)("business-rating-badge-view"),g=(0,u.Z)(a.ZP,v.ZP);const y=g((function(e){var t=Math.round(2*e.ratingValue),n=Math.floor(t/2),r=!1;2*n!==t&&(r=!0);var i=e.size||"m",a=e.collapseStars?1:5;return o.createElement(d.ZP,{name:"business_rating"},o.createElement("span",{className:h({size:i})},o.createElement("div",{className:h("stars")},new Array(a).fill(null).map((function(t,a){var s=r&&a===n,c=a>=(r?n+1:n),u=!c&&!s,d=s?"half-star-12":"empty-star-12";return o.createElement(l.Z,{name:d,className:h("star",{full:u,half:s,empty:c,size:i}),theme:s?e.theme:void 0,key:a,inline:!0})}))),e.onlyStars?null:o.createElement("span",{className:h("rating")},o.createElement(m,null,"Рейтинг"),o.createElement("span",{className:h("rating-text",{size:i})},p.D(e.ratingValue,e.config.lang,{min:1,max:1})))))}));var _=n(9971),b=(0,i.Z)("map-widget-business-rating-view"),w=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._getReviewUrl=function(){if(!t.props.disableLink){var e=s.S$(t.props.result,{sublanding:"reviews"},{},{"add-review":""});return(0,c._)(s.e_("/"+e,t.props.config))}},t._renderContent=function(){var e,n=t.props;return n.result.ratingData?n.result.ratingData.ratingValue?o.createElement(y,{ratingValue:n.result.ratingData.ratingValue}):(e={count:n.result.ratingData.reviewCount}).count?e.count+" "+(e.count%10==1&&e.count%100!=11?"отзыв":e.count%10>1&&e.count%10<5&&(e.count%100<10||e.count%100>20)?"отзыва":"отзывов"):"Ещё нет отзывов":null},t}return(0,r.Z)(t,e),t.prototype.render=function(){return o.createElement(_.Z,{text:"Оценить место",position:"bottom",isAir:!0},o.createElement("a",{className:b(),href:this._getReviewUrl(),target:"_blank"},this._renderContent()))},t}(o.Component);const E=(0,a.ZP)(w)},1137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7363),o=(0,n(5876).Z)("map-widget-content-title-view");const i=function(e){return r.createElement(r.Fragment,null,r.createElement("a",{href:e.titleUrl,target:"_blank",className:o("title",{disabled:!e.titleUrl})},e.title),e.subtitle?r.createElement("div",{className:o("subtitle")},e.subtitle):null)}},7846:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(4578),o=n(7363),i=n(5876),a=n(576),s=n(8024),c=n(5900),u=n(309);var l=n(5968),d=n(849),p=n(1228),f=n(7535),m=(0,i.Z)("map-widget-content-view"),v={top:10,right:8};const h=function(e){function t(t){var n;return(n=e.call(this,t)||this)._containerRef=null,n._updateMapLocation=function(){var e;if(n.props.updateLocationRequest){var t=n.state.maxHeight||n.state.height,r=null===(e=n._containerRef)||void 0===e?void 0:e.offsetWidth;if(t&&r){var o,i,a,l="panel"===n.props.displayType?(o=n.props.mapLocation,i=n.props.coordinates,(a=(0,c.f)(i,o.zoom))[1]+=32,(0,u.W)(a,o.zoom)):function(e,t,n,r){var o,i=e.bounds,a=(0,s.V)(i,t)?e.center:t,l=(0,s.V)(i,t)?t:e.center,d=(0,c.f)(a,e.zoom),p=(0,c.f)(l,e.zoom),f=i.map((function(t){return(0,c.f)(t,e.zoom)})),m=p[0]-f[0][0],v=f[1][0]-p[0],h=p[1]-f[1][1],g=Math.min(m,v),y=[].concat(d),_=Math.ceil(n.width/2);if(g<_){var b=_-g;m>=v?y[0]+=b:y[0]-=b}var w=n.height+(null!==(o=null==r?void 0:r.main)&&void 0!==o?o:0);return h<w&&(y[1]-=w-h+10),(0,u.W)(y,e.zoom)}(n.props.mapLocation,n.props.coordinates,{width:r,height:t},n.props.offset);n.props.updateLocationRequest({center:l,duration:300})}}},n._updateWidthHeight=function(){var e,t,r,o;n._containerRef&&n.setState({height:n._containerRef.clientHeight,width:"balloon"===n.props.displayType?n._containerRef.clientWidth:void 0,maxHeight:"balloon"===n.props.displayType?(e=n.props.mapLocation,t=n._containerRef.clientHeight,r=e.bounds.map((function(t){return(0,c.f)(t,e.zoom)})),o=r[0][1]-r[1][1]+22,o<t?o:t):Math.ceil(n.props.mapSize.height/2),ready:!0},(function(){return n._updateMapLocation()}))},n._setContainerRef=function(e){n._containerRef=e,n._updateWidthHeight()},n._renderContainer=function(){return o.createElement("div",{className:m("container",{ready:n.state.ready}),ref:n._setContainerRef,style:{height:n.state.height,maxHeight:n.state.maxHeight,width:n.state.width}},o.createElement(d.Z,{width:"dynamic"},o.createElement("div",{className:m("frame")},n.props.children)))},n.state={},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this;e.coordinates===this.props.coordinates&&e.displayType===this.props.displayType&&(0,a.Z)(this.props.mapSize,e.mapSize)||this.setState({height:void 0,width:void 0,maxHeight:void 0,ready:void 0},(function(){t._updateWidthHeight()}))},n.render=function(){var e=this.props;return"balloon"===e.displayType?o.createElement(l.Z,{coordinates:e.coordinates,key:e.coordinates.join(),position:"top",restrictPosition:!0,type:"normal",skipMaxHeight:!0,offset:e.offset,isShown:!0},o.createElement("div",{className:m("balloon")},o.createElement(p.Z,{offset:v,onClick:e.onClose}),this._renderContainer())):o.createElement(f.v7,null,o.createElement("div",{className:m("panel"),key:e.coordinates.join()},o.createElement(p.Z,{offset:v,onClick:e.onClose}),this._renderContainer()))},t}(o.Component)},9993:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(7363),o=n(5876),i=n(6176),a=n(1491),s=(0,o.Z)("map-widget-in-maps-button");const c=function(e){var t=r.createElement(a.Z,{name:"logo-24",inline:!0,className:s("icon")});return r.createElement(i.Z,{view:"air",size:"small",icon:t,url:e.url,target:"_blank"},e.children)}},7535:(e,t,n)=>{"use strict";n.d(t,{v7:()=>ce,oQ:()=>se,ZP:()=>ue});var r=n(7462),o=n(3144),i=n(4578),a=n(7363),s=n(5876);const c=function(e){var t=null,n=null,r=!1,o=!1,i=-1;function a(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];if(o)return r=!0,t=c,void(n=this);e.apply(this,c),o=!0,i=window.requestAnimationFrame((function(){o=!1,r&&(r=!1,n=null,t=null,a.apply(n,t))}))}return a.scheduled=o,Object.defineProperty(a,"scheduled",{get:function(){return o}}),a.cancel=function(){window.cancelAnimationFrame(i),i=-1,o=!1,r=!1,n=null,t=null},a};var u=n(576),l=n(2514),d=n(9056),p=n(6576),f=n(5698),m=n(3590),v=n(4986),h=(0,f.ZP)();const g=h(function(e){function t(t){var n;return(n=e.call(this,t)||this)._targetZoom=void 0,n._getState=function(){var e=n.props.map;if(!e)return{zoomOutIsEnabled:!1,zoomInIsEnabled:!1};var t=Math.round(100*e.zoom)/100;return{zoomOutIsEnabled:t>e.zoomRange.min,zoomInIsEnabled:t<e.zoomRange.max}},n._updateButtons=function(){n.setState(n._getState())},n._changeZoom=function(e){var t=n.props.map;if(t){var r,o=null!==(r=n._targetZoom)&&void 0!==r?r:t.zoom;n._targetZoom=o+e;var i=n._targetZoom;t.animateCenterAndZoom(t.center,n._targetZoom,200).then((function(){i===n._targetZoom&&(n._targetZoom=void 0)}))}},n._onZoomIn=function(e){e.preventDefault(),n._changeZoom(1)},n._onZoomOut=function(e){e.preventDefault(),n._changeZoom(-1)},n.state=n._getState(),n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){!e.map&&this.props.map&&this._updateButtons()},n.render=function(){return a.createElement(a.Fragment,null,a.createElement(v.Z,{onUpdate:this._updateButtons,onZoomRangeChange:this._updateButtons}),a.createElement(m.Z,{onZoomIn:this._onZoomIn,onZoomOut:this._onZoomOut,disabledZoomIn:!this.state.zoomInIsEnabled,disabledZoomOut:!this.state.zoomOutIsEnabled,size:this.props.size}))},t}(a.PureComponent));var y=n(1597),_=n(9031),b=n(943),w=n(6176),E=n(9971),S=n(5946);const C='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.385 12.42l16.01-7.614a.6.6 0 0 1 .8.8l-7.616 16.009a.6.6 0 0 1-1.11-.068l-2.005-6.012-6.01-2.003a.6.6 0 0 1-.069-1.111z" fill="currentColor"/></svg>';var k=n(1784),R=(0,s.Z)("map-geolocation-control"),Z=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._onClick=function(e){e.preventDefault(),t.props.onClick()},t._renderIcon=function(){var e=t.props;if(e.isLoading)return a.createElement("div",{className:R("spinner")},a.createElement(S.Z,{view:"small",withoutMargin:!0}));var n=Boolean(e.config.mapWidget);return a.createElement("div",{className:R("icon"),dangerouslySetInnerHTML:{__html:e.config.uatraits.isMobile&&!n?k.location48Icon:C}})},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e,t=this.props,n=null!==(e=t.size)&&void 0!==e?e:t.config.uatraits.isMobile?"large":"medium",r=Boolean(t.config.mapWidget);return a.createElement("div",{className:R({noprint:!0})},a.createElement(E.Z,{text:"Моё местоположение",position:"left",isAir:!0},a.createElement(b.ZP,{name:"geolocation",logClick:!0},a.createElement(w.Z,{view:t.config.uatraits.isMobile&&!r?"air-round":"air",size:n,icon:this._renderIcon(),onClick:this._onClick,disabled:t.isLoading,checked:t.isChecked,ariaLabel:"Моё местоположение"}))))},t}(a.Component);const P=(0,l.ZP)(Z);var M=n(5560),I=(0,s.Z)("map-widget-map-scale-line-view");const x=function(e){return a.createElement("div",{className:I()},a.createElement(M.default,{center:e.location.center,zoom:e.location.zoom}))};var T=(0,s.Z)("map-widget-ruler-control-view");const L=function(e){return a.createElement("div",{className:T()},a.createElement(E.Z,{text:"Линейка",position:"left",isAir:!0},a.createElement(w.Z,{ariaHidden:!0,icon:a.createElement("div",{className:T("icon"),dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.56 14.363L14.363 3.56a1.91 1.91 0 0 1 2.7 0l3.377 3.376a1.91 1.91 0 0 1 0 2.7L9.636 20.442a1.91 1.91 0 0 1-2.7 0l-3.377-3.377a1.91 1.91 0 0 1 0-2.7zm4.12-.743l1.282-1.282 1.823 1.824a.764.764 0 1 0 1.08-1.082l-1.824-1.822 1.216-1.215 1.148 1.145a.763.763 0 0 0 1.318-.534.765.765 0 0 0-.237-.545l-1.148-1.147 1.282-1.283 1.824 1.824a.764.764 0 0 0 1.08-1.082l-1.825-1.824 1.014-1.012a.478.478 0 1 0-.676-.675L4.91 15.038a.478.478 0 0 0 .675.675l1.012-1.012 1.15 1.146a.764.764 0 1 0 1.08-1.079L7.679 13.62v.001z" fill="currentColor"/></svg>'}}),view:"air",size:"small",onClick:function(){return e.updateRuler({isEnabled:!e.isEnabled})},checked:e.isEnabled})))};var D=n(3513);var z=(0,s.Z)("traffic-raw-icon");const A=(0,l.ZP)((function(e){var t=e.checked?D.ZU(e.level):"none";return a.createElement("div",{className:z({color:t})},a.createElement("div",{className:z("icon"),dangerouslySetInnerHTML:{__html:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10z" fill="#CCC"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 12c0 5.523 4.477 10 10 10s10-4.477 10-10-4.477-10-10-10-10 4.477-10 10zm18.333 0a8.333 8.333 0 1 1-16.666 0 8.333 8.333 0 0 1 16.666 0z" fill="#4D4D4D"/><path d="M9.75 2h2.5c5.514 0 10 4.486 10 10a5.605 5.605 0 0 1-3.976-1.65c-1.018-1.018-1.68-2.104-3.22-3.906C13.694 4.857 11.818 3.25 9.75 3.25c-4.136 0-7.5 3.926-7.5 8.75C1.456 11.059 1 10.005 1 8.875 1 5.085 3.547 2 9.75 2z" fill="#4D4D4D"/></svg>'}}),a.createElement("div",{className:z("text")},e.checked?e.level:null))}));var N=(0,s.Z)("map-widget-traffic-control-view");const U=function(e){var t=a.createElement(A,{checked:e.isActive,level:e.level});return a.createElement("div",{className:N()},a.createElement(w.Z,{onClick:e.onClick,icon:t,size:"small",view:"air"},e.hasText?"Пробки":null))};var O=(0,s.Z)("layout-control-group");const F=function(e){function t(t){var n;return(n=e.call(this,t)||this)._root=a.createRef(),n._onResizeThrottled=void 0,n._onUpdate=function(){var e=n.props,t=n._root.current.clientHeight,r=n._root.current.clientWidth;e.height>0&&t>0||e.onUpdate(e.type,{height:t,width:r})},n._onResize=function(){n._onUpdate()},n._onResizeThrottled=c(n._onResize),n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._root.current.clientHeight,n=this._root.current.clientWidth;e.onUpdate(e.type,{position:e.position,height:t,width:n})},n.componentDidUpdate=function(e){this.props.position!==e.position&&this.props.onUpdate(this.props.type,{position:this.props.position})},n.render=function(){var e=this.props,t=!e.visible,n="left"===e.side?[e.sideLeftMargin+"px",void 0]:"right"===e.side?[void 0,e.sideRightMargin+"px"]:[e.sideLeftMargin+"px",e.sideRightMargin+"px"],r=n[0],o=n[1];return a.createElement(b.ZP,{group:!0,hidden:t},a.createElement("div",{ref:this._root,className:O({side:e.side||"right",hidden:t,animated:e.animated}),"data-type":e.type,style:{transform:"translateY("+e.top+"px)",left:r,right:o}},e.children,a.createElement(d.Z,{onResize:this._onResizeThrottled})))},t}(a.Component);var B=n(5196);function H(e){for(var t,n={},o=0,i=(0,B.Z)(e.controlsOrder);!(t=i()).done;){var a=t.value[0],s=0,c=e.controlGroups[a];if(c&&0!==c[e.dimension]){var u=!n[c.type];u&&(s+=c[e.dimension]+e.betweenMargin);var l=o+s;if(l>e.viewport+e.betweenMargin)break;u&&(n[a]=(0,r.Z)({},c)),o=l}}return{controlGroups:n}}var q=function(e,t,n){var o={top:G(n.betweenMargin),center:G(n.betweenMargin),bottom:G(n.betweenMargin)};e.forEach((function(e){o[e.position].height+=e.height+n.betweenMargin})),o.top.height=Math.max(o.top.height,0),o.center.height=Math.max(o.center.height,0),o.bottom.height=Math.max(o.bottom.height,0),o.top.top=n.topSizes.minTop;var i=o.top.top+o.top.height+n.betweenMargin;return o.bottom.top=j(n.topSizes.maxTop-o.bottom.height,i,n.topSizes.maxTop),o.center.top=j(n.topSizes.middle-Math.round(o.center.height/2),i,o.bottom.top-n.betweenMargin-o.center.height),e.reduce((function(e,i){var a,s=o[i.position],c=s.top,u=Math.abs(i.top-c),l=u>20&&u<300&&n.enableAnimation,d=(0,r.Z)({},t[i.type],{animated:l,top:c});return s.top+=i.height+n.betweenMargin,(0,r.Z)({},e,((a={})[i.type]=d,a))}),{})};function G(e){return{top:0,height:-e,width:-e}}function W(e,t){return Object.values(e).filter((function(e){return Boolean(e)})).sort((function(e,n){return t.indexOf(e.type)-t.indexOf(n.type)}))}function j(e,t,n){return Math.max(Math.min(e,n),t)}var V=(0,s.Z)("map-widget-layout-view"),Y=12,K=["zoom","rulers","top-controls","geolocation"],X=["zoom","3D"],$=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],Q=["open-in-maps-medium","open-in-maps-small","open-in-maps-tiny"],J=[["zoom"],["top-controls"],["geolocation"],["3D"]],ee=[["zoom"],["3D"]],te=[["open-in-maps-medium"],["open-in-maps-small"],["open-in-maps-tiny"],["search"]],ne=[["open-in-maps-small"]],re=[["open-in-maps-medium"]],oe=V("top-panel"),ie=V("bottom-panel"),ae=function(e){function t(t){var n;return(n=e.call(this,t)||this)._repositionThrottled=void 0,n._root=a.createRef(),n._getFittingBottomLayout=function(){var e,t=n.state,r=((null===(e=n._root.current)||void 0===e?void 0:e.clientWidth)||0)-305,o=Object.keys(H({controlsOrder:re,viewport:r,controlGroups:t.controlGroups,betweenMargin:Y,dimension:"width"}).controlGroups),i=Object.keys(H({controlsOrder:ne,viewport:r,controlGroups:t.controlGroups,betweenMargin:Y,dimension:"width"}).controlGroups);return 1===o.length?["open-in-maps-medium"]:1===i.length?["open-in-maps-small"]:["open-in-maps-tiny","rulers"]},n._reposition=function(){var e,t=n.state,o=(null===(e=n._root.current)||void 0===e?void 0:e.clientHeight)||0,i=10+o,a=j(i,10,o),s=Math.round((i+10)/2),c=n._getFittingBottomLayout(),l=H({controlsOrder:te.filter((function(e){var t=e[0];return!Q.includes(t)||c.includes(t)})),viewport:o,controlGroups:t.controlGroups,betweenMargin:Y,dimension:"height"}),d=H({controlsOrder:n._isFlyover?ee:J,viewport:o,controlGroups:t.controlGroups,betweenMargin:Y,dimension:"height"}),p=W(l.controlGroups,$),f=W(d.controlGroups,n._isFlyover?X:K),m=q(f,n.state.controlGroups,{betweenMargin:Y,topSizes:{maxTop:a,minTop:10,middle:s},enableAnimation:!0}),v=q(p,n.state.controlGroups,{betweenMargin:Y,topSizes:{maxTop:a,minTop:10,middle:s},enableAnimation:!0}),h=[].concat(Object.keys(m),Object.keys(v)),g=(0,r.Z)({},t.controlGroups,m,v);(0,u.Z)(t.controlGroups,g)&&(0,u.Z)(t.visibleControlGroups,h)||n.setState({visibleControlGroups:h,controlGroups:g})},n._onControlGroupUpdate=function(e,t){n.setState((function(n){var o;return(0,r.Z)({},n,{controlGroups:(0,r.Z)({},n.controlGroups,(o={},o[e]=(0,r.Z)({type:e},n.controlGroups[e],t),o))})}),n._reposition)},n._getControlGroups=function(){return[{type:"top-controls",position:"top",side:"right",children:n._renderTopControls()},{type:"zoom",position:n.state.visibleControlGroups.length<=2?"top":"center",side:"right",children:n._renderZoomControls("small")},{type:"geolocation",position:"center",side:"right",children:n._renderGeolocationControl()},{type:"open-in-maps-medium",position:"bottom",side:"left",children:n._renderInMaps("medium")},{type:"open-in-maps-small",position:"bottom",side:"left",children:n._renderInMaps("small")},{type:"open-in-maps-tiny",position:"bottom",side:"left",children:n._renderInMaps("tiny")},{type:"search",position:"top",side:"left",children:n.props.search.render()}]},n._getFlyoverControlGroups=function(){return[{type:"zoom",position:"center",side:"right",sideRightMargin:12,children:n._renderZoomControls()},{type:"3D",position:"center",side:"right",sideRightMargin:12,children:n._render3DControl()}]},n._renderGeolocationControl=function(){return a.createElement("div",{className:V("geolocation")},a.createElement(P,{onClick:n.props.geolocation.onClick,isLoading:n.props.geolocation.isStarted,size:"small"}))},n._render3DControl=function(){return a.createElement("div",{className:V("3d")},a.createElement(y.Z,null))},n._renderTopControls=function(){return a.createElement("div",{className:V("top-controls")},n._renderRuler(),n._renderTrafficControl())},n._renderTrafficControl=function(){return a.createElement(U,(0,r.Z)({},n.props.traffic,{hasText:!0}))},n._renderRuler=function(){return a.createElement("div",{className:V("ruler")},a.createElement(L,(0,r.Z)({},n.props.ruler)))},n._renderInMaps=function(e){return a.createElement("div",{className:V("maps-links")},n.props.inMaps.render(e))},n._renderZoomControls=function(e){return a.createElement("div",{className:V("zoom-controls")},a.createElement(g,{size:e}))},n.state={visibleControlGroups:[],controlGroups:{}},n._repositionThrottled=c(n._reposition),n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._repositionThrottled()},n.render=function(){var e=this,t=this._isFlyover?this._getFlyoverControlGroups():this._getControlGroups();return a.createElement("div",{className:V()},a.createElement("div",{className:V("layout")},a.createElement("div",{ref:this._root,className:V("controls")},t.map((function(t){var n,o,i,s,c;return a.createElement(F,(0,r.Z)({},t,{key:t.type,sideLeftMargin:t.sideLeftMargin||8,sideRightMargin:t.sideRightMargin||8,visible:e.state.visibleControlGroups.includes(t.type),animated:null===(n=e.state.controlGroups[t.type])||void 0===n?void 0:n.animated,height:null!==(o=null===(i=e.state.controlGroups[t.type])||void 0===i?void 0:i.height)&&void 0!==o?o:0,top:null!==(s=null===(c=e.state.controlGroups[t.type])||void 0===c?void 0:c.top)&&void 0!==s?s:0,onUpdate:e._onControlGroupUpdate}))}))),a.createElement("div",{className:V("bottom-layout")},a.createElement("div",{className:V("copyrights")},a.createElement(_.Z,{right:100,copyrightOnly:!0})),a.createElement("div",{className:V("scale-line")},a.createElement(x,{location:this.props.location}))),a.createElement(d.Z,{onResize:this._repositionThrottled})),a.createElement("div",{className:oe}),a.createElement("div",{className:ie}))},(0,o.Z)(t,[{key:"_isFlyover",get:function(){var e;return Boolean(null===(e=this.props.config.flyover)||void 0===e?void 0:e.isEnabled)}}]),t}(a.Component),se=function(e){return a.createElement(p.Z,{selector:"."+oe},e.children)},ce=function(e){return a.createElement(p.Z,{selector:"."+ie},e.children)};const ue=(0,l.ZP)(ae)},2027:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(4578),o=n(7363),i=n(5876),a=n(2514),s=n(6382),c=n(1491),u=(0,i.Z)("map-widget-nearest-stops-view"),l=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._renderFromStopDistance=function(e){var n={coords:t.props.result.coordinates,value:"",uri:t.props.result.uri},r={coords:e.coordinates,value:""},i=(0,s._)((0,s.V)([r,n],{travelMode:"pedestrian"},t.props.config));return o.createElement("a",{className:u("distance"),href:i,target:"_blank"},o.createElement("div",{className:u("distance-icon")},o.createElement(c.Z,{name:"pedestrian-24",inline:!0,className:u("distance-icon-inner")})),o.createElement("div",{className:u("distance-text")},e.distance))},t._renderStop=function(e){var n="metro"===e.type?e.color:void 0;return o.createElement("div",{className:u("stop"),key:e.id},o.createElement("div",{className:u("metro-icon")},o.createElement(c.Z,{name:"metro-stop-24",style:{color:n},inline:!0})),o.createElement("div",null,e.name),t._renderFromStopDistance(e))},t}return(0,r.Z)(t,e),t.prototype.render=function(){return this.props.result.metro?this.props.result.metro.map(this._renderStop):null},t}(o.Component);const d=(0,a.ZP)(l)},6174:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,x:()=>s});var r=n(7462),o=n(7363),i=n(6493),a=n(634),s={advert:void 0,brandingId:void 0};const c=function(e){var t,n=1===e.results.items.length?e.results.items[0]:void 0,c=e.results.exactResult||n;return o.createElement(o.Fragment,null,!c||null!==(t=e.hiddenResults)&&void 0!==t&&t.find((function(e){return e.id===c.id}))?null:o.createElement(o.Fragment,null,o.createElement(i.Z,{key:c.id,result:(0,r.Z)({},c,s),coordinates:c.coordinates,mode:"subtitle",onClick:e.onPlacemarkClick}),c.uri?o.createElement(a.Z,{uri:c.uri}):null),e.results.items.filter((function(t){var n;return t.id!==(null==c?void 0:c.id)&&!(null!==(n=e.hiddenResults)&&void 0!==n&&n.find((function(e){return e.id===t.id})))})).map((function(t){var n=(0,r.Z)({},t,s);return o.createElement(i.Z,{key:t.id,result:n,coordinates:n.coordinates,mode:"base",onClick:e.onPlacemarkClick})})))}},9064:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(4578),o=n(7363),i=n(129),a=n(9705),s=n(5876),c=n(2514),u=n(5095),l=n(6382),d=n(6176),p=n(2027),f=n(1137),m=(0,s.Z)("map-widget-toponym-content-view"),v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this)._getUrl=function(){var e,n=u.hL(t.props.result,t.props.result.region,{baseUrl:"",skipPointCheck:!0});n||(n="?"+i.stringify({poi:{uri:null===(e=t.props.result)||void 0===e?void 0:e.uri,point:(0,a.s)(t.props.result.coordinates)}}));var r=(0,l._)(u.e_("/"+n,t.props.config));return t.props.isTrafficLayerEnabled&&(r+="&l="+(t.props.config.query.l||"trf")),r},t._getInsideUrl=function(){var e=t.props.result.businesses&&t.props.result.businesses.totalResultCount>0,n=u.hL(t.props.result,t.props.result.region,{baseUrl:"",skipPointCheck:!0},e?{sublanding:"inside"}:{});return(0,l._)(u.e_("/"+n,t.props.config))},t._renderContent=function(){return"house"===t.props.result.kind?o.createElement(o.Fragment,null,o.createElement("div",{className:m("nearest-stops")},o.createElement(p.Z,{result:t.props.result})),o.createElement("div",{className:m("button-wrapper")},o.createElement(d.Z,{view:"primary",size:"small",isStretched:!0,url:t._getInsideUrl(),target:"_blank"},"Организации в доме"))):o.createElement("div",{className:m("button-wrapper")},o.createElement(d.Z,{view:"primary",size:"small",isStretched:!0,url:t._getUrl(),target:"_blank"},"Открыть в Картах"))},t._renderFeedbackUrl=function(){if(!t.props.result.uri)return null;var e=u.zN(t.props.result.uri),n=u.e_(e,t.props.config);return o.createElement("div",{className:m("button-wrapper")},o.createElement(d.Z,{view:"secondary-blue",size:"small",isStretched:!0,url:n,target:"_blank"},"Сообщить об ошибке"))},t}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement("div",{className:m()},o.createElement("div",{className:m("title-wrapper")},o.createElement(f.Z,{title:e.result.title,titleUrl:this._getUrl(),subtitle:this.props.result.description})),this._renderContent(),this._renderFeedbackUrl())},t}(o.Component);const h=(0,c.ZP)(v)},3682:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p,Y:()=>l});var r=n(7462),o=n(4578),i=n(7363),a=n(2514),s=n(8766),c=n(5698),u=n(3214),l="tile3d",d=function(e){function t(t){var r;return(r=e.call(this,t)||this)._dataSource=void 0,r._shouldHover=function(e){return!1},r._dataSource={type:"tile3d",priority:"high",workerUrl:r.props.config.baseUrl+new URL(n(1367),n.b).pathname},r}(0,o.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){this._addLayer()},a.componentWillUnmount=function(){this._removeLayer()},a._getMapLayers=function(){var e=this.props.map.getLayers(),t=e.mainLayers,n=e.topRasterLayers;return[].concat(t,n)},a._setMapLayers=function(e){this.props.map.setLayers((0,u.c8)(e,this.props.ymaps3.EventBlockerLayer,this.props.config))},a._addLayer=function(){this.props.map.addDataSource(l,this._dataSource);var e=this._getMapLayers();e.push.apply(e,(0,u.se)(l)),this._setMapLayers(e)},a._removeLayer=function(){var e=(0,u.se)(l),t=this._getMapLayers().filter((function(t){return!e.includes(t)}));this._setMapLayers(t),this.props.map.getDataSource(l)&&this.props.map.removeDataSource(l)},a.render=function(){return i.createElement(s.Z,(0,r.Z)({layer:l},this.props,{shouldHover:this._shouldHover}))},t}(i.Component);const p=(0,a.ZP)((0,c.ZP)({shouldWait:!0})(d))},3214:(e,t,n)=>{"use strict";n.d(t,{mt:()=>b,pr:()=>w,c8:()=>k,Hi:()=>d,UZ:()=>u,Il:()=>l,se:()=>P,_I:()=>T,Iw:()=>_,pp:()=>x,x8:()=>I,gh:()=>D,c1:()=>E});var r=n(7462),o=n(129),i=n.n(o),a=n(6068),s=n(5733),c=n(9370),u={DEFAULT_MARKERS:"defaultMarkers",DEFAULT_GRAPHICS:"defaultGraphics",DEFAULT_GRAPHICS_UNDER_BUILDINGS:"defaultGraphicsUnderBuildings",NIGHT_CIVIL_GRAPHICS:"nightCivilGraphics",NIGHT_NAVI_GRAPHICS:"nightNaviGraphics",NIGHT_ASTRO_GRAPHICS:"nightAstroGraphics",NIGHT_GRAPHICS:"nightGraphics",RASTER_GRAPHICS:"rasterGraphics",EDITOR_MARKERS:"editorMarkers",EDITOR_GRAPHICS:"editorGraphics"},l=":customDomLayer(eventBlocker)",d=["map","sat","skl"],p=["map","sat"],f=["map","trf","trfe","trfa","stv","pht","indoor","carparks","mrc","mrcpe","personalizedPoi","tile3d",u.DEFAULT_GRAPHICS,u.DEFAULT_GRAPHICS_UNDER_BUILDINGS],m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",v={map:function(e){var t=e.mapTiles,n=e.mapjTiles;return{url:C(t),hotspotsUrl:C(n)}},sat:function(e){return{url:C(e.satTiles)}},skl:function(e){var t=e.sklTiles,n=e.skljTiles;return{url:C(t),hotspotsUrl:C(n)}},stv:function(e){return{url:e.stvTiles.replace("l=stv","l=stv,sta")}},sta:function(e){return{hotspotsUrl:e.staHotspotTiles}},pht:function(e){var t=e.phtRenderer;return{url:t+"tiles?l=pht&%c&v=%v&%l&format=png",hotspotsUrl:t+"tiles?l=phj&%c&v=%v&%l&format=json"}},mrc:function(e){return{url:e.mrcTiles+"&camera-direction=front",hotspotsUrl:e.mrcHotspotTiles+"&camera-direction=front"}},mrcpe:function(e){return{url:e.mrcpeTiles+"&camera-direction=front",hotspotsUrl:e.mrcpeHotspotTiles+"&camera-direction=front"}},carparks:function(e){return{url:e.carparksTiles}},personalizedPoi:function(){return{}}},h=["map:ground","sat:ground","skl:ground","personalizedPoi:ground","trf:ground","trfe:ground","trfa:ground","carparks:ground","mrc:ground","mrcpe:ground","stv:ground","indoor:ground",u.DEFAULT_GRAPHICS_UNDER_BUILDINGS,"map:buildings","tile3d:buildings",u.DEFAULT_GRAPHICS,"map:icons","map:labels","personalizedPoi:icons","personalizedPoi:labels","trfe:icons","trfe:labels","carparks:icons","indoor:icons","indoor:labels","stv:icons","pht:icons","sta:ground","pht:ground",u.NIGHT_CIVIL_GRAPHICS,u.NIGHT_NAVI_GRAPHICS,u.NIGHT_ASTRO_GRAPHICS,u.NIGHT_GRAPHICS,u.RASTER_GRAPHICS,u.DEFAULT_MARKERS,l,u.EDITOR_GRAPHICS,u.EDITOR_MARKERS],g={vector:{transformLayers:{"map:buildings":{opacity:.7}}}};function y(e){var t=e&&function(e){var t=e.uatraits.isMobile,n=e.experiments.ui.vectorExtendTaps;return t&&n?{field:10,minSize:40}:void 0}(e),n={vector:{iconsInteractiveArea:t}};return{"map:buildings":{vector:{objectsInteractivity:!0,modelsAppearingAnimation:{transitionZoom:17,duration:250,limitByZoom:.5}}},"tile3d:buildings":{vector:{parentLayerId:"map:buildings"}},"map:icons":n,"indoor:icons":n,"trfe:icons":n,"stv:icons":n,"pht:icons":{vector:(0,r.Z)({},n.vector,{isolateObjectsColliding:!0})},"carparks:icons":n,"personalizedPoi:icons":n,"stv:ground":g,"pht:ground":g,"mrc:ground":g,"mrcpe:ground":g}}var _=["map","sat"];function b(e,t){var n=Object.keys(v).reduce((function(n,r){var o=e.layers["sta"===r?"stv":r],i=o&&o.zoomRange;return n[r]={type:"tile",raster:S(r,o,e,t),vector:Z(r,o,e,t),clampMapZoom:d.includes(r),zoomRange:i?{min:i[0],max:i[1]}:void 0},n}),{}),r=e.hosts,o=e.locale,i=e.uatraits.isMobile;return n.indoor={type:"tile",vector:I({collisionPriority:"low",priority:"low",requestTileSize:i?"X1":"X4",glyphRangeUrl:r.vectorIndoorGlyphs.replace("{{lang}}",o),imageUrl:r.vectorIndoorImages,meshUrl:r.vectorIndoorMeshes,tileUrl:L(r.vectorIndoorTiles.replace("{{lang}}",o),e),indoorPlanUrl:r.vectorIndoorPlans,theme:D(t)},e),zoomRange:{min:16.5,max:21}},Object.keys(u).forEach((function(e){n[u[e]]={type:"geojson"}})),n}function w(e,t,n){return e.replace("%l","lang="+t).replace(/(v|tm)=%v/,n?"$1="+n:"").replace(/%d\|\d+/,(function(e){return"{{"+e+"}}"})).replace(/%d/,"{{d|4}}").replace("%c","x={{x}}&y={{y}}&z={{z}}&scale={{scale}}")}function E(e,t){var n;return e+(null!==(n=t.mocks)&&void 0!==n&&n.version?"&mocks%5Bversion%5D="+t.mocks.version:"")}function S(e,t,n,r){var o=v[e];if(!t||!o)return{tileUrl:m};var i=o(n.hosts),a=function(e){return w(e,n.locale,t.version)},c=["map","skl","carparks","stv","sta","mrc","mrcpe"].includes(e)?M(n):"",u=["map","stv","sta","pht","mrc","mrcpe","carparks"].includes(e)&&"dark"===r?"&theme=dark":"",l=i.url?a(i.url)+c+u:m;return{tileUrl:"map"===e?L(l,n):l,fetchHotspots:i.hotspotsUrl?(0,s.R)(a(i.hotspotsUrl)+c):void 0,transparent:!p.includes(e),hotspotPadding:n.uatraits.isMobile?12:0}}function C(e){return e.replace("%c","v=%v&%c")}function k(e,t,n){for(var r=e.filter((function(e,t,n){return n.indexOf(e)===t})).sort((function(t,n){var r=h.indexOf(t)-h.indexOf(n);return 0===r?e.indexOf(t)-e.indexOf(n):r})).reverse(),o=[],i=r.length-1;i>=0;i--){var a=r[i],s=a.split(":")[0];if(!f.includes(s))break;o.push(a),r.splice(i,1)}return r.reverse(),{topRasterLayers:R(r,n).map((function(e){return e===l?{id:l,type:"customDomLayer",options:{raster:{implementation:t}}}:e===u.DEFAULT_MARKERS||e===u.EDITOR_MARKERS?{id:e,type:"markers",source:e}:e})),mainLayers:R(o,n)}}function R(e,t){var n=y(t);return e.map((function(e){return e in n?(0,c.F7)(e,n[e]):e}))}function Z(e,t,n,r){if(t){var o=n.locale,i=n.hosts;if("personalizedPoi"===e)return I({priority:"medium",tileUrl:L(w(i.tilesApi+"personalized_poi/tiles?l=personalized_poi&%l&v=%v&x={{x}}&y={{y}}&z={{z}}&zmin={{zmin}}&zmax={{zmax}}",n.lang,t.version),n),requestTileSize:"X4",imageUrl:i.tilesApi+"personalized_poi/icons?id={{id}}&scale={{scale}}",glyphRangeUrl:i.tilesApi+"personalized_poi/glyphs?font_id={{fontId}}&range={{range}}",theme:D(r),tileRequestWithCredentials:!0,imageRequestWithCredentials:!0,glyphRequestWithCredentials:!0},n);if("carparks"===e){var a,c=null!==(a=n.mocks)&&void 0!==a&&a.version?"":"&v=%v";return I({priority:"medium",tileUrl:E(w(i.carparksTileRenderer+"tiles?version=2&l=carparks&%l"+c+"&x={{x}}&y={{y}}&z={{z}}",n.lang,t.version),n),imageUrl:i.carparksTileRenderer+"icons?id={{id}}&scale={{scale}}",theme:D(r)},n)}if("stv"===e)return I({priority:"medium",tileUrl:w(i.stvTileRenderer+"tiles?l=sta,stv&x={{x}}&y={{y}}&z={{z}}&%l&v=%v&format=protobuf",n.lang,t.version),imageUrl:i.stvTileRenderer+"icons?id={{id}}&scale={{scale}}",theme:D(r)},n);if("pht"===e)return I({priority:"medium",tileUrl:w(i.phtRenderer+"tiles?l=pht&x={{x}}&y={{y}}&z={{z}}&%l&v=%v&format=protobuf",n.lang,t.version),imageUrl:i.phtRenderer+"icons?id={{id}}&scale={{scale}}",theme:D(r),iconsOnlyTiles:!0,lowPrecisionBeltTiles:!1,tileBeltSize:0,tileCacheSize:100},n);if("mrc"===e||"mrcpe"===e){var u="mrc"===e?i.mrcTiles:i.mrcpeTiles,l="mrc"===e?i.mrcHotspotTiles:i.mrcpeHotspotTiles;return I({priority:"medium",tileUrl:u.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front&format=protobuf",hotspots:{ground:(0,s.R)(l.replace("%c","x={{x}}&y={{y}}&z={{z}}")+"&camera-direction=front")},theme:D(r)},n)}if("map"===e){var d=n.uatraits.isMobile,p=i.vectorTiles.replace("{{lang}}",o).replace("v={{version}}",t.version?"v="+t.version:"");return I({collisionPriority:"low",priority:"high",tileBeltSize:1,requestTileSize:d?"X1":"X4",imageUrl:i.vectorImages,tileUrl:E(L(p,n),n),meshUrl:i.vectorMeshes,glyphRangeUrl:i.vectorGlyphs.replace("{{lang}}",o),hotspots:{buildings:{minZoom:16.5}},theme:D(r)},n)}}}function P(e){return h.filter((function(t){return t.startsWith(e+":")}))}function M(e){var t=(0,r.Z)({},e.experiments.rendererParams||{});return Object.keys(e.query).forEach((function(n){n.startsWith("renderer_")&&(t[n.replace(/^renderer_/,"")]=e.query[n])})),Object.keys(t).length>0?"&"+i().stringify(t,{indices:!1}):""}function I(e,t){return(0,r.Z)({},e,{imageUrl:x(e.imageUrl,t),tileUrl:x(e.tileUrl,t),meshUrl:x(e.meshUrl,t),indoorPlanUrl:x(e.indoorPlanUrl,t),glyphRangeUrl:x(e.glyphRangeUrl,t)})}function x(e,t){return e?e+M(t):e}function T(e,t){var n=(0,a.wo)(e);return n.raster&&"string"==typeof n.raster.tileUrl&&(n.raster.tileUrl=function(e,t){var n=e.split("?"),r=n[0],o=n[1],a=i().parse(o);if(r.includes(";base64"))return r;t?a.style=t:delete a.style;return Object.values(a).length>0?[r,i().stringify(a,{encode:!1})].join("?"):r}(n.raster.tileUrl,t.raster)),n.vector&&(n.vector.customization=t.vector),n}function L(e,t){return e.includes(";base64")?e:e+(t.bunker.disableAdsMapTiles?"":"&ads=enabled")}function D(e){return"dark"===e?"dark":void 0}},5733:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r=n(7462),o=n(844);function i(e){var t=function(t,n,r,i){var u=e.replace("{{x}}",String(t)).replace("{{y}}",String(n)).replace("{{z}}",String(r)).replace("{{scale}}","1").replace(/\{\{d\|(\d+)\}\}/,(function(e,o){return String((t+n+r)%Number(o)+1)}));return(0,o.Z)({url:u,signal:i}).then((function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return[]}return!e||e.error&&404===e.error.code?[]:e.data.features.map((function(e){var t=e.properties.HotspotMetaData.RenderedGeometry;return{type:"rendered",feature:c(e),geometry:"Polygon"===t.type?a(t):s(t)}}))}))};return t.template=e,t}function a(e){return{type:"Polygon",coordinates:e.coordinates.map((function(e){return e.map((function(e){return{x:e[0],y:e[1]}}))}))}}function s(e){return{type:"MultiPolygon",coordinates:e.coordinates.map((function(e){return e.map((function(e){return e.map((function(e){return{x:e[0],y:e[1]}}))}))}))}}function c(e){var t,n=e.properties.URIMetaData,o=null===(t=e.properties.HotspotMetaData)||void 0===t?void 0:t.id;return{type:"Feature",id:o?String(o):"",geometry:e.geometry,properties:(0,r.Z)({},e.properties,{uri:(n&&n.URIs[0]||{}).uri})}}},8244:(e,t,n)=>{"use strict";n.d(t,{LY:()=>m,$Y:()=>l,cx:()=>d});var r=n(4330),o=n(7806);var i=n(309);var a=n(5900),s=n(7048),c=n(8860),u=(n(1502),23);function l(e,t,n,a,c){void 0===a&&(a=!0);var l=e.center,d=e.zoom,m=e.span,g=e.bounds,y=h(n,t);if(!d){var _=g||function(e){var t=e.center,n=e.span,i=Math.min(Math.max(t[1]*Math.PI/180,-Math.PI/2+o.Qs),Math.PI/2-o.Qs),a=Math.max(Math.min(n[1],180),0),s=a*Math.PI/180,c=o.d3*Math.log(Math.tan(i/2+Math.PI/4)),u=Math.exp(2*c/o.d3),l=(u+1)*Math.tan(Math.min(Math.max(s/2,-Math.PI/2+o.Qs),Math.PI/2-o.Qs)),d=-u,p=Math.max(l*l-4*d,0),f=(-l+Math.sqrt(p))/2*1,m=2*(Math.atan(f)-Math.PI/4)*180/Math.PI,v=n[0]/2;return[[(0,r.u)(t[0]-v),m],[(0,r.u)(t[0]+v),m+a]]}({center:l,span:m});d=function(e,t,n,r){void 0===r&&(r=0);var o=(0,s.n)(e,0),i=Math.max(Math.abs(o[1][0]-o[0][0]),1e-10),a=Math.max(Math.abs(o[1][1]-o[0][1]),1e-10),c=Math.min(Math.max(0,Math.min(v(t.width/i),v(t.height/a))),u);return n?Math.floor(c+r+1e-10):Math.round(100*c)/100}(_,y,a,c),l=function(e){return function(e,t,n){var r=(0,s.n)(e,t),o=r[0],a=o[0],c=o[1],u=r[1],l=u[0],d=u[1];return(0,i.W)([(a+l-(n[1]-n[3]))/2,(c+d-(n[0]-n[2]))/2],t)}(e,u,[0,0,0,0])}(_)}return{center:l,zoom:d,span:m=f(g=p(l,d,y)),bounds:g}}function d(e){var t=[e.center[0],e.center[1]],n=e.size,r=h({width:n.x,height:n.y},e.margin),o=p(t,e.zoom,r),i=f(o);return{center:t,zoom:e.zoom,span:i,bounds:o}}function p(e,t,n){var r=(0,a.f)(e,t),o=r[0],s=r[1],c=[[o-n.width/2,s+n.height/2],[o+n.width/2,s-n.height/2]];return[(0,i.W)(c[0],t),(0,i.W)(c[1],t,!1)]}function f(e){var t=e[0],n=t[0],r=t[1],o=e[1],i=o[0],a=o[1];return[Math.abs(i-n),(0,c.d)(a,r,r+360)-r]}function m(e,t){var n,r,o=(0,s.n)(e,u),a=(0,s.n)(t,u);return n=[[Math.min(o[0][0],a[0][0]),Math.min(o[0][1],a[0][1])],[Math.max(o[1][0],a[1][0]),Math.max(o[1][1],a[1][1])]],r=u,[(0,i.W)(n[0],r),(0,i.W)(n[1],r)]}function v(e){return Math.log(e)*Math.LOG2E}function h(e,t){return{width:Math.max(e.width-(t?t[1]+t[3]:0),1),height:Math.max(e.height-(t?t[0]+t[2]:0),1)}}},5698:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c,Ib:()=>a,Sx:()=>s});var r=n(7462),o=n(7363),i=o.createContext({});i.displayName="mapContext";var a=i.Provider;function s(){return o.useContext(i)}const c=function(e){return void 0===e&&(e={}),function(t){var n=function(n){return o.createElement(i.Consumer,null,(function(i){var a=i.map,s=i.ymaps3;return e.shouldWait&&!a?null:o.createElement(t,(0,r.Z)({},n,{map:a,ymaps3:s}))}))};return n.displayName="mapContext("+t.displayName+")",n}}},1502:(e,t,n)=>{"use strict";n.d(t,{fL:()=>l,AK:()=>d,lp:()=>p,Cm:()=>f,eQ:()=>o.eQ,Hm:()=>c});var r=n(7462),o=n(2383),i=n(8860),a=n(8961),s=(0,a.u)("ease-in-out"),c=7;function u(e,t,n,o){void 0===o&&(o={});var i=o,a=i.cb,c=i.duration,u=null!=c?c:400,l=e[n];if(l!==t){var d=t-l;e.animateForDuration(u,(function(e,t){var o;return(0,r.Z)({},e,((o={})[n]=l+d*s(t),o))})).complete.then(a,a)}}function l(e,t){var n=t.cb,r=t.duration;u(e,0===e.azimuth?-Math.PI/4:e.azimuth<Math.PI?0:2*Math.PI,"azimuth",{cb:n,duration:r})}function d(e,t){void 0===t&&(t={});var n=t,r=n.cb,i=n.duration;u(e,e.tilt===o.eQ?o.oU:o.eQ,"tilt",{cb:r,duration:i})}function p(e,t,n){void 0===n&&(n={});var r=n,i=r.duration,a=r.cb;u(e,Math.max(o.eQ,Math.min(t,o.oU)),"tilt",{duration:i,cb:a})}function f(e,t,n){void 0===n&&(n={});var r=n,o=r.duration,a=r.cb,s=(0,i.d)(t,0,2*Math.PI);u(e,s<Math.PI?s:-2*Math.PI+s,"azimuth",{duration:o,cb:a})}},1823:(e,t,n)=>{"use strict";function r(e){if(0===e.length)return[];for(var t=[e[0]],n=0,r=e[0],o=1;o<e.length;o++){var i=e[o],a=i[0]+n-r[0];if(a>360||a<-360){var s=360*Math.floor(a/360);n-=s,a-=s}a>180?n-=360:a<-180&&(n+=360);var c=[i[0]+n,i[1]];t.push(c),r=c}return t}n.d(t,{g:()=>r})},5968:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(7462),o=n(3366),i=n(4578),a=n(7363),s=n(956),c=n(4986),u=n(6004),l=["coordinates"];const d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._ref=a.createRef(),t._onMapUpdate=function(){t.forceUpdate()},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.coordinates,i=(0,o.Z)(t,l);return a.createElement(a.Fragment,null,a.createElement(s.Z,{coordinates:n,nonInteractive:!0},a.createElement("div",{ref:this._ref}),a.createElement(u.Z,(0,r.Z)({type:"balloon"},i,{getTarget:function(){return e._ref.current}}),i.children)),a.createElement(c.Z,{onUpdate:i.isShown?this._onMapUpdate:void 0}))},t}(a.PureComponent)},3398:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(4578),o=n(7363),i=n(5877),a=n.n(i),s=n(5698),c=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._uuid=a().v4(),t._getCollidingPrimitiveId=function(e){return t._uuid+":"+e.id},t._getCollidingPrimitives=function(e){var n=new Map;return e.forEach((function(e){n.set(t._getCollidingPrimitiveId(e),{anchor:e.anchor,rect:{minX:e.pixelSize[0][0],minY:e.pixelSize[0][1],maxX:e.pixelSize[1][0],maxY:e.pixelSize[1][1]}})})),n},t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._getCollidingPrimitives(e.placemarks);e.map.addInvisibleCollidingPrimitives(t)},n.shouldComponentUpdate=function(){return!this.props.preventUpdates},n.componentDidUpdate=function(){var e=this,t=this.props,n=t.map.getInvisibleCollidingPrimitives(),r=[],o=this._getCollidingPrimitives(t.placemarks);n.forEach((function(t,n){n.startsWith(e._uuid+":")&&r.push(n)})),t.map.removeInvisibleCollidingPrimitives(r),t.map.addInvisibleCollidingPrimitives(o)},n.componentWillUnmount=function(){var e=this.props;e.map.removeInvisibleCollidingPrimitives(e.placemarks.map(this._getCollidingPrimitiveId))},n.render=function(){return null},t}(o.Component);const u=(0,s.ZP)({shouldWait:!0})(c)},9031:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(4578),o=n(7363),i=n.n(o),a=n(5876),s=n(7179),c=n(2514),u=n(5698),l=n(1127),d=n(9471),p=n(943),f=n(4986),m=n(4874),v=n(6012),h=(0,v.Z)((0,m.Z)({resolved:{},chunkName:function(){return"lang-switcher"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("lang-switcher").then(n.bind(n,5316))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 5316}}),(function(e){return e.config.availableLangs.length>1})),g=(0,m.Z)({resolved:{},chunkName:function(){return"scale-line"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.resolve().then(n.bind(n,5560))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 5560}}),y=(0,m.Z)({resolved:{},chunkName:function(){return"logo-view"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("logo-view").then(n.bind(n,6651))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 6651}}),_=(0,s.Z)(c.ZP,(0,u.ZP)({shouldWait:!0})),b=12,w=(0,a.Z)("map-copyrights"),E=function(e){function t(t){var n;return(n=e.call(this,t)||this)._update=function(){n.setState({maxWidth:n.props.map.container.offsetWidth-n._getRightOffset(),copyrights:(0,l.h)(n.props.map)})},n._getRightOffset=function(){return n.props.right-b},n._getTermsItem=function(e,t){return{type:t?"terms_short":"terms",text:t?"Условия":"Условия использования",href:e.agreementUrl+"?lang="+e.lang}},n._getCopyrightsItem=function(){return{type:"copyrights",text:n.state.copyrights,shrink:!0}},n._getRightHoldersItem=function(e){return{type:"right_holders",text:"Правообладатели",href:e.rightHoldersUrl+"?lang="+e.lang}},n._getSupportItem=function(e){return(0,d.md)(e)?null:{type:"support",text:"Справка",href:e.feedback.helpUrl+"?lang="+e.lang}},n._getLocalizationItem=function(){return 1===n.props.config.availableLangs.length?null:{type:"lang",text:o.createElement(h,null)}},n._renderBlock=function(e,t){return o.createElement("div",{className:w("block",{type:e})},t.map((function(e){var t=e.href?"a":"div";return o.createElement(p.ZP,{name:e.type,logClick:Boolean(e.href),key:e.type},o.createElement(t,{className:w("item",{shrink:e.shrink,noprint:e.noprint,type:e.type}),href:e.href,target:"_blank"},e.text))})))},n._renderBlocks=function(){var e=n.props,t=e.config;return e.copyrightOnly?n._renderBlock("copyrights-only",[n._getCopyrightsItem(),n._getTermsItem(t)]):o.createElement(o.Fragment,null,n._renderBlock("copyrights",[n._getCopyrightsItem(),n._getRightHoldersItem(t)]),n._renderBlock("links",[{type:"ya",text:"© Яндекс"},n._getLocalizationItem(),n._getSupportItem(t),n._getTermsItem(t),n._getTermsItem(t,!0)].filter((function(e){return Boolean(e)}))))},n.state={maxWidth:0,copyrights:(0,l.h)(n.props.map)},n}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.copyrightOnly?"copyrights-only":"map"===e.layer?"scheme":"satellite";return o.createElement("footer",null,o.createElement(p.ZP,{name:"map_copyrights"},o.createElement("div",{className:w({type:t,"show-all":"covid-map"===e.config.query.embed}),style:{maxWidth:this.state.maxWidth,right:this._getRightOffset()}},this._renderBlocks(),o.createElement(f.Z,{onResize:this._update,onCopyrightsChange:this._update}))),e.copyrightOnly?null:o.createElement("div",{className:w("logo-layout")},o.createElement(y,{view:"map",isNegative:"map"!==e.config.mapType})),!e.copyrightOnly&&e.location?o.createElement("div",{className:w("scale-line")},o.createElement(g,{center:e.location.center,zoom:e.location.zoom})):null)},t}(o.PureComponent);const S=_(E)},7229:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(4578),o=n(7363),i=n(5698),a=n(2514),s=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._key="",t._applyCursor=function(){var e=t._getCursor();!t.props.src&&e&&e.startsWith("url(")||(t.props.map.container.style.cursor=c(t.props),t._key=t._getCursor())},t._getCursor=function(){return t.props.map.container.style.cursor||""},t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._applyCursor()},n.componentDidUpdate=function(){this._applyCursor()},n.componentWillUnmount=function(){this._getCursor()===this._key&&(this.props.map.container.style.cursor="")},n.render=function(){return null},t}(o.Component);function c(e){return e.src&&e.basePoint?'url("'+e.src+'") '+e.basePoint.join(" ")+', url("'+e.src+'"), auto':e.cursor||"default"}const u=(0,i.ZP)({shouldWait:!0})((0,a.ZP)(s))},2083:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(4578),o=n(7363),i=n(4960),a=n(9705),s=n(1491),c=n(5876),u=n(5698),l=n(4986),d=n(956),p=n(943),f=n(259),m=n(3398),v=n(2514),h=n(7179),g=n(1581),y=(0,c.Z)("map-entrances-view"),_=(0,h.Z)(v.ZP,(0,u.ZP)({shouldWait:!0}),g.ZP),b=[[-5,-5],[5,5]];function w(e){return e>=18?"large":e>=17?"normal":e>=16?"small":void 0}const E=_(function(e){function t(t){var n;return(n=e.call(this,t)||this)._onMapMainEngineChanged=function(){var e="vector"===n.props.map.getEffectiveMode();e!==n.state.isVector&&n.setState({isVector:e})},n._onMapUpdate=function(){var e=n.props,t=n.state,r=e.map.zoom,o=e.map.azimuth;r===t.mapZoom&&o===t.mapAzimuth||n.setState({mapZoom:r,mapAzimuth:o})},n._renderEntrance=function(e,t){var r=n.props,c=n.state,u=w(c.mapZoom),l=((e.azimuth||0)+(0,i.Z)(c.mapAzimuth))%360,m=r.isMetro?16:0,v="large"===u?"entrance-arrow-red-13":"entrance-arrow-red-10";return o.createElement(p.ZP,{key:t,name:"entrance",nodeState:{name:e.name,coords:(0,a.s)(e.coordinates)}},o.createElement(d.Z,{coordinates:e.coordinates,nonInteractive:!r.onEntranceClick,onClick:function(){var t;return null===(t=r.onEntranceClick)||void 0===t?void 0:t.call(r,e)},zIndex:f.I.search.base},o.createElement("div",{className:y({size:u,animated:r.animated})},o.createElement("div",{style:{transform:"rotate("+l+"deg)",paddingTop:m}},void 0!==e.azimuth&&"small"!==u?o.createElement("div",{className:y("arrow-container")},o.createElement(s.Z,{name:v,theme:r.theme,className:y("arrow",{large:"large"===u}),inline:!0})):void 0,r.isMetro?null:o.createElement("div",{className:y("dot")})),c.isVector&&e.name&&c.mapZoom>=18.5?o.createElement("div",{className:y("title",{position:l>45&&l<135?"left":"right"})},e.name):null)))},n._renderEntrances=function(){var e=n.props,t=n.state,r=w(t.mapZoom);return e.result.entrances&&r?o.createElement(o.Fragment,null,e.result.entrances.map(n._renderEntrance),t.mapZoom>=18.5&&!e.isMetro?o.createElement(m.Z,{placemarks:e.result.entrances.map((function(e){return{anchor:e.coordinates,id:e.coordinates.join(","),pixelSize:b}}))}):null):null},n.state={mapZoom:t.map.zoom,mapAzimuth:t.map.azimuth,isVector:"vector"===t.map.getEffectiveMode()},n}return(0,r.Z)(t,e),t.prototype.render=function(){return o.createElement(o.Fragment,null,this._renderEntrances(),o.createElement(l.Z,{onUpdate:this._onMapUpdate,onMainEngineChanged:this._onMapMainEngineChanged}))},t}(o.PureComponent))},444:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,Q:()=>i});var r=(0,n(671).Z)("mapFeatureGroup",{}),o=r.connect,i=r.Provider;const a=o},9327:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(3144),o=n(4578),i=n(7363),a=n(5877),s=n.n(a),c=n(5698),u=n(111),l=n(576),d=n(3214),p=n(444),f=n(7179),m=n(5623),v={onClick:"click",onFastClick:"fastclick",onTouchEnd:"touchend",onDoubleClick:"dblclick",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseMove:"mousemove"};const h=(0,f.Z)(p.Z,(0,c.ZP)({shouldWait:!0}))(function(e){function t(t){var n;return(n=e.call(this,t)||this)._id=void 0,n._handlers={},n._dragMoveThrottled=void 0,n._getFeature=function(){return{type:"Feature",id:n._id,geometry:n.props.geometry,draggable:n.props.draggable}},n._addHandler=function(e,t,r){n._handlers[e]=function(e,t,o){"feature"===(null==e?void 0:e.type)&&e.feature.id===n._id&&r(o,t)},n.props.map.events.on(v[e],t,n._handlers[e])},n._removeHandler=function(e,t){n.props.map.events.off(v[e],t,n._handlers[e]),delete n._handlers[e]},n._dragStart=function(e){var t=e.object,r=e.newGeometry;if("Feature"===t.type&&t.id===n._id){var o,i,a=(0,m.ZE)(r,(function(e){return n.props.map.projection.fromGlobalCoordinates(e)}));if(a.coordinates)null===(o=(i=n.props).onDragStart)||void 0===o||o.call(i,{coordinates:a.coordinates})}},n._dragMove=function(e){var t=e.object,r=e.newGeometry;if(n.props.onDragMove&&"Feature"===t.type&&t.id===n._id){var o,i,a=(0,m.ZE)(r,(function(e){return n.props.map.projection.fromGlobalCoordinates(e)}));if(a.coordinates)null===(o=(i=n.props).onDragMove)||void 0===o||o.call(i,{coordinates:a.coordinates});return!1}},n._dragEnd=function(e){var t=e.newGeometry,r=e.object;if(n._dragMoveThrottled.cancel(),"Feature"===r.type&&r.id===n._id){var o,i,a=(0,m.ZE)(t,(function(e){return n.props.map.projection.fromGlobalCoordinates(e)}));if(a.coordinates)null===(o=(i=n.props).onDragEnd)||void 0===o||o.call(i,{coordinates:a.coordinates});return!1}},n._id=t.id||s().v4(),n._dragMoveThrottled=(0,u.Z)(n._dragMove,50),n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props;t.map.addFeature(this._dataSourceId,this._getFeature(),t.drawingStyle,t.parentGroupId),Object.keys(v).forEach((function(n){t[n]&&e._addHandler(n,e._dataSourceId,t[n])})),t.draggable&&(t.map.dragger.on("dragStart",this._dragStart),t.map.dragger.on("dragMove",this._dragMoveThrottled),t.map.dragger.on("dragEnd",this._dragEnd))},n.componentDidUpdate=function(e){var t=this,n=this.props,r=e.dataSourceId?e.dataSourceId:d.UZ.DEFAULT_GRAPHICS;r!==this._dataSourceId?(n.map.removeFeatureById(r,this._id),n.map.addFeature(this._dataSourceId,this._getFeature(),n.drawingStyle,n.parentGroupId)):((!(0,l.Z)(e.drawingStyle,n.drawingStyle)||!(0,l.Z)(e.geometry,n.geometry)||e.draggable!==n.draggable)&&n.map.updateFeature(this._dataSourceId,this._getFeature(),n.drawingStyle),e.parentGroupId!==n.parentGroupId&&n.map.moveFeatureToGroup(this._dataSourceId,this._getFeature().id,n.parentGroupId));Object.keys(v).forEach((function(o){n[o]===e[o]&&r===t._dataSourceId||(e[o]&&t._removeHandler(o,r),n[o]&&t._addHandler(o,t._dataSourceId,n[o]))})),!e.draggable&&n.draggable?(n.map.dragger.on("dragStart",this._dragStart),n.map.dragger.on("dragMove",this._dragMoveThrottled),n.map.dragger.on("dragEnd",this._dragEnd)):e.draggable&&!n.draggable&&(n.map.dragger.offSingle("dragStart",this._dragStart),n.map.dragger.offSingle("dragMove",this._dragMoveThrottled),n.map.dragger.offSingle("dragEnd",this._dragEnd))},n.componentWillUnmount=function(){var e=this;this.props.map.dragger.offSingle("dragStart",this._dragStart),this.props.map.dragger.offSingle("dragMove",this._dragMoveThrottled),this.props.map.dragger.offSingle("dragEnd",this._dragEnd),Object.keys(this._handlers).forEach((function(t){return e._removeHandler(t,e._dataSourceId)})),this.props.map.removeFeatureById(this._dataSourceId,this._id)},n.render=function(){return null},(0,r.Z)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||d.UZ.DEFAULT_GRAPHICS}}]),t}(i.PureComponent))},8766:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(7462),o=n(4578),i=n(7363),a=n(2514),s=n(5698),c=n(7229),u=n(3214),l=(n(5733),n(4986)),d={color:{r:1,g:68/255,b:.2,a:1}},p={lightness:-.1,saturation:1};var f=n(6806).Z.getLogger("map-objects"),m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handlers={},n.state={isHover:!1},Object.keys(l.h).forEach((function(e){return n._handlers[e]=n._getHandler(e)})),n}(0,o.Z)(t,e);var n=t.prototype;return n._getHandler=function(e){var t=this;return function(n,r){var o=t.props,i=n.feature;"onMouseEnter"===e&&f(i.id,n);var a=!o.config.uatraits.isTouch&&!o.disableHighlight;(o.shouldHover?o.shouldHover(i):Boolean(o.onClick))&&("onMouseEnter"===e&&(a&&o.map.setObjectHighlight(function(e){var t;return{object:e,color:(null===(t=e.properties.tags)||void 0===t?void 0:t.includes("building"))?p:d}}(i)),t.setState({isHover:!0})),"onMouseLeave"===e&&(a&&o.map.setObjectHighlight(void 0),t.setState({isHover:!1})));var s=o[e];s&&s(i,r)}},n.render=function(){var e=this,t=(0,u.se)(this.props.layer);return i.createElement(i.Fragment,null,this.state.isHover?i.createElement(c.Z,{cursor:"pointer"}):null,t.map((function(t){return i.createElement(l.Z,(0,r.Z)({key:t,layer:t},e._handlers))})))},t}(i.Component);const v=(0,a.ZP)((0,s.ZP)({shouldWait:!0})(m))},4986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l,h:()=>a});var r=n(4578),o=n(7363),i=n(5698),a={onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onFastClick:"fastclick",onTouchCancel:"touchcancel",onPointerDown:"pointerdown",onPointerMove:"pointermove",onPointerUp:"pointerup",onPointerCancel:"pointercancel",onClick:"click",onDoubleClick:"dblclick",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove"},s={onUpdate:"update",onCopyrightsChange:"copyrightsChange",onResize:"resize",onZoomRangeChange:"zoomRangeChange",onReady:"ready",onTile3dChanged:"tile3dChanged",onTile3dVisibilityChange:"tile3dVisibilityChange",onIndoorPlansChanged:"indoorPlansChanged",onVectorError:"vectorError",onVectorStart:"vectorStart",onZoomRoundingChanged:"zoomRoundingChanged",onMainEngineChanged:"mainEngineChanged"},c=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._applyMapHandlers=function(e,t,n){Object.keys(s).forEach((function(r){n&&t&&n[r]===t[r]||(n&&n[r]&&e.offSingle(s[r],n[r]),t&&t[r]&&e.on(s[r],t[r]))}))},t._applyDomHandlers=function(e,t,n){Object.keys(a).forEach((function(r){n&&t&&n[r]===t[r]&&n.layer===t.layer||(n&&n[r]&&e.events.off(a[r],n.layer||"none",n[r]),t&&t[r]&&e.events.on(a[r],t.layer||"none",t[r]))}))},t._onInertiaStart=function(e){t.props.onInertiaStart&&t.props.onInertiaStart(t.props.map.calculateCenter(e.targetPositionWcs))},t._onDragStart=function(){t.props.onDragStart&&t.props.onDragStart()},t._onDragEnd=function(){t.props.onDragEnd&&t.props.onDragEnd()},t._onContainerTouchMove=function(e){t.props.onContainerTouchMove&&t.props.onContainerTouchMove(u(e))},t._onContainerPointerMove=function(e){t.props.onContainerPointerMove&&t.props.onContainerPointerMove(u(e))},t._onActionStart=function(e){t.props.onActionStart&&t.props.onActionStart(e)},t._onActionEnd=function(e){t.props.onActionEnd&&t.props.onActionEnd(e)},t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.map;this._applyMapHandlers(e,this.props),this._applyDomHandlers(e,this.props),e.behaviors.on("actionStart",this._onActionStart),e.behaviors.on("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.on("inertiaStart",this._onInertiaStart),e.behaviors.drag.on("dragStart",this._onDragStart),e.behaviors.drag.on("dragEnd",this._onDragEnd)),e.container.addEventListener("touchmove",this._onContainerTouchMove),e.container.addEventListener("pointermove",this._onContainerPointerMove)},n.componentDidUpdate=function(e){this._applyMapHandlers(this.props.map,this.props,e),this._applyDomHandlers(this.props.map,this.props,e)},n.componentWillUnmount=function(){var e=this.props.map;this._applyMapHandlers(e,void 0,this.props),this._applyDomHandlers(e,void 0,this.props),e.behaviors.offSingle("actionStart",this._onActionStart),e.behaviors.offSingle("actionEnd",this._onActionEnd),e.behaviors.drag&&(e.behaviors.drag.offSingle("inertiaStart",this._onInertiaStart),e.behaviors.drag.offSingle("dragStart",this._onDragStart),e.behaviors.drag.offSingle("dragEnd",this._onDragEnd)),e.container.removeEventListener("touchmove",this._onContainerTouchMove),e.container.removeEventListener("pointermove",this._onContainerPointerMove)},n.render=function(){return null},t}(o.PureComponent);function u(e){if("touches"in e){var t=e.touches[0]||e.changedTouches[0];return[t.clientX,t.clientY]}return[e.clientX,e.clientY]}const l=(0,i.ZP)({shouldWait:!0})(c)},956:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(7462),o=n(3144),i=n(4578),a=n(7363),s=n(1533),c=n(5877),u=n.n(c),l=n(5876),d=n(5698),p=n(259),f=n(3214);var m=n(1338),v=(0,l.Z)("map-placemark"),h=function(){},g=function(e){function t(t){var n;return(n=e.call(this,t)||this)._container=document.createElement("div"),n._mapEventHandlers=void 0,n._clickTimer=void 0,n._marker=void 0,n._fireInteractionEvent=function(){var e,t,n,r;e=window,t="map-placemark-interaction",void 0===n&&(n={bubbles:!0,cancelable:!0}),"function"==typeof Event?r=new Event(t,n):(r=document.createEvent("Event")).initEvent(t,n.bubbles,n.cancelable),e.dispatchEvent(r)},n._updateCursor=function(){n._container.style.cursor=n.props.onClick||n.props.onMouseEnter||n.props.draggable?"pointer":"default"},n._addMapEventHandlers=function(e){var t={dragStart:e.onDragStart,dragMove:e.onDragMove,dragEnd:e.onDragEnd};Object.keys(t).forEach((function(e){t[e]&&n._mapEventHandlers.on(e,(function(r){var o=r.object,i=r.newGeometry;if(o&&"Feature"===o.type&&o.id===n._marker.feature.id){var a=n.props.map.projection.fromGlobalCoordinates(i.coordinates);t[e]({coordinates:a})}}))}))},n._onDragEnd=function(e){var t=e.object,r=e.newGeometry;t&&"Feature"===t.type&&t.id===n._marker.feature.id&&(n._marker.feature.geometry.coordinates=n.props.map.projection.fromGlobalCoordinates(r.coordinates))},n._onClick=function(e){e.stopPropagation(),n._fireInteractionEvent();var t=n.props,r=t.onClick||h,o=t.onFastClick||h,i=t.onDoubleClick||h;n._clickTimer?(i(),window.clearTimeout(n._clickTimer),n._clickTimer=void 0):(o(),n._clickTimer=window.setTimeout((function(){r(),n._clickTimer=void 0}),300))},n._container.className=v(),n._marker={feature:{type:"Feature",id:u().v4(),draggable:t.draggable,disableRoundCoordinates:t.disableRoundCoordinates,blockEvents:t.blockEvents,geometry:{type:"Point",coordinates:t.coordinates}},style:{zIndex:t.zIndex||p.I.default,element:n._container}},n._mapEventHandlers=n.props.map.dragger.group(),n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;this._updateCursor(),this._addMapEventHandlers(e),e.map.addFeature(this._dataSourceId,this._marker.feature,this._marker.style),this._mapEventHandlers.on("dragStart",this._fireInteractionEvent),this._mapEventHandlers.on("dragEnd",this._onDragEnd)},n.componentWillUnmount=function(){this.props.map.destroyed||(this._mapEventHandlers.offAll(),this.props.map.removeFeatureById(this._dataSourceId,this._marker.feature.id)),window.clearTimeout(this._clickTimer)},n.componentDidUpdate=function(e){var t=e.dataSourceId?e.dataSourceId:f.UZ.DEFAULT_MARKERS;t!==this._dataSourceId&&(this.props.map.removeFeatureById(t,this._marker.feature.id),this.props.map.addFeature(this._dataSourceId,this._marker.feature,this._marker.style));var n=this.props,o=!1;n.coordinates!==e.coordinates&&(o=!0,this._marker.feature.geometry.coordinates=n.coordinates),e.draggable!==n.draggable&&(o=!0,this._marker.feature.draggable=n.draggable),e.zIndex!==n.zIndex&&(o=!0,this._marker.style.zIndex=n.zIndex||p.I.default),e.disableRoundCoordinates!==n.disableRoundCoordinates&&(o=!0,this._marker.feature.disableRoundCoordinates=n.disableRoundCoordinates||!1),o&&this.props.map.upsertFeature(this._dataSourceId,(0,r.Z)({},this._marker.feature),(0,r.Z)({},this._marker.style)),n.onDragStart===e.onDragStart&&n.onDragMove===e.onDragMove&&n.onDragEnd===e.onDragEnd||(this._mapEventHandlers.offAll(),this._addMapEventHandlers(n)),e.draggable===n.draggable&&e.onClick===n.onClick||this._updateCursor()},n.render=function(){var e=this,t=this.props,n=a.createElement("div",{"aria-hidden":!0,className:v("wrapper",{"non-interactive":t.nonInteractive}),onClick:this._onClick,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onMouseMove:t.onMouseMove},this.props.onMouseLeave&&this.props.shoulTrackOutsideClick?a.createElement(m.Z,{callback:function(){var t,n;return null===(t=(n=e.props).onMouseLeave)||void 0===t?void 0:t.call(n)}},t.children):t.children);return s.createPortal(n,this._container)},(0,o.Z)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||f.UZ.DEFAULT_MARKERS}}]),t}(a.PureComponent);const y=(0,d.ZP)({shouldWait:!0})(g)},3582:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(4578),o=n(7363),i=n(7806),a=n(9657),s=n(1421),c=n(8067),u=n(5900),l=n(2690),d=n(309),p=n(6897),f=n(9327),m=n(1823);i.d3,Math.PI;const v=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getGeodesicGeometry=function(){for(var e=n.props,t=[],r=0;r<=2*Math.PI;r+=Math.PI/40){var o=(0,a.S)(e.center,[Math.cos(r),Math.sin(r)],e.radius).endPoint;t.push(o)}var i=t[0],u=t.slice(1),l=[].concat(u,[i]).reduce((function(e,t){return[].concat(e,(0,s.b)([e.pop(),t]))}),[i]),d=l.reduce((function(e,t){return e[t[0]>90||t[0]<-90?Math.round(t[0]/360):0]++,e}),{"-1":0,0:0,1:0}),p=0;d[-1]>d[0]&&(p=360),d[1]>d[0]&&(p=-360),p&&(l=l.map((function(e){return[e[0]+p,e[1]]})));var f=[l[0][0],e.center[1]>0?90:-90];return(0,c.t)(f,e.center)<=e.radius&&(l.unshift(f),l.push(f)),l},n._getPixelGeometry=function(){for(var e=n.props,t=(0,u.f)(e.center,2),r=(0,a.S)(e.center,[-1,0],e.radius).endPoint,o=(0,l.g)((0,u.f)(r,2),t),i=[],s=0;s<=2*Math.PI;s+=Math.PI/40){var c=[t[0]+Math.cos(s)*o,t[1]+Math.sin(s)*o];i.push((0,d.W)(c,2))}return i},n._getGeometry=function(){var e=n.props;e.radius;var t=e.geodesic?n._getGeodesicGeometry():n._getPixelGeometry();return{type:"Polygon",coordinates:[(0,m.g)(t)]}},n.state={geometry:n._getGeometry()},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t=this.props;(0,p.J)(t.center,e.center)&&t.radius===e.radius||this.setState({geometry:this._getGeometry()})},n.render=function(){return o.createElement(f.Z,{geometry:this.state.geometry,drawingStyle:this.props.drawingStyle,dataSourceId:this.props.dataSourceId})},t}(o.PureComponent)},5560:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var r=n(4578),o=n(7363),i=n(5876),a=n(2514),s=n(5900),c=n(309),u=n(8067),l=n(5713);var d=n(935),p=(0,i.Z)("map-scale-line"),f=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.config.uatraits.isMobile,n=t?"height":"width",r=t?80:75,i=function(e){var t=(0,s.f)(e.center,e.zoom),n=t[0],r=t[1],o="width"===e.dimension?1:0,i="height"===e.dimension?1:0,a=(0,c.W)([n-o*e.maxSize/2,r-i*e.maxSize/2],e.zoom),d=(0,c.W)([n+o*e.maxSize/2,r+i*e.maxSize/2],e.zoom),p=(0,u.t)(a,d),f=l.Lr(p,1);return{size:Math.abs(p)>1e-7?Math.round(f*e.maxSize/p):e.maxSize,distance:f}}({center:e.center,zoom:e.zoom,dimension:n,maxSize:r}),a=i.size,d=i.distance,f={};return t?f.height=r+"px":f.width=a+"px",o.createElement("div",{ref:this.props.forwardedRef,className:p(),style:f,"aria-hidden":!0},o.createElement("div",{className:p("label")},l.Bb(d)),o.createElement("div",{className:p("line")}))},t}(o.PureComponent);const m=(0,d.Z)((0,a.ZP)(f))},1597:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(4578),o=n(7363),i=n.n(o),a=n(5876),s=n(4874),c=n(4986),u=n(5698),l=n(3214),d=n(9971),p=n(1502),f=n(943),m=n(4960),v=n(2514),h=(0,s.Z)({resolved:{},chunkName:function(){return"tooltip"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("tooltip").then(n.bind(n,6054))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 6054}}),g=3,y=(0,a.Z)("map-tilt-rotate-control"),_=function(e){function t(t){var n;return(n=e.call(this,t)||this)._controlRef=o.createRef(),n._tooltipTargetRef=o.createRef(),n._analyticsCompassRef=o.createRef(),n._analyticsTiltRef=o.createRef(),n._controlCenterPosition=void 0,n._startMovePosition=void 0,n._startTilt=p.eQ,n._isClick=!1,n._prevZoom=void 0,n._startAzimuth=0,n._isMovementEnabled=!0,n._recalculateCenter=function(){if(n._controlRef.current){var e=n._controlRef.current.getBoundingClientRect(),t=e.x,r=e.y,o=e.height,i=e.width;n._controlCenterPosition={x:t+i/2,y:r+o/2}}},n._onMapUpdate=function(){var e;n._isClick||n.props.map.tilt===n.state.tilt&&n.props.map.azimuth===n.state.azimuth||(null===(e=n._tooltipTargetRef.current)||void 0===e||e.click());var t=n._prevZoom,r=n.props.map.zoom,o=n.state.tilt;r<p.Hm&&t&&t>=p.Hm&&o!==p.eQ&&(0,p.AK)(n.props.map),n._prevZoom=n.props.map.zoom,n.setState({azimuth:n.props.map.azimuth,tilt:n.props.map.tilt,isTiltDisabled:n.props.map.zoom<p.Hm})},n._onMapMainEngineChanged=function(){var e="vector"===n.props.map.getEffectiveMode();e!==n.state.isVector&&n.setState({isVector:e})},n._addRotateEventListeners=function(){window.addEventListener("mousemove",n._onRotateMove),window.addEventListener("mouseup",n._onRotateEnd)},n._removeRotateEventListeners=function(){window.removeEventListener("mousemove",n._onRotateMove),window.removeEventListener("mouseup",n._onRotateEnd)},n._addTiltEventListeners=function(){window.addEventListener("mousemove",n._onTiltMove),window.addEventListener("mouseup",n._onTiltEnd)},n._removeTiltEventListeners=function(){window.removeEventListener("mousemove",n._onTiltMove),window.removeEventListener("mouseup",n._onTiltEnd)},n._onRotateStart=function(e){if(0===e.button&&n._isMovementEnabled){n._isClick=!0,n.setState({isMove:!0});var t=n._controlRef.current.getBoundingClientRect(),r=t.x,o=t.y,i=t.height,a=t.width;n._controlCenterPosition={x:r+a/2,y:o+i/2},n._startMovePosition={x:e.clientX,y:e.clientY},n._startAzimuth=n.state.azimuth,n._recalculateCenter(),n._addRotateEventListeners()}},n._onRotateMove=function(e){var t=n._controlCenterPosition,r=t.x,o=t.y,i=n._startMovePosition,a=Math.atan2(e.pageY-o,e.pageX-r)-Math.atan2(i.y-o,i.x-r);n._isClick=!1,n.props.map.setCamera({worldCenter:n.props.map.worldCenter,zoom:n.props.map.zoom,azimuth:n._startAzimuth+a,tilt:n.props.map.tilt})},n._onRotateEnd=function(){var e;(n.setState({showTooltip:!0,isMove:!1}),n._removeRotateEventListeners(),n._isClick)||(null===(e=n._analyticsCompassRef.current)||void 0===e||e.changeState({action_type:"drag",rotation_angle_state:(0,m.Z)(n.props.map.azimuth),rotation_angle_diff:(0,m.Z)(n.props.map.azimuth-n._startAzimuth)}))},n._toggleMapRotate=function(){n._isClick&&n._isMovementEnabled&&(n._isMovementEnabled=!1,(0,p.fL)(n.props.map,{cb:function(){var e;n._isClick=!1,n._isMovementEnabled=!0,null===(e=n._analyticsCompassRef.current)||void 0===e||e.changeState({action_type:"click",rotation_angle_state:(0,m.Z)(n.props.map.azimuth),rotation_angle_diff:(0,m.Z)(n.props.map.azimuth-n._startAzimuth)})}}))},n._onTiltStart=function(e){0===e.button&&n._isMovementEnabled&&(n._isClick=!0,n.setState({isMove:!0}),n._startMovePosition={x:e.clientX,y:e.clientY},n._startTilt=n.props.map.tilt,n._addTiltEventListeners())},n._onTiltMove=function(e){var t=n._startMovePosition.y-e.clientY;if(!(Math.abs(t)<g)){var r=Math.PI*t/n.props.map.size.y;n._isClick=!1,n.props.map.setCamera({worldCenter:n.props.map.worldCenter,zoom:n.props.map.zoom,azimuth:n.props.map.azimuth,tilt:n._startTilt+r})}},n._onTiltEnd=function(){var e;(n.setState({showTooltip:!0,isMove:!1}),n._removeTiltEventListeners(),n._isClick)||(null===(e=n._analyticsTiltRef.current)||void 0===e||e.changeState({action_type:"drag",rotation_angle_state:(0,m.Z)(n.props.map.tilt),rotation_angle_diff:(0,m.Z)(n.props.map.tilt-n._startTilt)}))},n._toggleMapTilt=function(){n._isClick&&n._isMovementEnabled&&(n._isMovementEnabled=!1,(0,p.AK)(n.props.map,{cb:function(){var e;n._isClick=!1,n._isMovementEnabled=!0,null===(e=n._analyticsTiltRef.current)||void 0===e||e.changeState({action_type:"click",rotation_angle_state:(0,m.Z)(n.props.map.tilt),rotation_angle_diff:(0,m.Z)(n.props.map.tilt-n._startTilt)})}}))},n._isTiltRotateAllowed=function(){var e=n.state.isVector,t=n.props.map.getLayers().topRasterLayers;return e&&t.every((function(e){return!l.Iw.includes(e.split(":")[0])}))},n._renderTooltip=function(){if(!n.state.showTooltip)return null;var e="MacOS"===n.props.config.uatraits.OSFamily?"Чтобы повернуть карту, покрутите компас или зажмите Cmd с левой кнопкой мыши":"Чтобы повернуть карту, покрутите компас или зажмите Ctrl с левой кнопкой мыши";return o.createElement(o.Fragment,null,o.createElement("div",{className:"3d",ref:n._tooltipTargetRef}),o.createElement(h,{targetRef:n._tooltipTargetRef,title:e,id:"tilt-rotate",showArrow:!0,position:"left",offset:{main:-15,side:-28},renderControls:function(e){return o.createElement("div",{"aria-hidden":!0,className:y("tooltip-button"),onClick:e},"Понятно")},checkTargetVisibility:!1}))},n.state={azimuth:t.map.azimuth,tilt:t.map.tilt,isMove:!1,showTooltip:!1,isTiltDisabled:t.map.zoom<p.Hm,isVector:"vector"===t.map.getEffectiveMode()},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._removeRotateEventListeners(),this._removeTiltEventListeners()},n.render=function(){var e,t=this.state,n=this._isTiltRotateAllowed(),r=t.azimuth,i=t.tilt,a=t.isMove,s=t.isTiltDisabled;return e=s?"Увеличьте масштаб, чтобы наклонить карту":i!==p.eQ?"Убрать наклон карты":"Наклонить карту",o.createElement(o.Fragment,null,n?o.createElement(o.Fragment,null,o.createElement("div",{className:y({"in-action":a}),ref:this._controlRef,"aria-hidden":!0},o.createElement(f.ZP,{name:"compass",nodeRef:this._analyticsCompassRef},o.createElement(d.Z,{text:0!==r?"Вернуть север сверху":"Повернуть карту",position:"left",isAir:!0,delay:500,isDisabled:a},o.createElement("div",null,o.createElement("div",{"aria-hidden":!0,className:y("ring"),style:{transform:"rotate("+r+"rad)"},onClick:this._toggleMapRotate,onMouseDown:this._onRotateStart})))),o.createElement(f.ZP,{name:"tilt_control",nodeRef:this._analyticsTiltRef},o.createElement(d.Z,{text:e,position:"left",isAir:!0,delay:500,isDisabled:a,offset:{main:12,side:0}},o.createElement("div",{className:y("tilt-wrapper")},o.createElement("div",{"aria-hidden":!0,className:y("tilt",{tilted:i!==p.eQ,disabled:s}),style:{transform:"rotateX("+i+"rad)"},onClick:s?void 0:this._toggleMapTilt,onMouseDown:s?void 0:this._onTiltStart},i===p.eQ?"3D":"2D"))))),this._renderTooltip()):null,o.createElement(c.Z,{onUpdate:this._onMapUpdate,onMainEngineChanged:this._onMapMainEngineChanged}))},t}(o.Component);const b=(0,u.ZP)({shouldWait:!0})((0,v.ZP)(_))},634:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r,o=n(4578),i=n(7363),a=n(5698),s=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;if(!r){var t=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._uris=[],t}(0,o.Z)(t,e);var n=t.prototype;return n.test=function(e){var t=e.metadata,n=t&&t.get("uri");return!n||!this._uris.includes(n)},n.add=function(e){this._uris.push(e),this._emit("update")},n.remove=function(e){this._uris=this._uris.filter((function(t){return t!==e})),this._emit("update")},t}(e.ymaps3.eventify().with());r=new t,e.map.addObjectFilter(r)}r.add(this.props.uri)},n.componentDidUpdate=function(e){this.props.uri!==e.uri&&(r.remove(e.uri),r.add(this.props.uri))},n.componentWillUnmount=function(){r.remove(this.props.uri)},n.render=function(){return null},t}(i.Component);const c=(0,a.ZP)({shouldWait:!0})(s)},3047:(e,t,n)=>{"use strict";n.d(t,{Yu:()=>s,xP:()=>c,sN:()=>u,Fz:()=>l});var r=n(7462),o=n(4807),i=n(9705),a={cameraDirection:"front"};function s(e,t){var n=e.type,i=e.featureId,s=e.graphType,c=(0,r.Z)({featureId:i,types:"data"===n?["path","similar"]:[n],graphType:s},a);return(0,o.Z)("mrc",{query:c},t)}function c(e,t){return(0,o.Z)("mrc/near",{query:{ll:(0,i.s)(e.ll),z:e.z,graphType:e.graphType}},t)}function u(e,t){var n=e.ll,s=e.dir,c=e.graphType;return(0,o.Z)("/mrc/directions",{query:(0,r.Z)({},a,{ll:(0,i.s)(n),dir:s,graphType:c})},t).catch((function(){return null}))}function l(e,t){return(0,o.Z)("mrc/feature/batch",{body:{ids:e}},t).catch((function(){return[]}))}},6859:(e,t,n)=>{"use strict";n.d(t,{uC:()=>k,jk:()=>g,GR:()=>U,NA:()=>N,TI:()=>G,X2:()=>q,Ht:()=>K,Vo:()=>x,JP:()=>T,K$:()=>P,Yo:()=>I,Bq:()=>M,Sk:()=>R,d:()=>A,MW:()=>H,Qt:()=>W,Dn:()=>X,DP:()=>Z});var r=n(7462),o=n(6897),i=n(9705),a=n(8067);n(9471);var s=n(4135),c=n(9676),u=1e6,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function d(e){for(var t=function(e){var t=[],n=(e=e.replace(/[^A-Za-z0-9\-\+_\=]/g,"")).length,r=0;for(;r<n;){var o=l.indexOf(e.charAt(r++)),i=l.indexOf(e.charAt(r++)),a=l.indexOf(e.charAt(r++)),s=l.indexOf(e.charAt(r++)),c=o<<2|i>>4,u=(15&i)<<4|a>>2,d=(3&a)<<6|s;t.push(String.fromCharCode(c)),64!==a&&t.push(String.fromCharCode(u)),64!==s&&t.push(String.fromCharCode(d))}return t.join("")}(e),n=t.length,r=0,o=[0,0],i=[];r<n;){for(var a=0,s=0,c=0,d=t.substr(r,8);c<4;)a|=d.charCodeAt(c)<<8*c,s|=d.charCodeAt(c+4)<<8*c,c++;var p=[a/u,s/u],f=[p[0]+o[0],p[1]+o[1]];o=f,i.push(f),r+=8}return i}var p=n(5088),f=(n(3332),n(3552),n(5167)),m=n(5877),v=n.n(m),h=["bus","tramway","trolleybus","underground","minibus","railway"],g={auto:"auto",masstransit:"mt",pedestrian:"pd",bicycle:"bc",scooter:"sc",taxi:"taxi",comparison:"comparison"},y={19:{main:8,underlay:12},18:{main:6,underlay:10},12:{main:4,underlay:8}},_={default:{underlay:8,main:4,border:void 0},colorize:{underlay:10,main:4,border:6}},b={default:{underlay:8,main:6,border:void 0},colorize:{underlay:12,main:6,border:8}},w="#fff",E="#6d6d6d",S="#6000ff",C={CLOSED:{color:"#333",border:"#000"},UNKNOWN:{color:"#b3b3b3",border:"#8e8e8e"},FREE:{color:"#47ca0b",border:"#2f8109"},LIGHT:{color:"#faff00",border:"#999c03"},HARD:{color:"#ff0003",border:"#9c0304"},VERY_HARD:{color:"#98201f",border:"#791918"}},k="#b3b3b3";function R(e){return e.find((function(e){return Boolean(e.isRecommended)}))||e[0]}function Z(e,t){var n,a=e.routePoints,c=e.viaIndexes,u=e.travelMode,l=e.activeRouteIndex,d=e.detailedIndex,p=e.settings,f=e.routerResponse,m=e.ignoreTravelModes,v=e.startNavigationInApp,y=a[0],_=a.reduce((function(e,n,r){var c=n.coords,u=n.searchResult,l=u&&u.uri&&c&&("toponym"!==u.type||(0,o.J)(u.coordinates,u.displayCoordinates)||u.uri&&s.mI(u.uri))&&(r<t.routes.maxCount-1||r===a.length-1)?u.uri:"";l=s.Jm(l)&&r>0&&r<a.length-1?"":l;var d=c&&(0,i.s)(c,{reverse:!0});return d?{pointCoords:e.pointCoords.concat([d]),pointUris:e.pointUris.concat([s.vz(l)?l:""])}:e}),{pointCoords:[],pointUris:[]}),b=_.pointCoords,w=_.pointUris;1!==b.length||!y||y.coords||y.value||(b.unshift(""),w.unshift(""));var E=p&&z(u,p),S=f&&f.routes[l],C="masstransit"===u&&p&&p.masstransit.avoidTypes.length!==h.length?p.masstransit.avoidTypes.join():void 0;return{rtext:b.join("~"),ruri:w.length>0?w.join("~"):void 0,via:c.length>0?c.join("~"):void 0,rtt:g[u],rtn:l>0?l:void 0,rtm:["auto","taxi"].includes(u)&&null!=p&&p.auto.ignoreTrafficJams?"atm":void 0,rtd:d>-1?d:void 0,routes:(0,r.Z)({},E,{avoidTypes:C,cargo:null!==(n=t.debug)&&void 0!==n&&n.params.includes("save-cargo-to-url")?null==E?void 0:E.cargo:void 0,activeComparisonMode:"comparison"===u&&S&&"taxi"!==S.type?S.type:void 0,timeDependent:E&&E.timeDependent&&("departure"!==E.timeDependent.type||E.timeDependent.time)?E.timeDependent:void 0,ignoreTravelModes:"comparison"===u?m:void 0}),start_navigation:v?"true":void 0}}function P(e,t,n){var r,o=Math.floor(e/86400),i=Math.floor(e/3600%24),a=Math.round(e/60%60);return 60===a&&(a=0,i++),24===i&&(i=0,o++),[o>0?(r={day:Math.abs(o)},r.day+" дн."):"",i>0?function(e){return e.hour+" ч"}({hour:Math.abs(i)}):"",a>0&&(!n||0===o)?function(e){return e.minutes+" мин"}({minutes:Math.abs(a)}):""].filter(Boolean).join(" ")||"1 мин"}function M(e,t){return 0===e?"start":t&&e!==t.length-1?"middle":"finish"}function I(){return{input:"",value:"",coords:null}}function x(){return[{input:"",value:"",coords:null},{input:"",value:"",coords:null}]}function T(e){var t=e.config,n=e.routes,r=f.Z.get("maps_routes_travel_mode",t),o=Object.keys(g).includes(r)?r:void 0;return{uuid:v().v4(),travelMode:o||"auto",activeField:0,isFocused:!0,isLoading:!1,optimizingStatus:void 0,activeRouteIndex:0,skipApplyBounds:!1,showMapForm:!1,detailedIndex:-1,moreSnippetsShown:!1,activePoint:null,routePoints:[{input:"",value:"",coords:null},{input:"",value:"",coords:null}],viaIndexes:[],routerResponse:null,mrcFeatureCollection:null,activeMrcIndex:null,geolocationError:null,isCargoSettingsActive:!1,settings:{auto:{ignoreTrafficJams:!1,avoid:[],timeDependent:{type:"departure"},cargo:null==n?void 0:n.temporaryStackData.cargo},masstransit:{avoidTypes:h,timeDependent:{type:"departure"}}}}}function L(e){var t=e.map(D);return t.filter(Boolean).length>0?t.join("~"):void 0}function D(e){var t=e.searchResult,n=e.ignorePctx;if(t&&!n)return"routePoint"in t?t.routePoint&&t.routePoint.context:void 0}function z(e,t){switch(e){case"auto":var n=t[e].timeDependent,o=t[e].cargo;return{avoid:0!==t[e].avoid.length?t[e].avoid.join():void 0,timeDependent:{time:n.time?j(new Date(n.time)):void 0},cargo:o&&0!==Object.keys(o).length?o:void 0};case"masstransit":var i=t[e].timeDependent,a=t[e].avoidTypes;return{avoidTypes:0===a.length||a.length===h.length?void 0:a.join(),timeDependent:(0,r.Z)({},i,{time:i.time?j(new Date(i.time)):void 0})};default:return}}function A(e){return{type:"LineString",coordinates:e.coordinates||[]}}function N(e){return e.routes.forEach((function(e){e.coordinates=e.encodedCoordinates?d(e.encodedCoordinates):[]})),e}function U(e,t){return e.waypoints=e.waypoints.map((function(e){var n=t.find((function(t){return Boolean(t.coords&&e.coordinates&&(0,o.J)(t.coords,e.coordinates))}));return(0,r.Z)({},e,{name:n?n.value:""})})),e}function O(e,t){if("comparison"===t){for(var n=0,r=1;r<e.length;r++)n+=(0,a.t)(e[r],e[r-1]);return n<=5e4}return!0}var F=O;function B(e,t){return"auto"===e&&function(e){return!e.uatraits.isMobile&&e.enableRoutesB2B}(t)&&c.Z.get("routes_b2b_agreement")||!1}function H(e,t){return e&&B(e,t)?t.routes.maxB2BCount:t.routes.maxCount}function q(e,t){var n=e.route,r=e.isActive,o=e.isDefaultColor;if(!r)return{stroke:[{width:_.default.main,color:E},{width:_.default.underlay,color:w}],cursor:"pointer"};var i=G({route:n,isDefaultColor:o},t);return{zIndex:10,stroke:[i.mainStyle,i.borderStyle,i.underlayStyle],cursor:"default"}}function G(e,t){var n=e.route,r=e.isDefaultColor,o=t.uatraits.isMobile?b:_,i=r?o.default:o.colorize,a=function(e,t,n){return n?{width:t.main,color:S}:{width:t.main,palette:e.map((function(e){return{count:e.count,color:C[e.type].color}}))}}(n.colorizeInfo||[],i,r),s=function(e,t,n){return n?{}:{width:t.border,palette:e.map((function(e){return{count:e.count,color:C[e.type].border}}))}}(n.colorizeInfo||[],i,r),c=function(e){return{width:e.underlay,color:w}}(i);return{mainStyle:a,borderStyle:s,underlayStyle:c}}function W(e){return y[e<=12?12:e<=18?18:19]}function j(e){var t=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":00";return e.getFullYear()+"-"+t+"-"+n+"T"+r}function V(e){return 2===e.length&&(0,a.t)(e[0],e[1])>1e5}function Y(e){var t=e.ignoreTrafficJams,n=e.travelMode,r=e.isRough;if(["auto","taxi","comparison"].includes(n))return r?"approx":t?"nojams":"best"}function K(e,t,n){var o=n.regionId,a=n.isRough,s=t.travelMode,c=t.routerResponse,u=t.routePoints,l=t.activeRouteIndex,d=t.viaIndexes,p=u.filter((function(e){return Boolean(e.coords)})),f=p.map((function(e){return e.coords})),m=c?c.routes[l]:null,v=t.activeComparisonMode?t.activeComparisonMode:m&&"taxi"!==m.type&&m.type||void 0,h=z(s,t.settings),g=[];return O(f,s)||g.push("bicycle"),F(f,s)||g.push("scooter"),(0,r.Z)({rll:f.map((function(e){return(0,i.s)(e)})).join("~"),type:s,activeComparisonMode:v,via:d.length>0?d.join("~"):void 0,mode:Y({ignoreTrafficJams:t.settings.auto.ignoreTrafficJams||Boolean(h&&h.timeDependent&&h.timeDependent.time&&"comparison"!==s),travelMode:s,isRough:a}),pctx:L(p),ignoreTravelModes:g.length>0?g.join(","):void 0,regionId:o,enableRoutesB2B:B(s,e)||void 0},h,{isIntercityRoute:V(f),"no-taxi-route-hidden":e.query["no-taxi-route-hidden"],experiments:e.experiments.routerParams})}function X(e){var t,n,r,o,i,a,s,c,u,l,d,f,m,v,g,y=e.query,_=null!==(t=y.routes)&&void 0!==t&&t.avoidTypes?y.routes.avoidTypes.split(","):"string"==typeof(null===(n=y.routes)||void 0===n?void 0:n.avoidTypes)?[]:h,b=null!==(r=y.routes)&&void 0!==r&&null!==(o=r.timeDependent)&&void 0!==o&&o.time?(m=y.routes.timeDependent.time,v=p.$_(e),g=p.Tt(m).getTime()+60*p.x2(v).getTimezoneOffset()*1e3,new Date(g)).getTime():void 0;return{auto:{ignoreTrafficJams:"atm"===y.rtm,avoid:null!==(i=null===(a=y.routes)||void 0===a||null===(s=a.avoid)||void 0===s?void 0:s.split(","))&&void 0!==i?i:[],timeDependent:{type:"departure",time:"auto"===y.rtt&&b||void 0},cargo:null!==(c=e.debug)&&void 0!==c&&null!==(u=c.params)&&void 0!==u&&u.includes("save-cargo-to-url")?null===(l=y.routes)||void 0===l?void 0:l.cargo:void 0},masstransit:{avoidTypes:_,timeDependent:{type:["departure","arrival"].includes(null===(d=y.routes)||void 0===d||null===(f=d.timeDependent)||void 0===f?void 0:f.type)?y.routes.timeDependent.type:"departure",time:"mt"===y.rtt&&b||void 0}}}}},1064:(e,t,n)=>{"use strict";n.d(t,{Z6:()=>a,IP:()=>u,KA:()=>c,M:()=>l,ZI:()=>d,mV:()=>f,eI:()=>s,EX:()=>p});var r=n(1318),o=["overview","timetable","reviews","gallery"],i=["stops","timetable"];function a(e){if("services"!==e&&"attractions"!==e)return function(e){return r.F.includes(e||"")}(e)?e:void 0}function s(e,t){var n,o=(null==t||null===(n=t.toponymDiscovery)||void 0===n?void 0:n.categories.map((function(e){return e.id})))||[];return function(e){return r.i.includes(e||"")}(e)||function(e,t){return e.includes(t||"")}(o,e)?e:void 0}function c(e){return function(e){return o.includes(e||"")}(e)?e:void 0}function u(e){return function(e){return i.includes(e||"")}(e)?e:void 0}function l(e){if("overview"!==e)return e}function d(e){return e&&"panorama"!==e?e:"overview"}function p(e){if("overview"!==e)return e}function f(e){return e&&"panorama"!==e&&"gallery"!==e?e:"overview"}},152:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r,o=n(4578),i=n(7363),a=n(2514),s=n(9327),c=n(259),u=n(3582),l=n(943),d=n(5495),p=n(7462),f=n(4807),m=n(844),v=n(9906),h=n(1279),g=function(){return window.PGreed.safeGet().then((function(e){return JSON.stringify(e)}))};function y(){if(r)return r;var e=window.PGreed?Promise.resolve():(0,v.Z)("https://yandex.ru/captchapgrd");return r=e.then(g)}const _={sendAnswer:function(e,t){return(0,f.Z)("business/sendAnswer",{body:e},t)},fetchUserReview:function(e,t){return(0,f.Z)("business/fetchUserReview",{query:e},t)},fetchUserReviews:function(e,t){return(0,f.Z)("business/fetchUserReviews",{query:e},t)},fetchUserPhotos:function(e,t){return(0,f.Z)("business/fetchUserPhotos",{query:e},t)},deleteBusinessPhotos:function(e,t){return(0,f.Z)("business/deleteUserPhotos",{query:e},t)},sendUserReview:function(e,t){return(r=(void 0===n?{}:n).timeout,o=void 0===r?2e3:r,Promise.race([y(),h.Vs(o)]).catch((function(){}))).then((function(n){return function(e){(0,m.Z)({url:"https://adfstat.yandex.ru/maps-front-maps",query:{reqid:e.reqId}})}(e),(0,f.Z)("business/sendUserReview",{body:(0,p.Z)({},e,{fingerprint:n})},t)}));var n,r,o},addUserReaction:function(e,t){return(0,f.Z)("business/addUserReaction",{body:e},t)},fetchReviews:function(e,t){return(0,f.Z)("business/fetchReviews",{query:(0,p.Z)({},e,{lang:t.lang})},t)},fetchServiceZone:function(e,t){return(0,f.Z)("business/fetchServiceZone",{query:{businessId:e,lang:t.lang,locale:t.locale}},t)},fetchUserImpressions:function(e,t){return(0,f.Z)("business/fetchUserImpressions",{query:e},t)},answerSbsQuestionImpression:function(e,t){return(0,f.Z)("business/answerSbsQuestionImpression",{query:e},t)},skipImpression:function(e,t){return(0,f.Z)("business/skipImpression",{query:e},t)},fetchPotentialCompany:function(e){return(0,f.Z)("business/fetchPotentialCompany",{},e)},answerIsOrganizationOwner:function(e,t){return(0,f.Z)("business/answerIsOrganizationOwner",{query:e},t)},answerIsSomeCompanyOwner:function(e,t){return(0,f.Z)("business/answerIsSomeCompanyOwner",{query:{isSomeCompanyOwner:e}},t)},answerIsOrganizationClosed:function(e,t){return(0,f.Z)("/business/answerIsOrganizationClosed",{body:e},t)}};var b={fill:"#3cb300",fillOpacity:.15,stroke:[{color:"#3cb300",opacity:1,width:2}],interactive:!1,zIndex:c.I.minimum,simplificationRate:0},w=function(e){function t(t){var n;return(n=e.call(this,t)||this)._loadAction=void 0,n._loadGeometry=function(){n.setState({geometry:void 0});var e=n.props.result.onlineProperties;if(e&&e.toponymIds&&!e.serviceGeometry){var t;null===(t=n._loadAction)||void 0===t||t.cancel();var r=n.props;n._loadAction=d.Z.create(_.fetchServiceZone(r.result.id,r.config),{success:function(e){n.setState({geometry:e})}})}},n._renderPolygon=function(e,t){return i.createElement(s.Z,{key:t,geometry:{type:"Polygon",coordinates:e},drawingStyle:b})},n._renderRadius=function(e){var t=n.props.result.coordinates;return i.createElement(l.ZP,{name:"zone"},i.createElement(u.Z,{center:t,radius:e,drawingStyle:b}))},n.state={},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadGeometry()},n.componentDidUpdate=function(e){e.result.id!==this.props.result.id&&this._loadGeometry()},n.render=function(){var e=this.props.result.onlineProperties||{},t=e.serviceGeometry,n=e.radius,r=this.state.geometry||t;return n?this._renderRadius(1e3*n):r&&r.length>0?r.map(this._renderPolygon):null},t}(i.Component);const E=(0,a.ZP)(w)},7114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(3366),o=n(7462),i=n(3841),a=n(4960);var s=n(9705),c=n(8024),u=n(4807),l=n(1118),d=["origin"],p="",f={fetch:function(e,t){return(0,u.Z)("search",{query:v(e,t)},t).then((function(e){return p=e.requestId,e}))},batchFetch:function(e,t){var n={requestQueries:e.map((function(e){return v(e,t)}))};return(0,u.Z)("search/batch",{body:n},t).then((function(e){var t,n=null===(t=e.find((function(e){return Boolean(e)})))||void 0===t?void 0:t.requestId;return n&&(p=n),e}))},fetchSearchResult:function(e,t,n){if(void 0===n&&(n={}),"poi"===e.from){if(e.uri)return f.loadPoiByUri(e.uri,t,n).then((function(t){return(0,o.Z)({},t,{items:t.items.map((function(t,n){return(0,o.Z)({},t,{hotspotProperties:e.hotspotProperties,displayCoordinates:e.coordinates&&0===n?e.coordinates:t.displayCoordinates})}))})}));if(e.coordinates)return f.loadPoiByCoordinates(e.coordinates,t,n).then((function(t){if(l.br(e.hotspotProperties)){var n=t.items[0],r={title:"Парковка",description:n.address,hotspotProperties:e.hotspotProperties,id:n.id,type:n.type,kind:n.kind,requestId:n.requestId,analyticsId:n.analyticsId,address:n.address,coordinates:n.coordinates,displayCoordinates:n.displayCoordinates,encodedCoordinates:n.encodedCoordinates,stops:n.stops,panorama:n.panorama,photos:n.photos,uri:n.uri};t.items=[r]}return t}))}if("whatshere"===e.from)return f.loadWhatshere(e,t);var r=(0,o.Z)({},e,{count:1,searchType:"TEXT"});return r.uri&&(r.mode="uri"),f.fetch(r,t)},fetchCategoryIcons:function(e,t){var n={ll:e.ll,lang:t.lang,priorityOrder:e.priorityOrder,extendedParams:t.experiments.menuParams};return(0,u.Z)("search/categoryIcons",{query:n},t)},prepareChainSearchRequest:function(e,t){return f.fetch({count:1,kind:"locality",text:(0,s.s)(e.center,{reverse:!0}),origin:"chain-city"},t).then((function(t){var n={searchType:"TEXT",displayText:e.chain.name,text:"chain_id:("+e.chain.id+")",origin:e.origin||"chain"},r=t.bounds;if(r){var o=function(e){var t=e[0][1],n=[e[1][0]-e[0][0],e[1][1]-t],r=Math.tan((0,i.I)(t+90)/2),o=Math.tan((0,i.I)(n[1])/2),s=Math.max((-r*r-r*o)/(r*o-1),0),c=.5*Math.log(s),u=2*(Math.atan(Math.exp(c))-.25*Math.PI);return{center:[(e[0][0]+e[1][0])/2,(0,a.Z)(u)],span:n}}(r);n.center=o.center,n.span=o.span}return n}))},loadPoiByCoordinates:function(e,t,n){return void 0===n&&(n={}),f.fetch({text:(0,s.s)(e,{reverse:!0}),count:1,origin:n.origin||"poi",clientId:n.clientId,snippets:m(t)},t)},loadPoiByUri:function(e,t,n){return void 0===n&&(n={}),f.fetch({mode:"uri",uri:e,count:1,origin:n.origin||"poi",clientId:n.clientId,snippets:m(t)},t)},loadWhatshere:function(e,t){var n=e.origin,o=(0,r.Z)(e,d);return f.fetch({pin:!0,text:(0,s.s)(o.coordinates,{reverse:!0}),zoom:o.zoom,span:[.001,.001],count:1,origin:n||"poi",addBuildingGeometry:e.addGeometry},t).then((function(e){var r,o=e.items[0];return o?("poi"!==n||t.uatraits.isMobile||(o.displayCoordinates=o.coordinates),t.uatraits.isMobile&&"house"===(null===(r=e.exactResult)||void 0===r?void 0:r.kind)&&(o.displayCoordinates=e.exactResult.coordinates),e):null})).catch((function(){return null}))}};function m(e){return e.search.snippets.filter((function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e}))}function v(e,t){var n=e.clientId||(t.uatraits.isMobile?"maps-m":"maps"),r=e.origin?n+"-"+e.origin:n,i={text:e.text,lang:t.locale,yandex_gid:t.userRegion.id,client_id:e.clientId,origin:r,results:e.count,ctx:e.context,mode:e.mode,lr:e.lr,uri:e.uri,business_oid:Array.isArray(e.id)?e.id.join(","):e.id,z:e.zoom,sort:e.sort,business_filter:e.filters,autoscale:e.autoscale,distinguish_layers:e.distinguishLayers,correct_misspell:e.correctMisspell,geocoder_kind:e.kind,skip:e.skip,rspn:e.restrictSpan,rearr:e.rearr,groupchains_advert:e.groupchains_advert,relev_ranking_formula:e.relev_ranking_formula,maxadv:e.maxadv,eventsBranch:t.query.eventsBranch,menuParams:t.experiments.menuParams};return e.addBuildingGeometry&&(i.search_geometry="2"),e.sortOrigin&&(i.sort_origin=(0,s.s)(e.sortOrigin)),e.center&&(i.ll=(0,s.s)(e.center)),e.span&&(i.spn=(0,s.s)(e.span)),e.bbox&&(i.bbox=e.bbox.join("~")),e.snippets?i.snippets=e.snippets:i.snippets=t.search.snippets,t.experiments.ui.groupSameCompanies&&(i.snippets=i.snippets.concat("collapsed_orgs/1.x")),t.experiments.ui.geosearchPinPriority&&(i.snippets=i.snippets.concat("pin_priority/1.x")),(t.experiments.ui.toponymDiscovery||t.experiments.ui.toponymDiscoveryAdvert)&&(i.snippets=i.snippets.concat("toponym_discovery/1.x"),i.snippets=i.snippets.concat("common_pic_menu")),i.snippets=i.snippets.join(),e.direct&&(i=(0,o.Z)({},i,t.advert.direct.params)),e.pin&&(i.geocoder_pin=1),e.type&&(i.type=e.type.join()),e.routeCoordinates&&e.bounds&&e.routeCoordinates.some((function(t){return(0,c.V)(e.bounds,t)}))&&(i.business_rll=e.routeCoordinates.map((function(e){return(0,s.s)(e,{fractionDigits:5})})).join("~")),e.clientUsecase&&(i.client_usecase=e.clientUsecase),e.suggestReqid&&"form"===e.origin&&(i.suggest_reqid=e.suggestReqid),e.serpId&&(i.serpid=e.serpId),(e.parentReqId||p||t.searchPreloadedResults)&&(i.parent_reqid=e.parentReqId||p||t.searchPreloadedResults.requestId),e.geoWhere&&(i.geowhere=(0,s.s)(e.geoWhere,{reverse:!0})),e.businessMode&&(i.business_mode=e.businessMode),"boolean"==typeof e.businessShowClosed&&(i.business_show_closed=e.businessShowClosed?1:0),e.ull&&(i.ull=(0,s.s)(e.ull)),(0,o.Z)({},i,e.rawParams,l.DB(t.query,t.experiments))}const h=f},2815:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r,o,i=n(4578),a=n(7363),s=n(745),c=n(2514),u={offsetWidth:0,offsetHeight:0},l=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=a.createRef(),n._calcSizes=function(e){return new Promise((function(t){n.setState({render:e},(function(){var e,r,o,i=null!==(e=null===(r=n._ref.current)||void 0===r||null===(o=r.children)||void 0===o?void 0:o[0])&&void 0!==e?e:u,a=i.offsetWidth,s=i.offsetHeight;t({width:a,height:s})}))}))},n.state={render:function(){return null}},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.setCalcSizes(this._calcSizes)},n.render=function(){return a.createElement("div",{ref:this._ref},this.state.render())},t}(a.PureComponent);const d=function(e,t){var n=function(){return o||(o=function(e){var t=window.document.createElement("div");t.setAttribute("style","position: absolute; top: -1000px; left: -1000px"),window.document.body.appendChild(t);var n=(0,s.s)(t);return new Promise((function(t){n.render(a.createElement(c.iV,{value:e},a.createElement(l,{setCalcSizes:t})))}))}(t)),o.then((function(t){return t(e)}))};return r=r?r.then(n):n()}},8056:(e,t,n)=>{"use strict";n.d(t,{Po:()=>r});function r(e,t,n){var r=(void 0===n?{}:n).useRealty,o=void 0===r||r,i=e.phones||[],a=e.realty;return a&&a.company.phone&&o&&!e.advert&&(i=[{number:a.company.phone,counter:a.company.phoneCounter+"&source=map&crc="+t.xscriptCsrfToken,type:"phone",info:"Офис продаж"}]),i}},1118:(e,t,n)=>{"use strict";n.d(t,{ql:()=>a,CU:()=>s,Dr:()=>c,As:()=>u,xi:()=>l,Ye:()=>d,cQ:()=>f,ZM:()=>m,yD:()=>v,z5:()=>h,Wv:()=>g,br:()=>_,UI:()=>p,qz:()=>y,DB:()=>b});var r=n(7462),o=(n(9676),n(9471),n(4135)),i=(n(9907),n(1099),n(8244),["one","two","three","four","five"]);function a(e){try{JSON.parse(e)}catch(t){return e.startsWith("provider:")}return!0}function s(e){return i.indexOf(e)+1||0}function c(e){return"business"===e.type?e.direct?"geodirect":e.advert?"yabs":"bizfinder":"toponym"===e.type?"geocoder":"direct"===e.type?"geodirect":"collection"===e.type?"collection":void 0}function u(e){return Boolean(e&&"results"in e&&e.results)}function l(e){return"similar"===e.type?e.isAdvert:Boolean("business"===e.type&&e.advert&&e.advert.highlighted)}function d(e){var t;if(e)return"categories"in e&&e.categories?null===(t=e.categories[0])||void 0===t?void 0:t.class:"toponym"===e.type?_(e.hotspotProperties)?"car park":"country"===e.kind?"country_fallback":e.kind:void 0}function p(e){return"MultiLineString"===(null==e?void 0:e.type)?{type:"MultiLineString",coordinates:e.coordinates}:"GeometryCollection"===(null==e?void 0:e.type)?{type:"Polygon",coordinates:e.geometries.reduce((function(e,t){return[].concat(e,t.coordinates)}),[])}:void 0}function f(e){if(u(e)){var t=1===e.results.items.length?e.results.items[0].uri:void 0;return o.QT(t)}}function m(e){if(u(e)){var t=e.results.items[0];return"transit-route"===(null==t?void 0:t.type)?t.transitRouteInfo.routeId:void 0}}function v(e){return"toponym"===e.type}function h(e){return"business"===e.type}function g(e){var t;return Boolean(null===(t=e.onlineProperties)||void 0===t?void 0:t.hideAddress)}function y(e,t){return{items:[e],requestCorrectedQuery:null==t?void 0:t.requestCorrectedQuery,requestId:e.requestId,requestQuery:null==t?void 0:t.requestQuery,requestResults:1,totalResultCount:1}}function _(e){return!(null==e||!e.vectorMetadata)&&"carparks"===e.vectorMetadata.get("_vector_layerName")}function b(e,t){var n=(0,r.Z)({},t.geoSearchParams);return t.ui.centralBankCollaboration&&(n.search_experimental_business_show_exp_features="cbrf"),t.boxes&&(n["test-buckets"]=t.boxes),n.internal_pron=t.ui,Object.entries(e).reduce((function(e,t){var n=t[0],r=t[1];return n.startsWith("search_")&&(e[n]=r),e}),n)}},4135:(e,t,n)=>{"use strict";n.d(t,{fS:()=>E,BW:()=>y,Uu:()=>d,QT:()=>m,p1:()=>w,AW:()=>b,Jm:()=>h,mI:()=>v,vz:()=>g,lB:()=>f,k8:()=>l,l4:()=>p,A:()=>S});var r=n(129),o=n(5731),i=n(9705),a="ymapsbm1://pin?",s="ymapsbm1://org?",c="ymapsbm1://transit/stop?",u=/ymapsbm1:\/\/route\/(\w+)/;function l(e){return!!e&&e.startsWith(s)}function d(e){return e&&l(e)?_(e).oid:void 0}function p(e){return e.startsWith(a)}function f(e){return!!e&&e.startsWith(c)}function m(e){return e&&f(e)?_(e).id:void 0}function v(e){return l(e)||p(e)||f(e)}function h(e){return e.startsWith("ymapsbm1://geo?")}function g(e){return l(e)||p(e)||f(e)||h(e)}function y(e){return(0,o.P)(_(e).ll)}function _(e){return r.parse(e.split("?")[1])}function b(e){return a+r.stringify({ll:(0,i.s)(e)})}function w(e){return c+r.stringify({id:e})}function E(e){return"direct"===e.type?"direct-"+(e.direct.url||e.coordinates):"collection"===e.type?"collection-"+e.alias+"-"+e.analyticsId:e.uri}function S(e){return function(e){if(e)return{pedestrian:"pedestrian",transit:"masstransit",bicycle:"bicycle",scooter:"scooter",driving:"auto"}[(e.match(u)||[])[1]]}(e)?e:void 0}},494:(e,t,n)=>{"use strict";n.d(t,{bL:()=>D,lR:()=>T});var r=n(2967),o=n(6422),i=n(5088),a=n(3332);function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function c(e){var t=new Date(e.getTime()),n=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*n+t.getTime()%6e4}var u=36e5,l=6e4,d={dateTimeDelimeter:/[T ]/,plainTime:/:/,timeZoneDelimeter:/[Z ]/i,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-])(\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function p(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},r=null==n.additionalDigits?2:s(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var o=f(e),i=m(o.date,r),a=i.year,u=i.restDateString,l=v(u,a);if(isNaN(l))return new Date(NaN);if(l){var d,p=l.getTime(),y=0;if(o.time&&(y=h(o.time),isNaN(y)))return new Date(NaN);if(o.timezone){if(d=g(o.timezone),isNaN(d))return new Date(NaN)}else d=c(new Date(p+y)),d=c(new Date(p+y+d));return new Date(p+y+d)}return new Date(NaN)}function f(e){var t,n={},r=e.split(d.dateTimeDelimeter);if(d.plainTime.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1],d.timeZoneDelimeter.test(n.date)&&(n.date=e.split(d.timeZoneDelimeter)[0],t=e.substr(n.date.length,e.length))),t){var o=d.timezone.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}function m(e,t){var n,r=d.YYY[t],o=d.YYYYY[t];if(n=d.YYYY.exec(e)||o.exec(e)){var i=n[1];return{year:parseInt(i,10),restDateString:e.slice(i.length)}}if(n=d.YY.exec(e)||r.exec(e)){var a=n[1];return{year:100*parseInt(a,10),restDateString:e.slice(a.length)}}return{year:null}}function v(e,t){if(null===t)return null;var n,r,o,i;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=d.MM.exec(e))return r=new Date(0),E(t,o=parseInt(n[1],10)-1)?(r.setUTCFullYear(t,o),r):new Date(NaN);if(n=d.DDD.exec(e)){r=new Date(0);var a=parseInt(n[1],10);return function(e,t){if(t<1)return!1;var n=w(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,a)?(r.setUTCFullYear(t,0,a),r):new Date(NaN)}if(n=d.MMDD.exec(e)){r=new Date(0),o=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return E(t,o,s)?(r.setUTCFullYear(t,o,s),r):new Date(NaN)}if(n=d.Www.exec(e))return S(t,i=parseInt(n[1],10)-1)?y(t,i):new Date(NaN);if(n=d.WwwD.exec(e)){i=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return S(t,i,c)?y(t,i,c):new Date(NaN)}return null}function h(e){var t,n,r;if(t=d.HH.exec(e))return C(n=parseFloat(t[1].replace(",",".")))?n%24*u:NaN;if(t=d.HHMM.exec(e))return C(n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")))?n%24*u+r*l:NaN;if(t=d.HHMMSS.exec(e)){n=parseInt(t[1],10),r=parseInt(t[2],10);var o=parseFloat(t[3].replace(",","."));return C(n,r,o)?n%24*u+r*l+1e3*o:NaN}return null}function g(e){var t,n,r;if(t=d.timezoneZ.exec(e))return 0;if(t=d.timezoneHH.exec(e))return k(r=parseInt(t[2],10))?(n=r*u,"+"===t[1]?-n:n):NaN;if(t=d.timezoneHHMM.exec(e)){r=parseInt(t[2],10);var o=parseInt(t[3],10);return k(r,o)?(n=r*u+o*l,"+"===t[1]?-n:n):NaN}return 0}function y(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var o=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}var _=[31,28,31,30,31,30,31,31,30,31,30,31],b=[31,29,31,30,31,30,31,31,30,31,30,31];function w(e){return e%400==0||e%4==0&&e%100!=0}function E(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var r=w(e);if(r&&n>b[t])return!1;if(!r&&n>_[t])return!1}return!0}function S(e,t,n){return!(t<0||t>52)&&(null==n||!(n<0||n>6))}function C(e,t,n){return(null==e||!(e<0||e>=25))&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}function k(e,t){return null==t||!(t<0||t>59)}function R(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,o=r&&r.options&&r.options.weekStartsOn,i=null==o?0:s(o),a=null==n.weekStartsOn?i:s(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=p(e,n),u=c.getDay(),l=(u<a?7:0)+u-a;return c.setDate(c.getDate()-l),c.setHours(0,0,0,0),c}function Z(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=p(e,t),r=n.getFullYear(),o=t||{},i=o.locale,a=i&&i.options&&i.options.firstWeekContainsDate,c=null==a?1:s(a),u=null==o.firstWeekContainsDate?c:s(o.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=new Date(0);l.setFullYear(r+1,0,u),l.setHours(0,0,0,0);var d=R(l,t),f=new Date(0);f.setFullYear(r,0,u),f.setHours(0,0,0,0);var m=R(f,t);return n.getTime()>=d.getTime()?r+1:n.getTime()>=m.getTime()?r:r-1}function P(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,o=r&&r.options&&r.options.firstWeekContainsDate,i=null==o?1:s(o),a=null==n.firstWeekContainsDate?i:s(n.firstWeekContainsDate),c=Z(e,t),u=new Date(0);u.setFullYear(c,0,a),u.setHours(0,0,0,0);var l=R(u,t);return l}var M=6048e5;function I(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=p(e,t),r=R(n,t).getTime()-P(n,t).getTime();return Math.round(r/M)+1}var x=["break","opening_soon","closing_soon"];function T(e,t,n){var r;void 0===n&&(n={});var o,i=e.status,a=e.currentWorkingStatus,s=n.short?null==a?void 0:a.shortText:null==a?void 0:a.text;return{text:n.showMoved&&null!==(r=e.businessProperties)&&void 0!==r&&r.moved_to?"Организация переехала":"open"===i?null!=s?s:"График работы не указан":(o=i,{"possible-closed":"Возможно, больше не работает","temporary-closed":"Временно не работает","permanent-closed":"Больше не работает"}[o]),state:{closed:"open"!==i||Boolean(a&&!a.isOpenNow),"changing-soon":!(!a||!a.tag)&&a.tag.some((function(e){return x.includes(e)})),"no-data":!s}}}function L(e,t){if(!e)return{};var n=[];e.unusual_hours&&(n=n.concat(e.unusual_hours)),e.valid_schedule&&(n=n.concat(e.valid_schedule));var r=i.x2(i.$_(t));return n.reduce((function(e,n){var o=function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return p(e,t).getDay()}(n),i=I(n,{weekStartsOn:1})===I(r,{weekStartsOn:1});if(!e[o]&&i){var s=p(n);e[o]=(0,a.p6)(s,t)}return e}),{})}function D(e,t){if(e.workingTime){var n=i.x2(i.$_(t)).getDay(),a=L(e.businessProperties,t);return[].concat(e.workingTime.slice(1),[e.workingTime[0]]).map((function(e,s){var c,u=(s+1)%7,l=(0,r.Z)(o.sb[u].slice(0,2));return e?1===e.length&&0===i.Hg(e[0].to,e[0].from)?(c="Круглосуточно",l+=" 00:00-23:59"):(c=e.map((function(e){var t=e.from,n=e.to;return i.BB(t)+" – "+i.BB(n)})),l+=" "+e.map((function(e){var t=e.from,n=e.to;return i.BB(t)+"-"+i.BB(n)})).join(",")):(c="Выходной",l=""),{dayName:(0,o.G7)(t,o.sb[u]),text:c,isWeekend:!e,isToday:n===u,changedDate:a[u],meta:l}}))}}},8876:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(4578),o=n(7363),i=n(2514),a=(0,n(671).Z)("time",{getToday:function(){return new Date},timeContext:{hydrationPhaseTime:null}}),s=a.connect;a.Provider,a.Context;const c=s;var u=n(9327),l=n(7048);var d=n(1886),p=n(1118),f=n(5698),m={Polygon:.165,MultiLineString:.05},v=function(e){function t(t){var n;return(n=e.call(this,t)||this)._timestamp=0,n._intensityRaf=-1,n._calculateIntensity=function(){if(n._stopAnimateIntensity(),n._getGeometry()){var e=n._getTargetIntensity();n.state.intensity!==e&&(n._stopAnimateIntensity(),n._startAnimateIntensity())}},n._startAnimateIntensity=function(){n._intensityRaf=window.requestAnimationFrame(n._animateIntensity)},n._stopAnimateIntensity=function(){window.cancelAnimationFrame(n._intensityRaf),n._timestamp=0},n._animateIntensity=function(){var e=n._getGeometry();if(e){var t=n._timestamp?(n.props.getToday().getTime()-n._timestamp)/(1e3/30):1,r=m[e.type]*t,o=n._getTargetIntensity(),i=n.state.intensity,a=i<o?Math.min(o,i+r):Math.max(o,i-r);n.props.config.query["no-animation"]&&(a=o),n.setState({intensity:a}),a!==o?(n._timestamp=n.props.getToday().getTime(),n._startAnimateIntensity()):n._timestamp=0}},n._getTargetIntensity=function(){var e,t=n._getGeometry();if(!t)return 0;var r=n.props.searchResults.items[0],o="MultiLineString"===t.type&&r&&g(r);if("Polygon"!==t.type&&!o)return 1;var i,a,s,c=(0,d.o)((e=[]).concat.apply(e,t.coordinates));return i=c,a=n.props.mapLocation.bounds,s=n.props.mapLocation.zoom,function(e,t){return e[0][0]<=t[0][0]&&e[0][1]<=t[0][1]&&e[1][0]>=t[1][0]&&e[1][1]>=t[1][1]}((0,l.n)(i,s),(0,l.n)(a,s))?0:1},n._getDrawingStyle=function(e,t){var r=n.state.intensity;switch(e.type){case"MultiLineString":return g(t)?{stroke:[{color:"#a3a8a8",opacity:r,width:3}],interactive:!1}:{stroke:[{color:"#000000",opacity:.18,width:6}],interactive:!1};case"Polygon":return{fill:y(t)?"#00ff00":"#ff4141",fillOpacity:.05*r,stroke:[{color:y(t)?"#359400":"#d54747",opacity:.7*r,width:2}],interactive:!1};default:return}},n._getGeometry=function(){var e=n.props.searchResults,t=e.requestDisplayGeometry;if(!t){var r=e.items[0];r&&"displayGeometry"in r&&(t=r.displayGeometry)}return(0,p.UI)(t)},n.state={intensity:0},n}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calculateIntensity()},n.componentDidUpdate=function(e){var t=this.props;e.mapLocation===t.mapLocation&&e.searchResults===t.searchResults||this._calculateIntensity()},n.componentWillUnmount=function(){this._stopAnimateIntensity()},n.render=function(){var e=this.props.searchResults.items[0];if(!e)return null;var t=this._getGeometry();if(!t)return null;var n=this._getDrawingStyle(t,e);return o.createElement(u.Z,{geometry:t,drawingStyle:n})},t}(o.PureComponent),h=["rezervation","forest","park","garden","grass"];function g(e){return"toponym"===e.type&&"route"===e.kind}function y(e){switch(e.type){case"toponym":return"vegetation"===e.kind;case"business":return(e.categories||[]).some((function(e){return h.includes(e.class||"")}));default:return!1}}const _=c((0,i.ZP)((0,f.ZP)({shouldWait:!0})(v)))},2186:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(4578),o=n(7363),i=n.n(o),a=n(5876),s=n(4874),c=n(943),u=n(1118),l=n(4135),d=n(956),p=n(2083),f=n(1027),m=(0,s.Z)({resolved:{},chunkName:function(){return"stories-preview"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("stories-preview").then(n.bind(n,1300))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 1300}}),v=(0,a.Z)("search-placemark-view"),h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._onClick=function(){t.props.onClick&&t.props.onClick(t.props.result)},t._getPlacemarkData=function(){var e=t.props;return{icon:e.icon,mode:e.mode,result:e.result}},t._onMouseEnter=function(){var e,n;null===(e=(n=t.props).onMouseEnter)||void 0===e||e.call(n,t._getPlacemarkData())},t._onMouseLeave=function(){var e,n;null===(e=(n=t.props).onMouseLeave)||void 0===e||e.call(n,t._getPlacemarkData())},t._renderEntrances=function(){var e=t.props;return e.active?o.createElement(p.Z,{result:e.result,analyticsName:"entrances",animated:!0}):null},t._renderEntranceStory=function(){var e=t.props,n=e.result;return e.active&&"business"===n.type&&n.lastMileStory?o.createElement(m,{result:n}):null},t}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.result,n=e.icon,r=e.title,i=!e.badgeText&&r&&r.position||"right",a=null;if(r){var s=null;e.badgeText&&(s=o.createElement("div",{className:v("badge")},e.badgeText));var p="bottom"!==i?n.centerY:void 0;a=o.createElement("div",{className:v("title"),style:{marginTop:p}},r.element,s)}var f=u.Ye(t),m="brandingId"in t&&t.brandingId||"advert"in t&&t.advert&&t.advert.pinBranding?"branding":f?"rubric":"default";return o.createElement(c.ZP,{name:e.analyticsName||"placemark",nodeState:{type:u.Dr(t),gml_id:t.analyticsId,pinPriority:"business"===t.type?t.pinPriority:void 0,logId:t.logId,permalink:"id"in t?t.id:void 0,uri:l.fS(t),reqid:t.requestId,branding:"brandingId"in t?t.brandingId:void 0,active:e.active,lowRelevance:"lowRelevance"in t&&t.lowRelevance,relatedAdvertType:"relatedAdvertType"in t&&t.relatedAdvertType||void 0,mode:e.mode,iconType:m},logClick:!0},o.createElement(d.Z,{coordinates:e.coordinates,zIndex:e.zIndex,onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},o.createElement("div",{className:v({position:i}),"data-object":"search-placemark","data-id":e.result.id,"data-log-id":e.result.logId,"data-mode":e.mode,"data-coordinates":e.coordinates.join(","),"data-icon-type":m,style:{marginTop:-n.baseY,marginLeft:"left"===i?n.baseX:"right"===i?-n.baseX:void 0}},o.createElement("div",{className:v("icon"),style:{width:n.width,height:n.height}},n.element),a)),e.showFlyover?null:this._renderEntrances(),this._renderEntranceStory())},t}(o.PureComponent);const g=(0,f.ZP)(h)},6493:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ue});var r=n(7462),o=n(7326),i=n(4578),a=n(7363),s=n(1118),c=n(5876),u=n(2514),l=n(6695),d=n(1491),p=(0,c.Z)("search-placemark-title"),f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._renderStars=function(e){var t=e.property.find((function(e){return"id"===e.key}));if(!t)return null;var n=s.CU(t.value);if(0===n)return null;for(var r=new Array(n),o=0;o<n;o++)r[o]=a.createElement(d.Z,{name:"star-8",key:o,inline:!0});return a.createElement("span",{key:"stars",className:p("subtitle-item")},r)},t._renderRating=function(e){var n=e.property.find((function(e){return"value_5"===e.key}));return n?a.createElement("span",{className:p("subtitle-item"),key:"rating"},a.createElement(d.Z,{name:"star-8",className:p("subtitle-item-rating-image"),inline:!0}),a.createElement("span",{className:p("subtitle-item-rating")},l.D(Number(n.value),t.props.config.lang,{min:1,max:1}))):null},t._renderWorkingHours=function(e){var t=e.property.find((function(e){return"is_open"===e.key})),n="closed_for_visitors"===e.type||!!t&&"0"===t.value;return a.createElement("span",{key:"working_hours",className:p("subtitle-item",{red:n})},e.text)},t._renderSubtitleItem=function(e){var n=e.text?e.text:"";if("star"===e.type)return t._renderStars(e);if("rating"===e.type)return t._renderRating(e);if("working_hours"===e.type||"closed_for_visitors"===e.type)return t._renderWorkingHours(e);var r="closed_for_without_qr"===e.type;return n?a.createElement("span",{key:e.type,className:p("subtitle-item",{red:r})},n):null},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,t=this.props.subtitleItems;return a.createElement("div",{className:p({background:e.background,"low-relevance":e.isLowRelevance,position:e.position,"no-truncate":e.disableTruncate})},a.createElement("div",{className:p("title")},e.title),t&&e.showSubtitle?a.createElement("div",{className:p("subtitle")},t.map(this._renderSubtitleItem)):null)},t}(a.PureComponent);const m=(0,u.ZP)(f);var v=n(9410),h=(0,c.Z)("poi-placemark-title");const g=function(e){var t=(0,v.Z)(e.title,{length:40}),n=e.hover?void 0:{color:e.color,WebkitTextFillColor:e.color};return a.createElement("div",{className:h({hover:e.hover}),style:n},t.split(" ").map((function(e,t){return a.createElement("span",{key:t,className:h("word")},e)})))};var y=n(494);const _=function(e){function t(t){var n;return(n=e.call(this,t)||this)._fetchIcon=function(){n.props.icon.promise.then((function(e){n.setState({element:e})}))},n.state={},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchIcon()},n.componentDidUpdate=function(e){this.props.icon.promise!==e.icon.promise&&this._fetchIcon()},n.render=function(){var e,t,n=this.state.element;return n?(null===(e=(t=this.props).children)||void 0===e?void 0:e.call(t,n))||n:null},t}(a.Component);var b=(0,c.Z)("search-placemark-icon");function w(e,t){return!t.experiments.ui.searchPinsNoClosed&&("business"===e.type&&("open"!==e.status||y.lR(e,t).state.closed))}const E=function(e){var t,n="lowRelevance"in e.result,o={mode:e.mode,state:e.state,"has-advert":s.xi(e.result),"low-relevance":n,closed:w(e.result,e.config)},i="business"===e.result.type?n?e.result.businessProperties&&e.result.businessProperties.geoproduct_poi_color||"#999":null===(t=e.style)||void 0===t?void 0:t.color:void 0,c=i&&"hover"!==e.state?{color:i}:void 0;return a.createElement("div",{className:b(o),style:(0,r.Z)({},c)},a.createElement(_,{icon:e.icon}))};var S=n(4807);var C=(0,c.Z)("search-placemark-icons"),k={dot:{source:'<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="2ccc4e9f8fe2f8acc9e7eab53f797f56__b" d="M7 14A7 7 0 1 0 7 0a7 7 0 0 0 0 14z"/><filter id="2ccc4e9f8fe2f8acc9e7eab53f797f56__a" width="150%" height="150%" x="-25%" y="-17.9%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd" transform="translate(4 4)"><use fill="#000" filter="url(#2ccc4e9f8fe2f8acc9e7eab53f797f56__a)" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><use fill="#FFF" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><path d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z" fill="currentColor"/><path fill="#000" class="tint" d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z"/></g></svg>\n',width:22,height:22},base:{source:'<svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="cbb016882db5c851af06eebb43c674f7__b" d="M17 31c7.732 0 14-6.268 14-14S24.732 3 17 3 3 9.268 3 17s6.268 14 14 14z"/><filter id="cbb016882db5c851af06eebb43c674f7__a" width="200%" height="200%" x="-50%" y="-50%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.200000003 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd"><use fill="#000" filter="url(#cbb016882db5c851af06eebb43c674f7__a)" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><use fill="#FFF" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><path fill="currentColor" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/><path fill="#000" class="tint" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/></g></svg>\n',width:34,height:34},active:{source:'<svg width="60" height="68" viewBox="0 0 60 68" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M23.51 51.523a.5.5 0 0 1-.5.477c-.29 0-.51-.21-.52-.477-.145-3.168-1.756-5.217-4.832-6.147C7.53 42.968 0 33.863 0 23 0 10.297 10.297 0 23 0s23 10.297 23 23c0 10.863-7.53 19.968-17.658 22.376-3.076.93-4.687 2.98-4.83 6.147z" id="ae96eeecd750ec2a83543f00c9bc789d__b"/><filter x="-21.7%" y="-15.4%" width="143.5%" height="138.5%" filterUnits="objectBoundingBox" id="ae96eeecd750ec2a83543f00c9bc789d__a"><feGaussianBlur in="SourceGraphic" stdDeviation="3"/><feOffset dy="2"/><feComponentTransfer><feFuncA type="linear" slope=".3"/></feComponentTransfer></filter></defs><g fill="none" fill-rule="evenodd"><g fill-rule="nonzero" transform="translate(7 5)" fill="currentColor"><use filter="url(#ae96eeecd750ec2a83543f00c9bc789d__a)" xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/><use xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/></g><path d="M30 68c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" fill="#fff" fill-rule="nonzero"/><path d="M30 66a2 2 0 1 0 .001-3.999A2 2 0 0 0 30 66z" fill="currentColor"/></g></svg>',className:C("active"),width:60,height:68,baseY:64,centerY:28}};function R(e){return k[e]}function Z(e,t){return(0,r.Z)({},M(e),{promise:t?t.then((function(t){return P(e,t)})):Promise.resolve(P(e))})}function P(e,t){var n=M(e),o=n.width,i=n.height,s=n.centerX,c=n.centerY,u={className:e.className,dangerouslySetInnerHTML:{__html:e.source}};return t?a.createElement("div",{style:{position:"relative",width:o,height:i}},a.createElement("div",(0,r.Z)({},u)),a.createElement("div",{style:{position:"absolute",left:s,top:c}},"point"===t?a.createElement("div",{className:C("content")}):t)):a.createElement("div",(0,r.Z)({style:{width:o,height:i}},u))}function M(e){var t=Math.round(e.width/2),n=Math.round(e.height/2);return{width:e.width,height:e.height,baseX:e.baseX||t,baseY:e.baseY||n,centerX:e.centerX||t,centerY:e.centerY||n}}var I={base:{width:34,height:40,baseY:40},active:{width:60,height:68,baseY:64,centerY:28},dot:{width:22,height:22}},x={};function T(e,t){return{default:D("default",e,t),hover:D("hover",e,t),visited:D("visited",e,t)}}function L(e){return'<img src="'+e+'" width="100%" height="100%" />'}function D(e,t,n){var o=I[t];return(0,r.Z)({},M(o),{promise:n.then((function(n){var i,a=null===(i=n[t])||void 0===i?void 0:i[e];return a?P((0,r.Z)({},o,{source:L(a)})):void 0}))})}const z={get:function(e,t){if(!x[e]){var n=(0,S.Z)("branding/icons",{query:{name:e}},t);x[e]={base:T("base",n),active:T("active",n),dot:T("dot",n)}}return x[e]}};var A=n(844),N=n(9907);var U=(0,c.Z)("rubric-placemark-icons-provider"),O={geoproduct:{source:'<svg fill="none" height="40" width="34" xmlns="http://www.w3.org/2000/svg"><filter id="24609e80b326bd45d5a64be8fc7ffd36__a" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse" height="38" width="32" x="1" y="2"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/></filter><g filter="url(#24609e80b326bd45d5a64be8fc7ffd36__a)"><path fill="#000" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/></g><path fill="#fff" d="M3 17C3 9.266 9.267 3 17 3c7.732 0 14 6.268 14 14 0 5.082-2.014 8.247-6.235 11.76-.295.245-1.696 1.382-2.054 1.684-1.852 1.56-2.6 2.572-2.721 3.757l-.012.109a2.995 2.995 0 0 1-5.959-.018l-.01-.106c-.112-1.185-.857-2.196-2.71-3.755-.361-.304-1.77-1.446-2.065-1.691C5.014 25.234 3 22.073 3 17z"/><path fill="currentColor" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/><path fill="#000" class="tint" d="M5 17c0 10 10.436 11.04 11 16.997l.01.104a.993.993 0 0 0 1.979.005l.011-.11C18.609 28.053 29 27 29 17c0-6.627-5.373-12-12-12S5 10.37 5 17z"/></svg>',width:34,height:40,centerY:17,baseY:38},"low-relevance":{source:'<svg width="28" height="34" viewBox="0 0 28 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.2247 28.9111C12.133 27.9459 11.6447 27.1349 10.8253 26.292C10.2356 25.6855 9.54841 25.1305 8.78321 24.5125C8.44143 24.2365 8.08408 23.9479 7.71292 23.6366C5.37129 21.6722 2.89999 19.1042 2.89999 14.4658C2.89999 8.35203 7.86976 3.39999 14 3.39999C20.1304 3.39999 25.1 8.35434 25.1 14.4658C25.1 19.1025 22.6402 21.6727 20.3021 23.6393C19.9262 23.9555 19.5645 24.2481 19.2186 24.5279C18.46 25.1415 17.7778 25.6935 17.1898 26.2968C16.3675 27.1407 15.8737 27.9527 15.7745 28.9181L15.765 29.0107C15.7161 29.4865 15.4554 29.874 15.1734 30.1276C14.8914 30.3813 14.4782 30.6 13.9988 30.6C13.0882 30.6 12.3249 29.9125 12.2344 29.008L12.2247 28.9111Z" fill="white" fill-opacity="0.6"/><path d="M4.00143 14.5004C4.00143 8.97615 8.47795 4.50179 14 4.50179C19.5221 4.50179 23.9986 8.9783 23.9986 14.5004C23.9986 22.8325 15.3405 23.7089 14.8332 28.6624C14.83 28.694 14.8269 28.7245 14.8239 28.7537C14.785 29.1334 14.3805 29.4982 13.9989 29.4982C13.5738 29.4982 13.218 29.1765 13.1759 28.7535C13.173 28.7243 13.1699 28.694 13.1668 28.6624C12.6965 23.6996 4.00143 22.8325 4.00143 14.5004Z" fill="currentColor"/></svg>\n',width:28,height:34,baseY:32,centerX:14,centerY:15},card:{source:'<svg width="28" height="32" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 14c0 5.508 3.18 10.273 7.805 12.558 3.026 1.573 4.847 3.215 5.463 4.928a.778.778 0 0 0 1.464 0c.616-1.713 2.437-3.355 5.463-4.928C24.819 24.273 28 19.508 28 14c0-7.732-6.268-14-14-14S0 6.268 0 14z" fill="currentColor"/></svg>',width:34,height:40,baseY:38,centerX:14,centerY:14}},F={};function B(e,t,n){return{default:Z("base"===e&&n&&O[n]||R(e),t.then((function(t){return a.createElement("div",{className:U(e+"-content",{"pin-type":n}),dangerouslySetInnerHTML:{__html:t[e]}})})))}}const H={get:function(e,t,n){var r=function(e,t){if(!F[e]){var n=["small","normal"].map((function(n){return N.Gr({type:"rubrics",name:e,size:n},t)||""})).map((function(e){return e?(0,A.Z)({url:e,parser:"string"}):Promise.resolve("")}));F[e]=Promise.all(n).then((function(e){return{base:e[0],active:e[1]}}))}return F[e]}(e,t);return{base:B("base",r,n),active:B("active",r)}}};var q={dot:{width:18,height:18},base:{width:34,height:40,baseY:36},active:{width:60,height:68,baseY:64,centerY:28}},G={get:function(e){return Object.entries(e).reduce((function(e,t){var n,o=t[0],i=t[1];return(0,r.Z)({},e,((n={})[o]=Object.entries(i||{}).reduce((function(e,t){var n,i=t[0],a=t[1];return(0,r.Z)({},e,((n={})[i]=Z((0,r.Z)({source:W(a,o)},q[o])),n))}),{}),n))}),{})}};function W(e,t){e.startsWith("https://")||(e="https://avatars.mds.yandex.net/get-{id}_%s".replace("{id}",e.replace(/--/g,"/")));var n=Math.max(2,Math.ceil(window.devicePixelRatio||1)),r=e.replace("%s","x"+n);return'<img height="'+q[t].height+'" width="'+q[t].width+'" src="'+r+'" />'}const j=G;var V={width:60,height:68,baseY:64,centerY:28},Y={transit:26};function K(e,t){var n='<div class="poi-icon-provider" style="'+("width: "+t.width+"px; height: "+t.height+"px;background: url("+e+") 50% bottom no-repeat; background-size: contain")+'" />';return{default:Z((0,r.Z)({source:n},t))}}const X={get:function(e,t){var n=(t||[]).find((function(e){return Object.keys(Y).includes(e)}));return{active:K(e,(0,r.Z)({},V,{centerY:n&&Y[n]||V.centerY}))}}};var $=n(2815),Q=n(6897),J=n(4135);n(3552),n(5095);function ee(e,t){return"children"in t?t.children.map((function(t){return ee(e,t)})).find(Boolean)||null:e(t)?t:null}function te(e,t){return function(e,t){return ee((function(t){return t.uri===e}),t)}(J.fS(e),t)||function(e,t){return ee((function(t){var n=J.BW(t.uri);return J.l4(t.uri)&&null!==n&&(0,Q.J)(n,e.coordinates)}),t)}({coordinates:e.displayCoordinates},t)}var ne={};function re(e){var t,n,o,i,c="shortTitle"in e.result&&e.result.shortTitle||e.result.title||"",u="subtitleItems"in e.result&&e.result.subtitleItems||[],l="hover"===e.state;if(e.hideTitle||!c||["dot","base"].includes(e.mode)&&!l)return Promise.resolve(void 0);e.rootFolder&&s.yD(e.result)&&(o=null===(i=te(e.result,e.rootFolder))||void 0===i?void 0:i.title);var d="lowRelevance"in e.result,p="business"===e.result.type&&!e.config.experiments.ui.disableSearchResultsPreview,f={title:null!==(t=o)&&void 0!==t?t:c,subtitleItems:u,showSubtitle:["active","subtitle"].includes(e.mode)||l&&!p,background:"active"!==e.mode,isLowRelevance:d,disableTruncate:!0},v=d&&"business"===e.result.type&&(null===(n=e.result.businessProperties)||void 0===n?void 0:n.geoproduct_poi_label_color)||void 0,h=e.titlePosition||"right",y=d&&!["dot","active"].includes(e.mode)&&e.config.isVectorEnabled?a.createElement(g,{title:f.title,color:v,hover:"hover"===e.state}):a.createElement(m,(0,r.Z)({},f,{position:h})),_=JSON.stringify(f);return ne[_]=ne[_]||(0,$.Z)((function(){return y}),e.config),ne[_].then((function(e){return(0,r.Z)({},e,{element:y,position:h})}))}function oe(e){var t=e.state||"default",n=["title","subtitle"].includes(e.mode)?"base":e.mode,o=function(e){var t,n=e.result,r=s.Ye(n),o=e.config.experiments.ui.flyover&&"flyover"in n&&(null===(t=n.flyover)||void 0===t?void 0:t.selectedIconUrl);if(o)return X.get(o);if("lowRelevance"in n)return H.get(r||"",e.config,"low-relevance");if("business"===n.type&&!n.direct&&n.advert&&n.advert.pinBranding)return j.get(n.advert.pinBranding);if("brandingId"in n&&n.brandingId)return z.get(n.brandingId,e.config);if("hotspotProperties"in n&&n.hotspotProperties&&n.hotspotProperties.selectedIconUrl)return X.get(n.hotspotProperties.selectedIconUrl,n.hotspotProperties.tags);if(r){var i,a=null!==(i=e.style)&&void 0!==i&&i.forceGeoproduct||s.xi(n)?"geoproduct":"default";return H.get(r,e.config,a)}return}(e),i=null==o?void 0:o[n],c=(null==i?void 0:i[t])||(null==i?void 0:i.default)||Z(R(n),Promise.resolve("dot"!==n?"point":void 0));return(0,r.Z)({},c,{element:a.createElement(E,{result:e.result,state:t,icon:c,mode:n,config:e.config,style:e.style})})}var ie=n(2186),ae=n(5495),se=n(259),ce=function(e){function t(t){var n;return(n=e.call(this,t)||this)._calcPlacemarkAction=void 0,n._calcPlacemark=function(e){ae.Z.cancel(n._calcPlacemarkAction);var t=n.state.hover?"hover":"default",r=e.result,o=e.mode,i=e.config;n._calcPlacemarkAction=ae.Z.create(function(e){return Promise.all([oe(e),re(e)]).then((function(e){return{icon:e[0],title:e[1]}}))}({result:r,mode:o,state:t,config:i}),{success:function(e){return n.setState({placemark:e})}})},n._onMouseEnter=function(){var e=(0,o.Z)(n).props;n.setState({hover:!0},(function(){return n._calcPlacemark(e)}))},n._onMouseLeave=function(){var e=(0,o.Z)(n).props;n.setState({hover:!1},(function(){return n._calcPlacemark(e)}))},n.state={hover:!1},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._calcPlacemark(this.props)},n.componentDidUpdate=function(e){e!==this.props&&this._calcPlacemark(this.props)},n.componentWillUnmount=function(){ae.Z.cancel(this._calcPlacemarkAction)},n.render=function(){var e=this.state.placemark;if(!e)return null;var t=this.props,n=t.result,o=se.I.search[t.mode];return a.createElement(ie.Z,(0,r.Z)({coordinates:t.coordinates,result:n},e,{analyticsName:t.analyticsName,zIndex:this.state.hover?o+1:o,onClick:t.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave}))},t}(a.Component);const ue=(0,u.ZP)(ce)},3513:(e,t,n)=>{"use strict";n.d(t,{ZU:()=>o,t0:()=>i});var r={closed:"Перекрытие движения",drawbridge:"Развод моста",reconstruction:"Дорожные работы",accident:"ДТП",police:"Камера",other:"Прочее",chat:"Прочее",danger:"Опасный участок"};function o(e){return e||0===e?e>=7?"red":e>=4?"yellow":"green":"gray"}function i(e){return e&&r[e]||r.other}},3225:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var r={tabIndex:-1,"aria-hidden":!0}},7643:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(7462),o=n(3243);const i=(0,n(1851).Z)(Object.getPrototypeOf,Object);var a=n(8533),s=Function.prototype,c=Object.prototype,u=s.toString,l=c.hasOwnProperty,d=u.call(Object);const p=function(e){if(!(0,a.Z)(e)||"[object Object]"!=(0,o.Z)(e))return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==d};const f=function e(t,n){var o=(0,r.Z)({},t);return Object.entries(n).forEach((function(t){var n=t[0],r=t[1];o.hasOwnProperty(n)&&p(r)?o[n]=e(o[n],r):o[n]=r})),o}},6422:(e,t,n)=>{"use strict";n.d(t,{sb:()=>r,G7:()=>o});var r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function o(e,t){return{sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота"}[t]}},5713:(e,t,n)=>{"use strict";n.d(t,{Bb:()=>r,Lr:()=>a,jq:()=>o});function r(e){return e>900?{distance:a(e/1e3,2)}.distance+" км":function(e){return e.distance+" м"}({distance:a(e,2)})}function o(e,t){var n="quadratic"===t?1e3:1;return e>900*n?{distance:i(s(e/(1e3*n)))}.distance+" км":function(e){return e.distance+" м"}({distance:i(s(e))})}function i(e){return e.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1 ")}function a(e,t){if(void 0===t&&(t=1/0),t<1)throw new Error("Can't round to significance of "+t+".");var n=Math.round(e).toString(),r=Math.max(0,n.length-t),o=Math.round(e/Math.pow(10,r));return Number(o+new Array(r).fill("0").join(""))}function s(e){if(e>100)return Math.round(e);var t=Math.pow(10,e>10?1:2);return Math.round(e*t)/t}},1099:(e,t,n)=>{"use strict";n.d(t,{du:()=>i,kh:()=>s,pk:()=>a});var r="tier2",o="tier1",i=function(e){return e.uatraits.isMobile?r:o};function a(e){var t;return Boolean(e&&"mapFeatures"in e&&(null===(t=e.mapFeatures)||void 0===t?void 0:t.some((function(e){return"flyover"in e&&e.flyover}))))}function s(e){return Boolean(e&&"flyover"in e&&e.flyover||a(e))}},6695:(e,t,n)=>{"use strict";n.d(t,{D:()=>s});var r={max:2};function o(e){return function(t,n){return function(e,t,n){void 0===n&&(n=r),"number"==typeof n.max&&(e=Math.round(e*Math.pow(10,n.max))/Math.pow(10,n.max));var o=e.toString().split("."),i=o[0],a=o[1],s=void 0===a?"":a;return t.thousands&&(i=i.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+t.thousands)),"number"==typeof n.max&&(s=s.slice(0,n.max)),"number"==typeof n.min&&s.length<n.min&&(s+="0".repeat(n.min-s.length)),[i,s].filter(Boolean).join(t.decimal)}(t,e,n)}}var i=o({decimal:",",thousands:" "}),a={ru:i,en:o({decimal:".",thousands:","}),uk:i,tr:o({decimal:",",thousands:"."}),uz:i,kk:i};function s(e,t,n){return a[t](e,n)}var c={RUB:!0,EUR:!0,USD:!0,GBP:!0,BYN:!0,UAH:!0,KZT:!0,AED:!0,AMD:!0,AZN:!0,GEL:!0,GHC:!0,GHS:!0,ILS:!0,XOF:!0,KGS:!0,LVL:!0,LTL:!0,MDL:!0,RON:!0,RSD:!0,UZS:!0},u={RUB:"₽",EUR:"€",USD:"$",GBP:"£",UAH:"грн.",ILS:"₪",KZT:"₸"},l={XOF:"CFA"};function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.keys(c).reduce((function(e,n){var r=t.includes(n)&&u[n];return e[n]={isSymbol:Boolean(r),value:r||l[n]||n},e}),{})}var p=d("RUB","EUR","USD","GBP","UAH","ILS","KZT"),f=d("UAH"),m=d("EUR","USD","GBP","ILS"),v=d("EUR","USD","GBP","ILS"),h=function(e,t){return e+" "+t.value},g=function(e,t){return t.value+(t.isSymbol?"":" ")+e};function y(e,t){return function(n,r){return e(n,t[r])}}var _=y(h,p),b=y(h,f);y(g,v),y(g,m)},2694:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,A:65,D:68,P:80,S:83,W:87}},3568:(e,t,n)=>{"use strict";function r(e){var t;return e.uatraits.isMobile&&(null===(t=e.query.source)||void 0===t?void 0:t.includes("wizbiz_new_map"))}n.d(t,{d:()=>r})},259:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var r={screenshotDialog:99999,clipboard:99999,ruler:8030,editing:8030,hover:8020,active:8e3,search:{active:8e3,subtitle:7500,title:7e3,base:6500,dot:6e3},advert:5e3,dialog:2e3,usermaps:{placemark:3e3,line:2e3,polygon:1e3},discovery:580,routes:550,routePins:{waypoint:8e3,masstransit:7900},masstransitStop:8001,moving:500,masstransitLineStop:510,home:451,work:450,default:400,tooltip:352,masstransitRegion:350,bookmarks:300,minimum:1}},1216:(e,t,n)=>{e.exports=n.p+"_/08a10d93b5a5ae1d7b9c8a60d1130dfe.svg"},2811:(e,t,n)=>{e.exports=n.p+"_/4df1b18e04d91a7d6e51416fbc7d6e2c.svg"},3186:(e,t,n)=>{e.exports=n.p+"_/0271ba6b4fcda690a80e91f92edc7177.svg"},7105:(e,t,n)=>{e.exports=n.p+"_/4a64d5af9caa53bf60a0e1406b2a9ae1.svg"},9394:(e,t,n)=>{e.exports=n.p+"_/6ea7417d52f272d43ace9fbac9bd69d5.svg"},2134:(e,t,n)=>{e.exports=n.p+"_/0f53f20efcc0f7d4a72d06e49963a70f.svg"},4796:(e,t,n)=>{e.exports=n.p+"_/9659bbe9fa69477d2a166dabea8ac48d.svg"},3727:(e,t,n)=>{e.exports=n.p+"_/55e8586f6ee1e236775eeb5de3a7d7c8.svg"},3285:(e,t,n)=>{e.exports=n.p+"_/4456c10ecbf5d583bdeb1c3d97ef263a.svg"},9421:(e,t,n)=>{e.exports=n.p+"_/c61b31295f839ad5761ab64c54f182f0.svg"},1139:(e,t,n)=>{e.exports=n.p+"_/8ae41e545e0b7d0739c75619398b63bf.svg"},1316:(e,t,n)=>{e.exports=n.p+"_/80c1d1903a722b7ff4ece5dbb64f1f8b.svg"},746:(e,t,n)=>{e.exports=n.p+"_/24fb17f86df88b118167ce528daea382.svg"},3247:(e,t,n)=>{e.exports=n.p+"_/aac1f51398ef9422eb5fa8d75a0aa9e7.svg"},4777:(e,t,n)=>{e.exports=n.p+"_/c52e7fc4ec73e5c05bc322b50bb07b4c.svg"},7836:(e,t,n)=>{e.exports=n.p+"_/952701244e8b9bee021d8e8849c931dc.svg"},826:(e,t,n)=>{e.exports=n.p+"_/b6637cb0d016f22e2676179b68ee92e6.svg"},2001:(e,t,n)=>{e.exports=n.p+"_/0baa9c914ba9b2778c517b28921f1961.svg"},8491:(e,t,n)=>{e.exports=n.p+"_/495897677a950e88ac35bee6acd284f7.svg"},3480:(e,t,n)=>{e.exports=n.p+"_/30dc3931380c1d46fd4ce2e7afaf74e0.svg"},1382:(e,t,n)=>{e.exports=n.p+"_/78fd7e5f9b721a273df35726afb8f72c.svg"},4966:(e,t,n)=>{e.exports=n.p+"_/455ccd488d8c0aee406d8e8cc689c013.svg"},6662:(e,t,n)=>{e.exports=n.p+"_/4ad220f6afa0590a01904bc61bd8c23a.svg"},6974:(e,t,n)=>{e.exports=n.p+"_/d1dade09981e7cd402c01e1cbcd07475.svg"},5277:(e,t,n)=>{e.exports=n.p+"_/c291190c2aa1f05e02c2c78d173ec5f7.svg"},7475:(e,t,n)=>{e.exports=n.p+"_/94b1a3126986232a21129e7155944120.svg"},7257:(e,t,n)=>{e.exports=n.p+"_/61683eb23625df83e8aef32ee06c1e14.svg"},1750:(e,t,n)=>{e.exports=n.p+"_/940d905012949694ddab386686eb71f9.svg"},6616:(e,t,n)=>{e.exports=n.p+"_/2fa4c0a332fe328eb31af96f6b942810.svg"},7228:(e,t,n)=>{e.exports=n.p+"_/1c6f4782634ac5951dc865bf288dd79a.svg"},6959:(e,t,n)=>{e.exports=n.p+"_/9f79510c62081a2e8295f974516febd3.svg"},5090:(e,t,n)=>{e.exports=n.p+"_/6bf7bf56354d5d2326dcb5d26ccb315f.svg"},9129:(e,t,n)=>{e.exports=n.p+"_/526b632dc5485eae718acc1a54c8e8b1.svg"},3463:(e,t,n)=>{e.exports=n.p+"_/33d6b319940be8c3dc7e251a2478efb4.svg"},1925:(e,t,n)=>{e.exports=n.p+"_/c9504bc15d493d33a35111cc69ac6b8a.svg"},8671:(e,t,n)=>{e.exports=n.p+"_/3087f8a7f898f2764b4242a8185f964c.svg"},6055:(e,t,n)=>{e.exports=n.p+"_/0adc8779bdefa7c4b9f58f4fff819771.svg"},3418:(e,t,n)=>{e.exports=n.p+"_/cb2341db6d0af3d9838b64ec9da115b6.svg"},466:(e,t,n)=>{e.exports=n.p+"_/fb41b675b9ab147c27b75c1787065148.svg"},7835:(e,t,n)=>{e.exports=n.p+"_/9f7ea1b9a3434256ba04e9331ebdffe6.svg"},4891:(e,t,n)=>{e.exports=n.p+"_/fd161c881e6392111418a1036fe1188e.svg"},115:(e,t,n)=>{e.exports=n.p+"_/ebe60c9063e4a91162d1366e790ea391.svg"},6941:(e,t,n)=>{e.exports=n.p+"_/7f78fe3f36223c298be58eb812e95646.svg"},8151:(e,t,n)=>{e.exports=n.p+"_/5cf17060c6672d32fb90b652cc8d17f0.svg"},8293:(e,t,n)=>{e.exports=n.p+"_/2e1750eb108b5881e5577c7e08041e3f.svg"},2620:(e,t,n)=>{e.exports=n.p+"_/7485047d3440076f2f17ebb52a011c9c.png"},7239:(e,t,n)=>{e.exports=n.p+"_/af158d44913f89ba43eabd0e26e9dda3.png"},361:(e,t,n)=>{e.exports=n.p+"_/9dae14af44a24ba50a1bf841f2d22144.png"},8045:(e,t,n)=>{e.exports=n.p+"_/af158d44913f89ba43eabd0e26e9dda3.png"},6735:(e,t,n)=>{e.exports=n.p+"_/9c80a04cdee2564f1b348f2c942570e5.png"},7641:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},821:(e,t,n)=>{e.exports=n.p+"_/db96e0b37fb683edb082b6d22cd47375.png"},856:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},8453:(e,t,n)=>{e.exports=n.p+"_/9d7d9192162a766707427f0fdfad6e69.png"},3681:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},1757:(e,t,n)=>{e.exports=n.p+"_/30566ea95b3b85e11fdf731ad19d0cb6.png"},2631:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},6394:(e,t,n)=>{e.exports=n.p+"_/00dbdb577dd780ef99cebd89eabff5b0.png"},2562:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},9346:(e,t,n)=>{e.exports=n.p+"_/6b36feaa685efb371af0a08ebce07269.png"},2654:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},2093:(e,t,n)=>{e.exports=n.p+"_/74ca6ea4b76200fd171c44aa5a49f5a8.png"},3567:(e,t,n)=>{e.exports=n.p+"_/d3d3e5e71c45bd5a155c12a2f093120e.png"},9349:(e,t,n)=>{e.exports=n.p+"_/4107b60439ecfb91bb4f01454bb365e2.png"},5538:(e,t,n)=>{e.exports=n.p+"_/dff25d38edaaaed43455e2838501c7d2.png"},5503:(e,t,n)=>{e.exports=n.p+"_/d7eede432ce185c2bcdea2a81dd73d60.svg"},8496:(e,t,n)=>{e.exports=n.p+"_/982f21b161efbb26f879ac8dcf5bc613.svg"},4306:(e,t,n)=>{e.exports=n.p+"_/88dd6621d29f63b3bcd11823a075bab8.svg"},285:(e,t,n)=>{e.exports=n.p+"_/6dfdf3e1f699e358e2a45696b5910bfc.svg"},1855:(e,t,n)=>{e.exports=n.p+"_/f869888cf7cada800b61fc42b9a84b32.svg"},9164:(e,t,n)=>{e.exports=n.p+"_/2288e6eacf3c5cc628de46cd146ffc9d.svg"},3988:()=>{},1784:()=>{},8216:(e,t,n)=>{"use strict";n.d(t,{$j:()=>q,I0:()=>Y});var r=n(7363),o=n.n(r),i=o().createContext(null);var a=function(e){e()},s=function(){return a};var c={notify:function(){},get:function(){return[]}};function u(e,t){var n,r=c;function o(){a.onStateChange&&a.onStateChange()}function i(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=s(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var a={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=c)},getListeners:function(){return r}};return a}var l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;var d=n(7462),p=n(3366),f=n(8679),m=n.n(f),v=n(2973),h=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],g=["reactReduxForwardedRef"],y=[],_=[null,null];function b(e,t){var n=e[1];return[t.payload,n+1]}function w(e,t,n){l((function(){return e.apply(void 0,t)}),n)}function E(e,t,n,r,o,i,a){e.current=r,t.current=o,n.current=!1,i.current&&(i.current=null,a())}function S(e,t,n,r,o,i,a,s,c,u){if(e){var l=!1,d=null,p=function(){if(!l){var e,n,p=t.getState();try{e=r(p,o.current)}catch(f){n=f,d=f}n||(d=null),e===i.current?a.current||c():(i.current=e,s.current=e,a.current=!0,u({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=p,n.trySubscribe(),p();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}}var C=function(){return[null,0]};function k(e,t){void 0===t&&(t={});var n=t,a=n.getDisplayName,s=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,c=n.methodName,l=void 0===c?"connectAdvanced":c,f=n.renderCountProp,k=void 0===f?void 0:f,R=n.shouldHandleStateChanges,Z=void 0===R||R,P=n.storeKey,M=void 0===P?"store":P,I=(n.withRef,n.forwardRef),x=void 0!==I&&I,T=n.context,L=void 0===T?i:T,D=(0,p.Z)(n,h),z=L;return function(t){var n=t.displayName||t.name||"Component",i=s(n),a=(0,d.Z)({},D,{getDisplayName:s,methodName:l,renderCountProp:k,shouldHandleStateChanges:Z,storeKey:M,displayName:i,wrappedComponentName:n,WrappedComponent:t}),c=D.pure;var f=c?r.useMemo:function(e){return e()};function h(n){var i=(0,r.useMemo)((function(){var e=n.reactReduxForwardedRef,t=(0,p.Z)(n,g);return[n.context,e,t]}),[n]),s=i[0],c=i[1],l=i[2],m=(0,r.useMemo)((function(){return s&&s.Consumer&&(0,v.isContextConsumer)(o().createElement(s.Consumer,null))?s:z}),[s,z]),h=(0,r.useContext)(m),k=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var R=k?n.store:h.store,P=(0,r.useMemo)((function(){return function(t){return e(t.dispatch,a)}(R)}),[R]),M=(0,r.useMemo)((function(){if(!Z)return _;var e=u(R,k?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[R,k,h]),I=M[0],x=M[1],T=(0,r.useMemo)((function(){return k?h:(0,d.Z)({},h,{subscription:I})}),[k,h,I]),L=(0,r.useReducer)(b,y,C),D=L[0][0],A=L[1];if(D&&D.error)throw D.error;var N=(0,r.useRef)(),U=(0,r.useRef)(l),O=(0,r.useRef)(),F=(0,r.useRef)(!1),B=f((function(){return O.current&&l===U.current?O.current:P(R.getState(),l)}),[R,D,l]);w(E,[U,N,F,l,B,O,x]),w(S,[Z,R,I,P,U,N,F,O,x,A],[R,I,P]);var H=(0,r.useMemo)((function(){return o().createElement(t,(0,d.Z)({},B,{ref:c}))}),[c,t,B]);return(0,r.useMemo)((function(){return Z?o().createElement(m.Provider,{value:T},H):H}),[m,H,T])}var R=c?o().memo(h):h;if(R.WrappedComponent=t,R.displayName=h.displayName=i,x){var P=o().forwardRef((function(e,t){return o().createElement(R,(0,d.Z)({},e,{reactReduxForwardedRef:t}))}));return P.displayName=i,P.WrappedComponent=t,m()(P,t)}return m()(R,t)}}function R(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Z(e,t){if(R(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!R(e[n[o]],t[n[o]]))return!1;return!0}function P(e){return function(t,n){var r=e(t,n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function M(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function I(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=M(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=M(o),o=r(t,n)),o},r}}const x=[function(e){return"function"==typeof e?I(e):void 0},function(e){return e?void 0:P((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?P((function(t){return function(e,t){var n={},r=function(r){var o=e[r];"function"==typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)r(o);return n}(e,t)})):void 0}];const T=[function(e){return"function"==typeof e?I(e):void 0},function(e){return e?void 0:P((function(){return{}}))}];function L(e,t,n){return(0,d.Z)({},n,e,t)}const D=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,o=n.pure,i=n.areMergedPropsEqual,a=!1;return function(t,n,s){var c=e(t,n,s);return a?o&&i(c,r)||(r=c):(a=!0,r=c),r}}}(e):void 0},function(e){return e?void 0:function(){return L}}];var z=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function A(e,t,n,r){return function(o,i){return n(e(o,i),t(r,i),i)}}function N(e,t,n,r,o){var i,a,s,c,u,l=o.areStatesEqual,d=o.areOwnPropsEqual,p=o.areStatePropsEqual,f=!1;function m(o,f){var m,v,h=!d(f,a),g=!l(o,i);return i=o,a=f,h&&g?(s=e(i,a),t.dependsOnOwnProps&&(c=t(r,a)),u=n(s,c,a)):h?(e.dependsOnOwnProps&&(s=e(i,a)),t.dependsOnOwnProps&&(c=t(r,a)),u=n(s,c,a)):g?(m=e(i,a),v=!p(m,s),s=m,v&&(u=n(s,c,a)),u):u}return function(o,l){return f?m(o,l):(s=e(i=o,a=l),c=t(r,a),u=n(s,c,a),f=!0,u)}}function U(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,i=(0,p.Z)(t,z),a=n(e,i),s=r(e,i),c=o(e,i);return(i.pure?N:A)(a,s,c,e,i)}var O=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function F(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function B(e,t){return e===t}function H(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?k:n,o=t.mapStateToPropsFactories,i=void 0===o?T:o,a=t.mapDispatchToPropsFactories,s=void 0===a?x:a,c=t.mergePropsFactories,u=void 0===c?D:c,l=t.selectorFactory,f=void 0===l?U:l;return function(e,t,n,o){void 0===o&&(o={});var a=o,c=a.pure,l=void 0===c||c,m=a.areStatesEqual,v=void 0===m?B:m,h=a.areOwnPropsEqual,g=void 0===h?Z:h,y=a.areStatePropsEqual,_=void 0===y?Z:y,b=a.areMergedPropsEqual,w=void 0===b?Z:b,E=(0,p.Z)(a,O),S=F(e,i,"mapStateToProps"),C=F(t,s,"mapDispatchToProps"),k=F(n,u,"mergeProps");return r(f,(0,d.Z)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:C,initMergeProps:k,pure:l,areStatesEqual:v,areOwnPropsEqual:g,areStatePropsEqual:_,areMergedPropsEqual:w},E))}}const q=H();function G(){return(0,r.useContext)(i)}function W(e){void 0===e&&(e=i);var t=e===i?G:function(){return(0,r.useContext)(e)};return function(){return t().store}}var j=W();function V(e){void 0===e&&(e=i);var t=e===i?j:W(e);return function(){return t().dispatch}}var Y=V();var K,X=n(1533);K=X.unstable_batchedUpdates,a=K},8359:(e,t)=>{"use strict";var n=60103,r=60106,o=60107,i=60108,a=60114,s=60109,c=60110,u=60112,l=60113,d=60120,p=60115,f=60116,m=60121,v=60122,h=60117,g=60129,y=60131;if("function"==typeof Symbol&&Symbol.for){var _=Symbol.for;n=_("react.element"),r=_("react.portal"),o=_("react.fragment"),i=_("react.strict_mode"),a=_("react.profiler"),s=_("react.provider"),c=_("react.context"),u=_("react.forward_ref"),l=_("react.suspense"),d=_("react.suspense_list"),p=_("react.memo"),f=_("react.lazy"),m=_("react.block"),v=_("react.server.block"),h=_("react.fundamental"),g=_("react.debug_trace_mode"),y=_("react.legacy_hidden")}function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case a:case i:case l:case d:return e;default:switch(e=e&&e.$$typeof){case c:case u:case f:case p:case s:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return b(e)===c}},2973:(e,t,n)=>{"use strict";e.exports=n(8359)},267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.create;Object.create;var o=n(7363);function i(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var i,a,s=(0,o.useRef)(0),c=(i=(0,o.useRef)(!1),a=(0,o.useCallback)((function(){return i.current}),[]),(0,o.useEffect)((function(){return i.current=!0,function(){i.current=!1}}),[]),a),u=(0,o.useState)(n),l=u[0],d=u[1],p=(0,o.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=++s.current;return d((function(e){return r(r({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return c()&&o===s.current&&d({value:e,loading:!1}),e}),(function(e){return c()&&o===s.current&&d({error:e,loading:!1}),e}))}),t);return[l,p]}},2383:(e,t,n)=>{"use strict";n.d(t,{Bm:()=>l,oU:()=>a,eQ:()=>i,uB:()=>c,dL:()=>u});var r=n(7698),o=n(804),i=0,a=50*o.Z,s=10*o.Z,c=i-s,u=a+s;function l(e,t){return r.areFuzzyEqual(e.worldCenter,t.worldCenter)&&e.zoom===t.zoom&&e.azimuth===t.azimuth&&e.tilt===t.tilt}},6068:(e,t,n)=>{"use strict";n.d(t,{SF:()=>o,Sv:()=>i,zw:()=>a,wo:()=>s});var r=n(1372),o=256,i=130,a=32,s=function(e){if("tile"===e.type){var t=(0,r.pi)({},e),n=e;return n.raster&&(t.raster=(0,r.pi)({},e.raster)),n.vector&&(t.vector=(0,r.pi)({},e.vector)),t}return(0,r.pi)({},e)}},8961:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(7486),o={linear:{p1:{x:0,y:0},p2:{x:1,y:1}},ease:{p1:{x:.25,y:.1},p2:{x:.25,y:1}},"ease-in":{p1:{x:.42,y:0},p2:{x:1,y:1}},"ease-out":{p1:{x:0,y:0},p2:{x:.58,y:1}},"ease-in-out":{p1:{x:.42,y:0},p2:{x:.58,y:1}}};function i(e){if("function"==typeof e)return e;if("string"==typeof e)return e in o||(0,r._y)(new Error("Unexpected timing function used: ".concat(e))),i(o[e]);var t=e,n=t.p1,a=t.p2,s=3*n.x,c=3*n.y,u=3*(a.x-2*n.x),l=3*(a.y-2*n.y),d=3*(n.x-a.x)+1,p=3*(n.y-a.y)+1;function f(e){return d*Math.pow(e,3)+u*Math.pow(e,2)+s*e}function m(e){return s+e*(2*u+3*e*d)}return function(e){return t=function(e){for(var t,n=e,r=0;r<5&&(t=f(n)-e,!(Math.abs(t)<.001));)n-=t/m(n),r++;return n}(e),p*Math.pow(t,3)+l*Math.pow(t,2)+c*t;var t}}},5623:(e,t,n)=>{"use strict";n.d(t,{Cr:()=>i,ZE:()=>a,$7:()=>s,JO:()=>c});var r=n(1372),o=n(7486);function i(e,t){return(0,r.pi)((0,r.pi)({},e),{geometry:e.geometry&&a(e.geometry,t)})}function a(e,t){switch(e.type){case"Point":return(0,r.pi)((0,r.pi)({},e),{coordinates:t(e.coordinates)});case"LineString":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map(t)});case"MultiLineString":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map((function(e){return e.map(t)}))});case"Polygon":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map((function(e){return e.map(t)}))});case"MultiPolygon":return(0,r.pi)((0,r.pi)({},e),{coordinates:e.coordinates.map((function(e){return e.map((function(e){return e.map(t)}))}))});default:(0,o._y)(new Error("Unexpected geometry type: ".concat(e.type)))}}function s(e){var t;return"FeatureCollection"===e.type?(t=[]).concat.apply(t,e.features.map((function(e){return s(e)}))):[e]}function c(e){"string"!=typeof e.id&&(0,o._y)(new Error("Feature or collection id must be a string"))}},2366:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var r="hidden"},9370:(e,t,n)=>{"use strict";n.d(t,{XK:()=>a,X_:()=>i,F7:()=>c});var r=n(1372),o=n(7486),i="__empty__";function a(e){var t={id:e.id,source:e.source?e.source:i,type:e.type?e.type:"default",options:{raster:{},vector:{}}};return e.options&&(e.options.raster&&(t.options.raster=(0,r.pi)({},e.options.raster)),e.options.vector&&(t.options.vector=(0,r.pi)({},e.options.vector))),t}var s=/^(\w+)?(?::(\w+)(?:\((.*)\))?)?$/;function c(e,t){var n=e.match(s);n&&0!==n[0].length||(0,o._y)(new Error("Bad string layer spec '".concat(e,"'")));for(var i=n[1],a=n[2],c=n[3],u=c?c.split(","):[],l=Object.create(null),d=0,p=u;d<p.length;d++){l[p[d]]=!0}return{id:e,source:i,type:a,options:{raster:(0,r.pi)((0,r.pi)({},l),null==t?void 0:t.raster),vector:(0,r.pi)((0,r.pi)({},l),null==t?void 0:t.vector)}}}},7486:(e,t,n)=>{"use strict";var r;function o(e){r||(r=e({project:"ymaps3",unhandledRejection:!1,uncaughtException:!1}))}function i(e){e&&"object"==typeof e||(e=new Error(e||"empty")),function(e){var t=e.logged,n="AbortError"===e.name,r=/fetch|network/i.test(e.message);return!(t||n||r)}(e)&&(r?(r({additional:e.additionalInfo},e),e.logged=!0):window.console.error("There is no error logger to log the error:",e))}function a(e){throw i(e),e}n.d(t,{YD:()=>o,H:()=>i,_y:()=>a}),o.reset=function(){r=void 0}},804:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r,j:()=>o});var r=Math.PI/180,o=180/Math.PI},7698:(e,t,n)=>{"use strict";n.r(t),n.d(t,{create:()=>o,add:()=>i,sub:()=>a,muln:()=>s,divn:()=>l,mulv:()=>c,divv:()=>u,applyFunction:()=>d,areEqual:()=>f,areFuzzyEqual:()=>p,normalize:()=>m,length:()=>v,length2:()=>h,dot:()=>g,avg:()=>y,rotate:()=>w,ORIGIN:()=>r});var r=o(0,0);function o(e,t){return{x:e,y:t}}function i(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x+t.x,n.y=e.y+t.y,n}function a(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x-t.x,n.y=e.y-t.y,n}function s(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x*t,n.y=e.y*t,n}function c(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x*t.x,n.y=e.y*t.y,n}function u(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x/t.x,n.y=e.y/t.y,n}function l(e,t,n){return void 0===n&&(n=o(0,0)),n.x=e.x/t,n.y=e.y/t,n}function d(e,t,n){return void 0===n&&(n=o(0,0)),n.x=t(e.x,1),n.y=t(e.y,2),n}function p(e,t,n){void 0===n&&(n=1e-6);var r=a(e,t);return-n<r.x&&r.x<n&&-n<r.y&&r.y<n}function f(e,t){return e.x===t.x&&e.y===t.y}function m(e,t){return void 0===t&&(t=o(0,0)),l(e,v(e),t)}function v(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function h(e){return Math.pow(e.x,2)+Math.pow(e.y,2)}function g(e,t){return e.x*t.x+e.y*t.y}function y(e,t){return void 0===t&&(t=o(0,0)),t.x=e.reduce((function(e,t){return e+t.x}),0)/e.length,t.y=e.reduce((function(e,t){return e+t.y}),0)/e.length,t}var _=Math.cos,b=Math.sin;function w(e,t,n){void 0===n&&(n=o(0,0));var r=e.x,i=e.y,a=_(t),s=b(t);return n.x=a*r-s*i,n.y=s*r+a*i,n}},1127:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(1372);function o(e){var t=e.getLayers(),n=t.topRasterLayers,o=t.mainLayers;return(0,r.ev)((0,r.ev)([],n,!0),o,!0).map((function(e){return e.split(":")[0]})).filter((function(e,t,n){return t===n.indexOf(e)})).map((function(t){var n,r=e.getDataSource(t);return"tile"===(null==r?void 0:r.type)&&(null===(n=null==r?void 0:r.copyrights)||void 0===n?void 0:n.join(" "))})).filter(Boolean).join(" ")}},8024:(e,t,n)=>{"use strict";n.d(t,{V:()=>c});var r=n(5930),o=n(5900),i=n(283),a=n(7048);var s=n(7806);function c(e,t,n){e=n?[[Math.min(e[0][0],e[1][0])-n,Math.min(e[0][1],e[1][1])-n],[Math.max(e[0][0],e[1][0])+n,Math.max(e[0][1],e[1][1])+n]]:e;var c=(0,r.Z)(s.m6),u=(0,o.f)(t,s.m6);return(0,i.C)((0,a.n)(e,s.m6),c).some((function(e){return function(e,t){return t[0]>=e[0][0]&&t[0]<=e[1][0]&&t[1]>=e[0][1]&&t[1]<=e[1][1]}(e,u)}))}},5930:(e,t,n)=>{"use strict";function r(e){return Math.pow(2,e+8)}n.d(t,{Z:()=>r})},1421:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var r=n(8447),o=n(8860);function i(e,t,n,r,a){void 0===r&&(r=e(t)),void 0===a&&(a=e(n));var s,c,u,l=Math.PI/60,d=Math.PI/4,p=[],f=Math.abs((0,o.d)(Math.atan2(r.direction[0],r.direction[1])-Math.atan2(a.direction[0],a.direction[1]),-Math.PI,Math.PI)),m=0;if(Math.abs(f-Math.PI)<1e-10){var v=[r.point[0],90*r.direction[1]],h=[a.point[0],90*r.direction[1]];p.push(v,h,a.point)}else if(f>l)if((c=Math.ceil(f/l))<d/l||n-t==0){s=(n-t)/c;for(var g=1;g<=c;g++)p.push(e(t+s*g).point)}else u=e(m=t+(s=(n-t)/2)),p=(p=p.concat(i(e,t,m,r,u))).concat(i(e,m,n,u,a));else p.push(a.point);return p}function a(e){return function(e){for(var t=[e[0]],n=1;n<e.length;n++){var r=t[n-1],o=e[n];r[0]>0&&o[0]<0&&r[0]>90&&o[0]<0?t.push([o[0]+360,o[1]]):r[0]<0&&o[0]>0&&r[0]<-90&&o[0]>0?t.push([o[0]-360,o[1]]):t.push(o)}return t}(function(e,t,n){for(var o=(0,r.t)(e,t,n),a=o.pathFunction,s=o.startPoint,c=o.startDirection,u=o.endPoint,l=o.endDirection,d=[s],p=0;p<3;p++)d=d.concat(i(a,p/3,(p+1)/3,0===p?{point:s,direction:c}:void 0,2===p?{point:u,direction:l}:void 0));return d}(e[0],e[1]))}},283:(e,t,n)=>{"use strict";function r(e,t,n){for(var r=Math.floor(e/n),o=Math.floor(t/n),i=[],a=r;a<=o;a++)i.push([a===r?e-r*n:0,a===o?t-o*n:n]);return i}function o(e,t){var n=r(e[0][0],e[1][0],t),o=r(e[0][1],e[1][1],t),i=[];return n.forEach((function(e){o.forEach((function(t){i.push([[e[0],t[0]],[e[1],t[1]]])}))})),i}n.d(t,{C:()=>o})},1886:(e,t,n)=>{"use strict";n.d(t,{o:()=>c});var r=n(8860);var o=n(5900),i=n(5930),a=n(309),s=n(7806);function c(e){var t=[[0,0],[0,0]];e.length&&(t=function(e,t,n){var o=[[1/0,1/0],[-1/0,-1/0]],i=e.length;return[0,1].forEach((function(a){if(n[a]){e.sort((function(e,t){return e[a]-t[a]}));var s=0;e.forEach((function(n,c){var u=c+1,l=u===i?e[0]:e[u],d=(0,r.d)(l[a]-n[a],0,t);d>=s&&(s=d,o[0][a]=l[a],o[1][a]=n[a])})),o[0][a]>o[1][a]&&(o[1][a]+=t)}else e.forEach((function(e){o[0][a]=Math.min(o[0][a],e[a]),o[1][a]=Math.max(o[1][a],e[a])}))})),o}(e.map((function(e){return(0,o.f)(e,s.m6)})),(0,i.Z)(s.m6),s.dg).map((function(e){return(0,a.W)(e,s.m6)})));return t}},8067:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});var r=n(8447);function o(e,t){return(0,r.t)(e,t).distance}},1307:(e,t,n)=>{"use strict";n.d(t,{v:()=>o});var r=n(7806);function o(e,t){return void 0===t&&(t=r.iO),Math.min(Math.max(-90+t,e),90-t)}},4330:(e,t,n)=>{"use strict";n.d(t,{u:()=>o});var r=n(8860);function o(e){return(0,r.d)(e,-180,180)}},9657:(e,t,n)=>{"use strict";n.d(t,{S:()=>c});var r=n(3841),o=n(7806),i=n(4960),a=n(1307),s=n(6732);function c(e,t,n){e[1]=(0,a.v)(e[1]);var c=(0,r.I)(e[1]),u=(0,r.I)(e[0]),l=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)),d=t[1]/l,p=t[0]/l,f=(1-o.KH)*Math.tan(c),m=(0,s.u)(Math.cos(c))*Math.sqrt(1/(1+f*f)),v=Math.sqrt(1-m*m)*(0,s.u)(f),h=Math.atan2(f,d),g=m*p,y=(1-g)*(1+g),_=y*(o.d3*o.d3/(o.AL*o.AL)-1),b=1+_*(4096+_*(_*(320-175*_)-768))/16384,w=_*(256+_*(_*(74-47*_)-128))/1024,E=function(e){var t,r=n*e,a=r/(o.AL*b),s=h+a/2,c=Math.cos(2*s),l=0,f=0;do{var _=w*Math.sin(a)*(c+.25*w*(Math.cos(a)*(2*c*c-1)-1/6*w*c*(4*Math.sin(a)*Math.sin(a)-3)*(4*c*c-3)));t=_-f,f=_,a=r/(o.AL*b)+_,l++}while(Math.abs(t)>o.Qs&&l<10);var E=v*Math.sin(a)-m*Math.cos(a)*d,S=Math.atan2(v*Math.cos(a)+m*Math.sin(a)*d,(1-o.KH)*Math.sqrt(g*g+E*E)),C=Math.atan2(Math.sin(a)*p,m*Math.cos(a)-v*Math.sin(a)*d),k=o.KH/16*y*(4+o.KH*(4-3*y)),R=C-(1-k)*o.KH*g*(a+k*Math.sin(a)*(c+k*Math.cos(a)*(2*c*c-1))),Z=Math.atan2(g,-v*Math.sin(a)+m*Math.cos(a)*d);return{point:[(0,i.Z)(u+R),(0,i.Z)(S)],direction:[Math.sin(Z),Math.cos(Z)]}},S=E(1);return{startPoint:e,startDirection:t,endPoint:S.point,endDirection:S.direction,distance:n,pathFunction:E}}},8447:(e,t,n)=>{"use strict";n.d(t,{t:()=>d});var r=n(9657),o=n(3841),i=n(8860),a=n(7806),s=n(1307),c=n(6732);function u(e){return Math.abs(e-(0,c.u)(e)*Math.PI/2)<a.Qs?(0,c.u)(e)*Math.PI/2:Math.atan((1-a.KH)*Math.tan(e))}function l(e,t,n){return function(o){var i=(0,r.S)(e,t,n*o);return{point:i.endPoint,direction:i.endDirection}}}function d(e,t,n){if(e===t||e[0]===t[0]&&e[1]===t[1]){var r=[1,1];return{startPoint:e,startDirection:r,endPoint:t,endDirection:r,distance:0,pathFunction:l(e,r,0)}}e[1]=(0,s.v)(e[1]),t[1]=(0,s.v)(t[1]);var d,p,f,m=(0,o.I)(e[1]),v=(0,o.I)(t[1]),h=(0,o.I)(t[0]-e[0]),g=u(m),y=u(v),_=h,b=_,w=0,E=0;if(0===m&&0===v){var S=(0,i.d)(t[0]-e[0],n?-360:-180,n?360:180);f=[(p=[S>0?1:-1,0])[0],p[1]],E=2*Math.PI*a.d3/360*Math.abs(S)}else{var C=void 0,k=void 0,R=void 0,Z=void 0,P=void 0,M=void 0,I=void 0;do{C=Math.sqrt(Math.pow(Math.cos(y)*Math.sin(_),2)+Math.pow(Math.cos(g)*Math.sin(y)-Math.sin(g)*Math.cos(y)*Math.cos(_),2)),k=Math.sin(g)*Math.sin(y)+Math.cos(g)*Math.cos(y)*Math.cos(_),P=n?2*Math.PI-Math.atan2(C,k):Math.atan2(C,k),R=Math.cos(g)*Math.cos(y)*Math.sin(_)/Math.sin(P),Z=1-Math.pow(R,2),M=Math.cos(P)-2*Math.sin(g)*Math.sin(y)/Z,I=a.KH/16*Z*(4+a.KH*(4-3*Z)),_=Math.min(Math.max(h+(1-I)*a.KH*R*(P+I*Math.sin(P)*(M+I*Math.cos(P)*(2*M*M-1))),-2*Math.PI),2*Math.PI),d=Math.abs(b-_),b=_,w++}while(d>a.Qs&&w<10);var x=Z*(a.d3*a.d3-a.AL*a.AL)/(a.AL*a.AL),T=1+x*(4096+x*(x*(320-175*x)-768))/16384,L=x*(256+x*(x*(74-47*x)-128))/1024,D=L*Math.sin(P)*(M+.25*L*(Math.cos(P)*(2*M*M-1)-1/6*L*M*(4*Math.sin(P)*Math.sin(P)-3)*(4*M*M-3))),z=Math.atan2(Math.cos(y)*Math.sin(_),Math.cos(g)*Math.sin(y)-Math.sin(g)*Math.cos(y)*Math.cos(_)),A=Math.atan2(Math.cos(g)*Math.sin(_),-Math.sin(g)*Math.cos(y)+Math.cos(g)*Math.sin(y)*Math.cos(_));E=a.AL*T*(P-D),n&&(z-=(0,c.u)(z-Math.PI)*Math.PI,A-=(0,c.u)(A-Math.PI)*Math.PI),p=[Math.sin(z),Math.cos(z)],f=[Math.sin(A),Math.cos(A)]}return{startPoint:e,startDirection:p,endPoint:t,endDirection:f,distance:E,pathFunction:l(e,p,E)}}},6732:(e,t,n)=>{"use strict";function r(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1}n.d(t,{u:()=>r})},2690:(e,t,n)=>{"use strict";function r(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}n.d(t,{g:()=>r})},8860:(e,t,n)=>{"use strict";function r(e,t,n){return e===Number.POSITIVE_INFINITY?n:e===Number.NEGATIVE_INFINITY?t:e===t&&e===n?e:e-Math.floor((e-t)/(n-t))*(n-t)}n.d(t,{d:()=>r})},3841:(e,t,n)=>{"use strict";function r(e){return Math.PI/180*e}n.d(t,{I:()=>r})},4960:(e,t,n)=>{"use strict";function r(e){return 180/Math.PI*e}n.d(t,{Z:()=>r})},7048:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var r=n(5900),o=n(5930);function i(e){return[e[0],e[1]]}function a(e,t){var n=(0,r.f)(e[0],t),a=(0,r.f)(e[1],t),s=(0,o.Z)(t),c=[i(n),i(a)];return n[0]>a[0]&&(c[0][0]=n[0],c[1][0]=a[0]+s),n[1]>a[1]&&(c[0][1]=a[1],c[1][1]=n[1]),c}},5900:(e,t,n)=>{"use strict";n.d(t,{f:()=>a});var r=n(4330),o=n(1307);var i=n(7806);function a(e,t,n){void 0===n&&(n=!1),e=function(e){var t=e[0],n=e[1];return[(0,r.u)(t),(0,o.v)(n)]}(e);var a=e[1]*Math.PI/180,s=Math.tan(.25*Math.PI+.5*a),c=Math.pow(2,t+8),u=n?1:Math.pow(Math.tan(.25*Math.PI+.5*Math.asin(i.Iv*Math.sin(a))),i.Iv);return[(e[0]/360+.5)*c,(.5-Math.log(s/u)/(2*Math.PI))*c]}},7689:(e,t,n)=>{"use strict";function r(e){return[Math.abs(e[1][0]-e[0][0]),Math.abs(e[1][1]-e[0][1])]}n.d(t,{j:()=>r})},309:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var r=n(7806);function o(e,t,n){void 0===n&&(n=!0);var o=Math.pow(2,t+8),i=n?e[0]%o:e[0],a=2*Math.atan(Math.exp(Math.PI*(1-2*e[1]/o)))-.5*Math.PI;return[360*i/o-180,180*(a+r.D2*Math.sin(2*a)+r.D4*Math.sin(4*a)+r.D6*Math.sin(6*a)+r.D8*Math.sin(8*a))/Math.PI]}},6504:(e,t)=>{"use strict";function n(e){try{return decodeURIComponent(e)}catch(t){return""}}},1372:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>o,pi:()=>i,ev:()=>a});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function a(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}},1367:e=>{"use strict";e.exports="/worker/flyover.js"},3144:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,{Z:()=>o})},5196:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:()=>o})},4193:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return function(t){return null==t?void 0:t[e]}}},1976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7685);const o=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};var i=n(7771),a=n(2714),s=r.Z?r.Z.prototype:void 0,c=s?s.toString:void 0;const u=function e(t){if("string"==typeof t)return t;if((0,i.Z)(t))return o(t,e)+"";if((0,a.Z)(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},2865:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const r=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};const o=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},9047:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const o=function(e){return r.test(e)}},7220:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});const r=function(e){return e.split("")};var o=n(9047),i="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",c="[^\\ud800-\\udfff]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",d="(?:"+a+"|"+s+")"+"?",p="[\\ufe0e\\ufe0f]?",f=p+d+("(?:\\u200d(?:"+[c,u,l].join("|")+")"+p+d+")*"),m="(?:"+[c+a+"?",a,u,l,i].join("|")+")",v=RegExp(s+"(?="+s+")|"+m+f,"g");const h=function(e){return e.match(v)||[]};const g=function(e){return(0,o.Z)(e)?h(e):r(e)}},2967:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(7338),o=n(2865),i=n(9047),a=n(7220);const s=function(e){return function(t){t=(0,r.Z)(t);var n=(0,i.Z)(t)?(0,a.Z)(t):void 0,s=n?n[0]:t.charAt(0),c=n?(0,o.Z)(n,1).join(""):t.slice(1);return s[e]()+c}}("toUpperCase");const c=function(e){return s((0,r.Z)(e).toLowerCase())}},111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9111),o=n(7226);const i=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,o.Z)(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),(0,r.Z)(e,t,{leading:i,maxWait:t,trailing:a})}},7338:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1976);const o=function(e){return null==e?"":(0,r.Z)(e)}},9410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r=n(1976),o=n(2865),i=n(9047),a=n(7226),s=n(3243),c=n(8533);const u=function(e){return(0,c.Z)(e)&&"[object RegExp]"==(0,s.Z)(e)};var l=n(1162),d=n(8351),p=d.Z&&d.Z.isRegExp;const f=p?(0,l.Z)(p):u;const m=(0,n(4193).Z)("length");var v="[\\ud800-\\udfff]",h="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",g="\\ud83c[\\udffb-\\udfff]",y="[^\\ud800-\\udfff]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",w="(?:"+h+"|"+g+")"+"?",E="[\\ufe0e\\ufe0f]?",S=E+w+("(?:\\u200d(?:"+[y,_,b].join("|")+")"+E+w+")*"),C="(?:"+[y+h+"?",h,_,b,v].join("|")+")",k=RegExp(g+"(?="+g+")|"+C+S,"g");const R=function(e){for(var t=k.lastIndex=0;k.test(e);)++t;return t};const Z=function(e){return(0,i.Z)(e)?R(e):m(e)};var P=n(7220),M=n(9651),I=n(7338),x=/\w*$/;const T=function(e,t){var n=30,s="...";if((0,a.Z)(t)){var c="separator"in t?t.separator:c;n="length"in t?(0,M.Z)(t.length):n,s="omission"in t?(0,r.Z)(t.omission):s}var u=(e=(0,I.Z)(e)).length;if((0,i.Z)(e)){var l=(0,P.Z)(e);u=l.length}if(n>=u)return e;var d=n-Z(s);if(d<1)return s;var p=l?(0,o.Z)(l,0,d).join(""):e.slice(0,d);if(void 0===c)return p+s;if(l&&(d+=p.length-d),f(c)){if(e.slice(d).search(c)){var m,v=p;for(c.global||(c=RegExp(c.source,(0,I.Z)(x.exec(c))+"g")),c.lastIndex=0;m=c.exec(v);)var h=m.index;p=p.slice(0,void 0===h?d:h)}}else if(e.indexOf((0,r.Z)(c),d)!=d){var g=p.lastIndexOf(c);g>-1&&(p=p.slice(0,g))}return p+s}}}]);